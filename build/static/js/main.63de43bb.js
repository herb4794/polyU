/*! For license information please see main.63de43bb.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,O(x);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(C),C=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,T=null,C=-1,S=5,I=-1;function N(){return!(t.unstable_now()-I<S)}function R(){if(null!==T){var e=t.unstable_now();I=e;var n=!0;try{n=T(!0,e)}finally{n?k():(E=!1,T=null)}}else E=!1}if("function"===typeof _)k=function(){_(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=R,k=function(){A.postMessage(null)}}else k=function(){y(R,0)};function O(e){T=e,E||(E=!0,k())}function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,D(w,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Yd){var r=Yd}Reflect.construct(e,[],t)}else{try{t.call()}catch(Yd){r=Yd}e.call(t.prototype)}else{try{throw Error()}catch(Yd){r=Yd}e()}}catch(Yd){if(Yd&&r&&"string"===typeof Yd.stack){for(var i=Yd.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(fy){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ee=null;function Te(e){if(e=_i(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ce(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Se(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==ke||null!==Ee)&&(Ne(),Se())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,je=null,Fe=!1,Ue=null,ze={onError:function(e){Me=!0,je=e}};function Ve(e,t,n,r,i,s,o,a,l){Me=!1,je=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,kt,Et,Tt,Ct=!1,St=[],It=null,Nt=null,Rt=null,Pt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function zt(){Ct=!1,null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(Ut),At.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Nt&&Vt(Nt,e),null!==Rt&&Vt(Rt,e),Pt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)jt(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,$t=!0;function Ht(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Wt(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Kt(e,t,n,r){if($t){var i=Qt(e,t,n,r);if(null===i)$r(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&$r(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=j({},cn,{view:0,detail:0}),dn=sn(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(j({},fn,{dataTransfer:0})),gn=sn(j({},hn,{relatedTarget:0})),yn=sn(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),bn=sn(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Tn(){return En}var Cn=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=sn(Cn),In=sn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=sn(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Pn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,jn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Qn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Er={};function Tr(e){if(kr[e])return kr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Tr("animationend"),Sr=Tr("animationiteration"),Ir=Tr("animationstart"),Nr=Tr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Rr.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Sr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=je;Me=!1,je=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=we(n),o=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Cr:case Sr:case Ir:l=yn;break;case Nr:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ae(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==h&&Gr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if($n(a))if(Xn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?zn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Wr(r,_)).length&&(_=new bn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=Vn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Fr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Ae(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ae(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Ae(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var xi=[],ki=-1;function Ei(e){return{current:e}}function Ti(e){0>ki||(e.current=xi[ki],xi[ki]=null,ki--)}function Ci(e,t){ki++,xi[ki]=e.current,e.current=t}var Si={},Ii=Ei(Si),Ni=Ei(!1),Ri=Si;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ti(Ni),Ti(Ii)}function Di(e,t,n){if(Ii.current!==Si)throw Error(s(168));Ci(Ii,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ri=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ii),Ci(Ii,e)):Ti(Ni),Ci(Ni,n)}var Fi=null,Ui=!1,zi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=_t;try{var n=Fi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Bi),i}finally{_t=t,zi=!1}}return null}var qi=[],$i=0,Hi=null,Wi=0,Ki=[],Gi=0,Qi=null,Yi=1,Xi="";function Ji(e,t){qi[$i++]=Wi,qi[$i++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--$i],qi[$i]=null,Wi=qi[--$i],qi[$i]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Xi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case A:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Ji(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Dc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case A:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=jc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=_s(!0),ws=_s(!1),xs=Ei(null),ks=null,Es=null,Ts=null;function Cs(){Ts=Es=ks=null}function Ss(e){var t=xs.current;Ti(xs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){ks=e,Ts=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===ks)throw Error(s(308));Es=e,ks.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ps=null;function As(e){null===Ps?Ps=[e]:Ps.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,As(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,As(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var $s={},Hs=Ei($s),Ws=Ei($s),Ks=Ei($s);function Gs(e){if(e===$s)throw Error(s(174));return e}function Qs(e,t){switch(Ci(Ks,t),Ci(Ws,e),Ci(Hs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Hs),Ci(Hs,t)}function Ys(){Ti(Hs),Ti(Ws),Ti(Ks)}function Xs(e){Gs(Ks.current);var t=Gs(Hs.current),n=le(t,e.type);t!==n&&(Ci(Ws,e),Ci(Hs,n))}function Js(e){Ws.current===e&&(Ti(Hs),Ti(Ws))}var Zs=Ei(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Jo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function _o(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function Eo(e,t){var n=oo,r=_o(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Mo(So.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,Co.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&No(e)}function So(e,t,n){return n((function(){Io(t)&&No(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ro(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ao(){return _o().memoizedState}function Oo(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Lo(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function jo(e,t){return Do(4,2,e,t)}function Fo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function Vo(){}function Bo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ho(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{_t=n,io.transition=r}}function Wo(){return _o().memoizedState}function Ko(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Yo(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Xo(n,t,r)}}function Go(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,As(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Yd){}null!==(n=Os(e,t,i,r))&&(nc(n,e,r,i=ec()),Xo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Jo={readContext:Rs,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Rs,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Ro,useDebugValue:Vo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&so)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(So.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Nl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:qo,useReducer:wo,useRef:Ao,useState:function(){return wo(bo)},useDebugValue:Vo,useDeferredValue:function(e){return $o(_o(),ao.memoizedState,e)},useTransition:function(){return[wo(bo)[0],_o().memoizedState]},useMutableSource:ko,useSyncExternalStore:Eo,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:qo,useReducer:xo,useRef:Ao,useState:function(){return xo(bo)},useDebugValue:Vo,useDeferredValue:function(e){var t=_o();return null===ao?t.memoizedState=e:$o(t,ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],_o().memoizedState]},useMutableSource:ko,useSyncExternalStore:Eo,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),zs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Si,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=Ai(t)?Ri:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Si),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=Ai(t)?Ri:Ii.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=b.ReactCurrentOwner,_a=!1;function ba(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||_a?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function xa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ac(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ka(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return $a(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,$a(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ca(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ol,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ol,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Ol,Al),Al|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Ol,Al),Al|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Ai(n)?Ri:Ii.current;return s=Pi(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||_a?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Sa(e,t,n,r,i){if(Ai(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Pi(t,c=Ai(n)?Ri:Ii.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,js(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Pi(t,l=Ai(n)?Ri:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,s,i)}function Ia(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),$a(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Qs(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Aa,Oa,Da,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $a(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Wa(t),null;case 3:return r=t.stateNode,Ys(),Ti(Ni),Ti(Ii),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Aa(e,t),Wa(t),null;case 5:Js(t);var i=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Gs(Hs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ks.current),Gs(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Ys(),Aa(e,t),null===e&&Br(t.stateNode.containerInfo),Wa(t),null;case 10:return Ss(t.type._context),Wa(t),null;case 19:if(Ti(Zs),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Xe()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Ci(Zs,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ga(e,t){switch(ts(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ti(Ni),Ti(Ii),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ti(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Zs),null;case 4:return Ys(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Aa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Hs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,dl(e,t,n),Ya=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(Yd){Ec(i,t,Yd)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||h,ml(t,e),Ya=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Ja=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(Wd){Ec(e,e.return,Wd)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Ja=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var c=Ya;if(Qa=o,(Ya=l)&&!c)for(Ja=i;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?xl(i):null!==l?(l.return=o,Ja=l):xl(i);for(;null!==s;)Ja=s,_l(s,t,n),s=s.sibling;Ja=i,Qa=a,Ya=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ja=s):bl(e)}}function bl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(of){Ec(t,t.return,of)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(Wd){Ec(t,n,Wd)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Wd){Ec(t,i,Wd)}}var s=t.return;try{il(t)}catch(Wd){Ec(t,s,Wd)}break;case 5:var o=t.return;try{il(t)}catch(Wd){Ec(t,o,Wd)}}}catch(Wd){Ec(t,t.return,Wd)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var kl,El=Math.ceil,Tl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,Sl=b.ReactCurrentBatchConfig,Il=0,Nl=null,Rl=null,Pl=0,Al=0,Ol=Ei(0),Dl=0,Ll=null,Ml=0,jl=0,Fl=0,Ul=null,zl=null,Vl=0,Bl=1/0,ql=null,$l=!1,Hl=null,Wl=null,Kl=!1,Gl=null,Ql=0,Yl=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Il)&&e===Nl||(e===Nl&&(0===(2&Il)&&(jl|=n),4===Dl&&ac(e,Pl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Bl=Xe()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),oi((function(){0===(6&Il)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Il;Il|=2;var o=pc();for(Nl===e&&Pl===t||(ql=null,Bl=Xe()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Cs(),Tl.current=o,Il=i,null!==Rl?t=0:(Nl=null,Pl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,zl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,zl,ql),t);break}wc(e,zl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,zl,ql),r);break}wc(e,zl,ql);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(s(327));xc();var t=dt(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,ql),rc(e,Xe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=Xe()+500,Ui&&Bi())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Il)&&xc();var t=Il;Il|=1;var n=Sl.transition,r=_t;try{if(Sl.transition=null,_t=1,e)return e()}finally{_t=r,Sl.transition=n,0===(6&(Il=t))&&Bi()}}function hc(){Al=Ol.current,Ti(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Ys(),Ti(Ni),Ti(Ii),no();break;case 5:Js(r);break;case 4:Ys();break;case 13:case 19:Ti(Zs);break;case 10:Ss(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nl=e,Rl=e=Oc(e.current,null),Pl=Al=t,Dl=0,Ll=null,Fl=jl=Ml=0,zl=Ul=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(Cs(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Cl.current=null,null===n||null===n.return){Dl=1,Ll=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Wl||!Wl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(uf){t=uf,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=Tl.current;return Tl.current=Jo,null===e?Jo:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Nl||0===(268435455&Ml)&&0===(268435455&jl)||ac(Nl,Pl)}function gc(e,t){var n=Il;Il|=2;var r=pc();for(Nl===e&&Pl===t||(ql=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Cs(),Il=n,Tl.current=r,null!==Rl)throw Error(s(261));return Nl=null,Pl=0,Dl}function yc(){for(;null!==Rl;)_c(Rl)}function vc(){for(;null!==Rl&&!Qe();)_c(Rl)}function _c(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?bc(e):Rl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Al)))return void(Rl=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Dl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=_t,i=Sl.transition;try{Sl.transition=null,_t=1,function(e,t,n,r){do{xc()}while(null!==Gl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Rl=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Sl.transition,Sl.transition=null;var a=_t;_t=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(ei=$t,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Op){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(Op){Ec(t,t.return,Op)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),$t=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Il=l,_t=a,Sl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Ql=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($l)throw $l=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,Bi()}(e,t,n,r)}finally{Sl.transition=i,_t=r}return null}function xc(){if(null!==Gl){var e=bt(Ql),t=Sl.transition,n=_t;try{if(Sl.transition=null,_t=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(sl(h),h===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ja=v;break e}Ja=o.return}}var _=e.current;for(Ja=_;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=_;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(uf){Ec(l,l.return,uf)}if(l===a){Ja=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break e}Ja=l.return}}if(Il=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(uf){}r=!0}return r}finally{_t=n,Sl.transition=t}}return!1}function kc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Dl||3===Dl&&(130023424&Pl)===Pl&&500>Xe()-Vl?dc(e,0):Fl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(yt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ac(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Lc(n.children,i,o,t);case E:a=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case S:a=9;break e;case I:a=11;break e;case P:a=14;break e;case A:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Vc(e){if(!e)return Si;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nc(e,i,o,s),zs(e,i,o)),o}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:Xs(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Ci(Zs,1&Zs.current),null!==(e=$a(e,t,n))?e.sibling:null);Ci(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return $a(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ia(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Sa(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=xa(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,js(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=$a(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return ja(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(xs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=$a(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=Rs(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),xa(e,t,r,i=na(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ea(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=$c(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=$c(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=$c(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return $c(o)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Il)&&(Bl=Xe()+500,Bi()))}break;case 13:uc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Ce,Se,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),s=n.t(i,2),o=n(391),a=n(950),l=n.t(a,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=r.Pop,d=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){l=r.Pop;let e=y(),t=null==e?null:e-g;g=e,d&&d({action:l,location:b.location,delta:t})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(c({},a.state,{idx:g}),""));let b={get action(){return l},get location(){return e(s,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(u,v),d=e,()=>{s.removeEventListener(u,v),d=null}},createHref:e=>t(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=p(b.location,e,t);n&&n(i,e),g=y()+1;let c=f(i,g),u=b.createHref(i);try{a.pushState(c,"",u)}catch(fr){if(fr instanceof DOMException&&"DataCloneError"===fr.name)throw fr;s.location.assign(u)}o&&d&&d({action:l,location:b.location,delta:1})},replace:function(e,t){l=r.Replace;let i=p(b.location,e,t);n&&n(i,e),g=y();let s=f(i,g),c=b.createHref(i);a.replaceState(s,"",c),o&&d&&d({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function _(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let i=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let s=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=O(i);o=P(s[a],e,r)}return o}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=U([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:R(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))i(e,t,r);else i(e,t)})),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=x(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,E=3,T=2,C=1,S=10,I=-2,N=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=I),t&&(r+=T),n.filter((e=>!N(e))).reduce(((e,t)=>e+(k.test(t)?E:""===t?C:S)),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:U([s,u.pathname]),pathnameBase:z(U([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=U([s,u.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(fr){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+fr+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=M(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=c({},e),h(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:B(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const $=["post","put","patch","delete"],H=(new Set($),["get",...$]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const K=i.createContext(null);const G=i.createContext(null);const Q=i.createContext(null);const Y=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const J=i.createContext(null);function Z(){return null!=i.useContext(Y)}function ee(){return Z()||h(!1),i.useContext(Y).location}function te(e){i.useContext(Q).static||i.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=de(ue.UseNavigateStable),t=pe(he.UseNavigateStable),n=i.useRef(!1);te((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t]);return r}():function(){Z()||h(!1);let e=i.useContext(K),{basename:t,future:n,navigator:r}=i.useContext(Q),{matches:s}=i.useContext(X),{pathname:o}=ee(),a=JSON.stringify(j(s,n.v7_relativeSplatPath)),l=i.useRef(!1);te((()=>{l.current=!0}));let c=i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=F(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e]);return c}()}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(Q),{matches:s}=i.useContext(X),{pathname:o}=ee(),a=JSON.stringify(j(s,r.v7_relativeSplatPath));return i.useMemo((()=>F(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function ie(e,t,n,s){Z()||h(!1);let{navigator:o,static:a}=i.useContext(Q),{matches:l}=i.useContext(X),c=l[l.length-1],u=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,p=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||h(!1),f=e}else f=p;let y=f.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=!a&&n&&n.matches&&n.matches.length>0?n.matches:_(e,{pathname:v});let w=ce(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:U([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:U([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,s);return t&&w?i.createElement(Y.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:r.Pop}},w):w}function se(){let e=function(){var e;let t=i.useContext(J),n=fe(he.UseRouteError),r=pe(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const oe=i.createElement(se,null);class ae extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(K);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function ce(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,s)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||oe,c&&(u<0&&0===s?(p="route-fallback",!1||me[p]||(me[p]=!0),h=!0,f=null):u===s&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(le,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(ae,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function de(e){let t=i.useContext(K);return t||h(!1),t}function fe(e){let t=i.useContext(G);return t||h(!1),t}function pe(e){let t=function(){let e=i.useContext(X);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const me={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ye(e){h(!1)}function ve(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:l=!1,future:c}=e;Z()&&h(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo((()=>({basename:u,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=s,_=i.useMemo((()=>{let e=D(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:o}}),[u,f,p,m,y,v,o]);return null==_?null:i.createElement(Q.Provider,{value:d},i.createElement(Y.Provider,{children:n,value:_}))}function _e(e){let{children:t,location:n}=e;return ie(be(t),n)}new Promise((()=>{}));i.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,be(e.props.children,s));e.type!==ye&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,s)),n.push(o)})),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(hS){}new Map;const Ee=s.startTransition;l.flushSync,s.useId;function Te(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),y((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=i.useCallback((e=>{h&&Ee?Ee((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>l.listen(d)),[l,d]),i.useEffect((()=>ge(r)),[r]),i.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,p=xe(e,ke),{basename:g}=i.useContext(Q),y=!1;if("string"===typeof u&&Se.test(u)&&(n=u,Ce))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(hS){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||h(!1);let{basename:r,navigator:s}=i.useContext(Q),{hash:o,pathname:a,search:l}=re(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:U([r,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),_=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,c=ne(),u=ee(),h=re(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:m(u)===m(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l})}}),[u,c,h,r,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});return i.createElement("a",we({},p,{href:n||v,onClick:y||o?r:function(e){r&&r(e),e.defaultPrevented||_(e)},ref:t,target:c}))}));var Ne,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));const Pe=!1,Ae=!1,Oe="${JSCORE_VERSION}",De=function(e,t){if(!e)throw Le(t)},Le=function(e){return new Error("Firebase Database ("+Oe+") INTERNAL ASSERT FAILED: "+e)},Me=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Me(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Fe;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(e){const t=Me(e);return je.encodeByteArray(t,!0)},ze=function(e){return Ue(e).replace(/\./g,"")},Ve=function(e){try{return je.decodeString(e,!0)}catch(hS){console.error("base64Decode failed: ",hS)}return null};function Be(e){return qe(void 0,e)}function qe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=qe(e[n],t[n]));return e}const $e=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,He=()=>{try{return $e()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(hS){return}const t=e&&Ve(e[1]);return t&&JSON.parse(t)})()}catch(hS){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${hS}`)}},We=e=>{var t,n;return null===(n=null===(t=He())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ke=e=>{const t=We(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ge=()=>{var e;return null===(e=He())||void 0===e?void 0:e.config},Qe=e=>{var t;return null===(t=He())||void 0===t?void 0:t[`_${e}`]};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Xe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(s)),""].join(".")}function Je(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function et(){var e;const t=null===(e=He())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(hS){return!1}}function tt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function nt(){return!0===Pe||!0===Ae}function rt(){try{return"object"===typeof indexedDB}catch(hS){return!1}}class it extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,it.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}}class st{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(ot,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new it(n,s,t)}}const ot=/\{\$([^}]+)}/g;function at(e){return JSON.parse(e)}function lt(e){return JSON.stringify(e)}const ct=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=at(Ve(s[0])||""),n=at(Ve(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(hS){}return{header:t,claims:n,data:r,signature:i}};function ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function dt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ft(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function pt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(mt(n)&&mt(s)){if(!pt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mt(e){return null!==e&&"object"===typeof e}function gt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function yt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function vt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class _t{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class bt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=wt),void 0===r.error&&(r.error=wt),void 0===r.complete&&(r.complete=wt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(hS){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(hS){"undefined"!==typeof console&&console.error&&console.error(hS)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function wt(){}function xt(e,t){return`${e} failed: ${t} argument `}const kt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Et(e){return e&&e._delegate?e._delegate:e}class Tt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ct="[DEFAULT]";class St{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ye;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(hS){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(hS){if(r)return null;throw hS}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ct})}catch(hS){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(hS){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ct?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct;return this.component?this.component.multipleInstances?e:Ct:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class It{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new St(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Nt=[];var Rt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Rt||(Rt={}));const Pt={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},At=Rt.INFO,Ot={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},Dt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ot[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Lt{constructor(e){this.name=e,this._logLevel=At,this._logHandler=Dt,this._userLogHandler=null,Nt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Pt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...t),this._logHandler(this,Rt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...t),this._logHandler(this,Rt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...t),this._logHandler(this,Rt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...t),this._logHandler(this,Rt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...t),this._logHandler(this,Rt.ERROR,...t)}}let Mt,jt;const Ft=new WeakMap,Ut=new WeakMap,zt=new WeakMap,Vt=new WeakMap,Bt=new WeakMap;let qt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ut.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function $t(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(jt||(jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Kt(this),n),Wt(Ft.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Wt(e.apply(Kt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Kt(this),t,...r);return zt.set(s,t.sort?t.sort():[t]),Wt(s)}}function Ht(e){return"function"===typeof e?$t(e):(e instanceof IDBTransaction&&function(e){if(Ut.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ut.set(e,t)}(e),t=e,(Mt||(Mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,qt):e);var t}function Wt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Wt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ft.set(t,e)})).catch((()=>{})),Bt.set(t,e),t}(e);if(Vt.has(e))return Vt.get(e);const t=Ht(e);return t!==e&&(Vt.set(e,t),Bt.set(t,e)),t}const Kt=e=>Bt.get(e);const Gt=["get","getKey","getAll","getAllKeys","count"],Qt=["put","add","delete","clear"],Yt=new Map;function Xt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Yt.get(t))return Yt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Qt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Gt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Yt.set(t,s),s}qt=(e=>({...e,get:(t,n,r)=>Xt(t,n)||e.get(t,n,r),has:(t,n)=>!!Xt(t,n)||e.has(t,n)}))(qt);class Jt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Zt="@firebase/app",en="0.9.13",tn=new Lt("@firebase/app"),nn="@firebase/app-compat",rn="@firebase/analytics-compat",sn="@firebase/analytics",on="@firebase/app-check-compat",an="@firebase/app-check",ln="@firebase/auth",cn="@firebase/auth-compat",un="@firebase/database",hn="@firebase/database-compat",dn="@firebase/functions",fn="@firebase/functions-compat",pn="@firebase/installations",mn="@firebase/installations-compat",gn="@firebase/messaging",yn="@firebase/messaging-compat",vn="@firebase/performance",_n="@firebase/performance-compat",bn="@firebase/remote-config",wn="@firebase/remote-config-compat",xn="@firebase/storage",kn="@firebase/storage-compat",En="@firebase/firestore",Tn="@firebase/firestore-compat",Cn="firebase",Sn="[DEFAULT]",In={[Zt]:"fire-core",[nn]:"fire-core-compat",[sn]:"fire-analytics",[rn]:"fire-analytics-compat",[an]:"fire-app-check",[on]:"fire-app-check-compat",[ln]:"fire-auth",[cn]:"fire-auth-compat",[un]:"fire-rtdb",[hn]:"fire-rtdb-compat",[dn]:"fire-fn",[fn]:"fire-fn-compat",[pn]:"fire-iid",[mn]:"fire-iid-compat",[gn]:"fire-fcm",[yn]:"fire-fcm-compat",[vn]:"fire-perf",[_n]:"fire-perf-compat",[bn]:"fire-rc",[wn]:"fire-rc-compat",[xn]:"fire-gcs",[kn]:"fire-gcs-compat",[En]:"fire-fst",[Tn]:"fire-fst-compat","fire-js":"fire-js",[Cn]:"fire-js-all"},Nn=new Map,Rn=new Map;function Pn(e,t){try{e.container.addComponent(t)}catch(hS){tn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,hS)}}function An(e){const t=e.name;if(Rn.has(t))return tn.debug(`There were multiple attempts to register component ${t}.`),!1;Rn.set(t,e);for(const n of Nn.values())Pn(n,e);return!0}function On(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Dn=new st("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ln{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const Mn="9.23.0";function jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Sn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(n||(n=Ge()),!n)throw Dn.create("no-options");const s=Nn.get(i);if(s){if(pt(n,s.options)&&pt(r,s.config))return s;throw Dn.create("duplicate-app",{appName:i})}const o=new It(i);for(const l of Rn.values())o.addComponent(l);const a=new Ln(n,r,o);return Nn.set(i,a),a}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn;const t=Nn.get(e);if(!t&&e===Sn&&Ge())return jn();if(!t)throw Dn.create("no-app",{appName:e});return t}function Un(e,t,n){var r;let i=null!==(r=In[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void tn.warn(e.join(" "))}An(new Tt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const zn="firebase-heartbeat-store";let Vn=null;function Bn(){return Vn||(Vn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Wt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Wt(o.result),e.oldVersion,e.newVersion,Wt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(zn)}}).catch((e=>{throw Dn.create("idb-open",{originalErrorMessage:e.message})}))),Vn}async function qn(e,t){try{const n=(await Bn()).transaction(zn,"readwrite"),r=n.objectStore(zn);await r.put(t,$n(e)),await n.done}catch(hS){if(hS instanceof it)tn.warn(hS.message);else{const t=Dn.create("idb-set",{originalErrorMessage:null===hS||void 0===hS?void 0:hS.message});tn.warn(t.message)}}}function $n(e){return`${e.name}!${e.options.appId}`}class Hn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Kn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Wn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Wn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Gn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ze(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Wn(){return(new Date).toISOString().substring(0,10)}class Kn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!rt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(fr){t(fr)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Bn();return await t.transaction(zn).objectStore(zn).get($n(e))}catch(hS){if(hS instanceof it)tn.warn(hS.message);else{const t=Dn.create("idb-get",{originalErrorMessage:null===hS||void 0===hS?void 0:hS.message});tn.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Gn(e){return ze(JSON.stringify({version:2,heartbeats:e})).length}var Qn;Qn="",An(new Tt("platform-logger",(e=>new Jt(e)),"PRIVATE")),An(new Tt("heartbeat",(e=>new Hn(e)),"PRIVATE")),Un(Zt,en,Qn),Un(Zt,en,"esm2017"),Un("fire-js","");const Yn="@firebase/database",Xn="0.14.4";let Jn="";class Zn{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),lt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:at(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class er{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ut(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tr=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Zn(t)}}catch(hS){}return new er},nr=tr("localStorage"),rr=tr("sessionStorage"),ir=new Lt("@firebase/database"),sr=function(){let e=1;return function(){return e++}}(),or=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,De(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new _t;n.update(t);const r=n.digest();return je.encodeByteArray(r)},ar=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=ar.apply(null,n):e+="object"===typeof n?lt(n):n,e+=" "}return e};let lr=null,cr=!0;const ur=function(e,t){De(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ir.logLevel=Rt.VERBOSE,lr=ir.log.bind(ir),t&&rr.set("logging_enabled",!0)):"function"===typeof e?lr=e:(lr=null,rr.remove("logging_enabled"))},hr=function(){if(!0===cr&&(cr=!1,null===lr&&!0===rr.get("logging_enabled")&&ur(!0)),lr){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ar.apply(null,t);lr(r)}},dr=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];hr(e,...n)}},fr=function(){const e="FIREBASE INTERNAL ERROR: "+ar(...arguments);ir.error(e)},pr=function(){const e=`FIREBASE FATAL ERROR: ${ar(...arguments)}`;throw ir.error(e),new Error(e)},mr=function(){const e="FIREBASE WARNING: "+ar(...arguments);ir.warn(e)},gr=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},yr="[MIN_NAME]",vr="[MAX_NAME]",_r=function(e,t){if(e===t)return 0;if(e===yr||t===vr)return-1;if(t===yr||e===vr)return 1;{const n=Sr(e),r=Sr(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},br=function(e,t){return e===t?0:e<t?-1:1},wr=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+lt(t))},xr=function(e){if("object"!==typeof e||null===e)return lt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=lt(t[r]),n+=":",n+=xr(e[t[r]]);return n+="}",n},kr=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Er(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Tr=function(e){De(!gr(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Cr=new RegExp("^-?(0*)\\d{1,10}$"),Sr=function(e){if(Cr.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ir=function(e){try{e()}catch(hS){setTimeout((()=>{const t=hS.stack||"";throw mr("Exception was thrown by user callback.",t),hS}),Math.floor(0))}},Nr=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Rr{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){mr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Pr{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mr(e)}}class Ar{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ar.OWNER="owner";const Or="5",Dr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Lr="ac",Mr="websocket",jr="long_polling";class Fr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nr.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Ur(e,t,n){let r;if(De("string"===typeof t,"typeof type must == string"),De("object"===typeof n,"typeof params must == object"),t===Mr)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==jr)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Er(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class zr{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ut(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Be(this.counters_)}}const Vr={},Br={};function qr(e){const t=e.toString();return Vr[t]||(Vr[t]=new zr),Vr[t]}class $r{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Ir((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Hr="start";class Wr{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dr(e),this.stats_=qr(t),this.urlFn=e=>(this.appCheckToken&&(e[Lr]=this.appCheckToken),Ur(t,jr,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new $r(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(nt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Hr)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Hr]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Or,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Lr]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Dr.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wr.forceAllow_=!0}static forceDisallow(){Wr.forceDisallow_=!0}static isAvailable(){return!nt()&&(!!Wr.forceAllow_||!Wr.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=lt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ue(t),r=kr(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(nt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=lt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Kr{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,nt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Kr.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(hS){hr("frame writing exception"),hS.stack&&hr(hS.stack),hr(hS)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||hr("No IE domain setting required")}catch(hS){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){nt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{hr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(hS){}}),Math.floor(1))}}let Gr=null;"undefined"!==typeof MozWebSocket?Gr=MozWebSocket:"undefined"!==typeof WebSocket&&(Gr=WebSocket);class Qr{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dr(this.connId),this.stats_=qr(t),this.connURL=Qr.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Or,!nt()&&"undefined"!==typeof location&&location.hostname&&Dr.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Lr]=r),i&&(s.p=i),Ur(e,Mr,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nr.set("previous_websocket_failure",!0);try{let e;if(nt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Or}/${Jn}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Gr(this.connURL,[],e)}catch(hS){this.log_("Error instantiating WebSocket.");const t=hS.message||hS.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Qr.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Gr&&!Qr.forceDisallow_}static previouslyFailed(){return nr.isInMemoryStorage||!0===nr.get("previous_websocket_failure")}markConnectionHealthy(){nr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=at(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(De(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=lt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=kr(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(hS){this.log_("Exception thrown from WebSocket.send():",hS.message||hS.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qr.responsesRequiredToBeHealthy=2,Qr.healthyTimeout=3e4;class Yr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Wr,Qr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Qr&&Qr.isAvailable();let n=t&&!Qr.previouslyFailed();if(e.webSocketOnly&&(t||mr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Qr];else{const e=this.transports_=[];for(const t of Yr.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Yr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yr.globalTransportInitialized_=!1;class Xr{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dr("c:"+this.id+":"),this.transportManager_=new Yr(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Nr((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wr("t",e),n=wr("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wr("t",e),n=wr("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wr("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?fr("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fr("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Or!==n&&mr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Nr((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nr((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Jr{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Zr{constructor(e){this.allowedEvents_=e,this.listeners_={},De(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){De(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ei extends Zr{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ze()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ei}getInitialEvent(e){return De("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ti{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ni(){return new ti("")}function ri(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ii(e){return e.pieces_.length-e.pieceNum_}function si(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ti(e.pieces_,t)}function oi(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ai(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function li(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ti(t,0)}function ci(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ti)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ti(n,0)}function ui(e){return e.pieceNum_>=e.pieces_.length}function hi(e,t){const n=ri(e),r=ri(t);if(null===n)return t;if(n===r)return hi(si(e),si(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function di(e,t){const n=ai(e,0),r=ai(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=_r(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function fi(e,t){if(ii(e)!==ii(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function pi(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ii(e)>ii(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class mi{constructor(e,t){this.errorPrefix_=t,this.parts_=ai(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=kt(this.parts_[n]);gi(this)}}function gi(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yi(e))}function yi(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class vi extends Zr{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new vi}getInitialEvent(e){return De("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _i=1e3;class bi extends Jr{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=bi.nextPersistentConnectionId_++,this.log_=dr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_i,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vi.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ei.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(lt(i)),De(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Ye,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),De(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;bi.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&ut(e,"w")){const n=ht(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();mr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=ct(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=ct(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+lt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):fr("Unrecognized action received from server: "+lt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){De(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_i),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+bi.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){De(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?hr("getToken() completed but was canceled"):(hr("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Xr(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{mr(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(fr){this.log_("Failed to get token: "+fr),s||(this.repoInfo_.nodeAdmin&&mr(fr),a())}}}interrupt(e){hr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dt(this.interruptReasons_)&&(this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>xr(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ti(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){hr("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){hr("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";nt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Jn.replace(/\./g,"-")]=1,Ze()?e["framework.cordova"]=1:tt()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ei.getInstance().currentlyOnline();return dt(this.interruptReasons_)&&e}}bi.nextPersistentConnectionId_=0,bi.nextConnectionId_=0;class wi{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new wi(e,t)}}class xi{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new wi(yr,e),r=new wi(yr,t);return 0!==this.compare(n,r)}minPost(){return wi.MIN}}let ki;class Ei extends xi{static get __EMPTY_NODE(){return ki}static set __EMPTY_NODE(e){ki=e}compare(e,t){return _r(e.name,t.name)}isDefinedOn(e){throw Le("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return wi.MIN}maxPost(){return new wi(vr,ki)}makePost(e,t){return De("string"===typeof e,"KeyIndex indexValue must always be a string."),new wi(e,ki)}toString(){return".key"}}const Ti=new Ei;class Ci{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Si{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Si.RED,this.left=null!=r?r:Ii.EMPTY_NODE,this.right=null!=i?i:Ii.EMPTY_NODE}copy(e,t,n,r,i){return new Si(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ii.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ii.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Si.RED=!0,Si.BLACK=!1;class Ii{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ii.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ii(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Si.BLACK,null,null))}remove(e){return new Ii(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Si.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ci(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ci(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ci(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ci(this.root_,null,this.comparator_,!0,e)}}function Ni(e,t){return _r(e.name,t.name)}function Ri(e,t){return _r(e,t)}let Pi;Ii.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Si(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ai=function(e){return"number"===typeof e?"number:"+Tr(e):"string:"+e},Oi=function(e){if(e.isLeafNode()){const t=e.val();De("string"===typeof t||"number"===typeof t||"object"===typeof t&&ut(t,".sv"),"Priority must be a string or number.")}else De(e===Pi||e.isEmpty(),"priority of unexpected type.");De(e===Pi||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Di,Li,Mi;class ji{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ji.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,De(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Oi(this.priorityNode_)}static set __childrenNodeConstructor(e){Di=e}static get __childrenNodeConstructor(){return Di}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ji(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ji.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ui(e)?this:".priority"===ri(e)?this.priorityNode_:ji.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ji.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ri(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(De(".priority"!==n||1===ii(e),".priority must be the last token in a path"),this.updateImmediateChild(n,ji.__childrenNodeConstructor.EMPTY_NODE.updateChild(si(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ai(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Tr(this.value_):this.value_,this.lazyHash_=or(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ji.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ji.__childrenNodeConstructor?-1:(De(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=ji.VALUE_TYPE_ORDER.indexOf(t),i=ji.VALUE_TYPE_ORDER.indexOf(n);return De(r>=0,"Unknown leaf type: "+t),De(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ji.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Fi=new class extends xi{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?_r(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return wi.MIN}maxPost(){return new wi(vr,new ji("[PRIORITY-POST]",Mi))}makePost(e,t){const n=Li(e);return new wi(t,new ji("[PRIORITY-POST]",n))}toString(){return".priority"}},Ui=Math.log(2);class zi{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ui,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Vi=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Si(a,o.node,Si.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Si(a,o.node,Si.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Si(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Si.BLACK):(a(r,Si.BLACK),a(r,Si.RED))}return s}(new zi(e.length));return new Ii(r||t,s)};let Bi;const qi={};class $i{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return De(qi&&Fi,"ChildrenNode.ts has not been loaded"),Bi=Bi||new $i({".priority":qi},{".priority":Fi}),Bi}get(e){const t=ht(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ii?t:null}hasIndex(e){return ut(this.indexSet_,e.toString())}addIndex(e,t){De(e!==Ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(wi.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Vi(n,e.getCompare()):qi;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new $i(c,l)}addToIndexes(e,t){const n=ft(this.indexes_,((n,r)=>{const i=ht(this.indexSet_,r);if(De(i,"Missing index implementation for "+r),n===qi){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(wi.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Vi(n,i.getCompare())}return qi}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new wi(e.name,r))),i.insert(e,e.node)}}));return new $i(n,this.indexSet_)}removeFromIndexes(e,t){const n=ft(this.indexes_,(n=>{if(n===qi)return n;{const r=t.get(e.name);return r?n.remove(new wi(e.name,r)):n}}));return new $i(n,this.indexSet_)}}let Hi;class Wi{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Oi(this.priorityNode_),this.children_.isEmpty()&&De(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hi||(Hi=new Wi(new Ii(Ri),null,$i.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hi}updatePriority(e){return this.children_.isEmpty()?this:new Wi(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Hi:t}}getChild(e){const t=ri(e);return null===t?this:this.getImmediateChild(t).getChild(si(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(De(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new wi(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Hi:this.priorityNode_;return new Wi(r,s,i)}}updateChild(e,t){const n=ri(e);if(null===n)return t;{De(".priority"!==ri(e)||1===ii(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(si(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Fi,((s,o)=>{t[s]=o.val(e),n++,i&&Wi.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ai(this.getPriority().val())+":"),this.forEachChild(Fi,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":or(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new wi(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new wi(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new wi(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,wi.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,wi.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ki?-1:0}withIndex(e){if(e===Ti||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Wi(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ti||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Fi),n=t.getIterator(Fi);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Ti?null:this.indexMap_.get(e.toString())}}Wi.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Ki=new class extends Wi{constructor(){super(new Ii(Ri),Wi.EMPTY_NODE,$i.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wi.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(wi,{MIN:{value:new wi(yr,Wi.EMPTY_NODE)},MAX:{value:new wi(vr,Ki)}}),Ei.__EMPTY_NODE=Wi.EMPTY_NODE,ji.__childrenNodeConstructor=Wi,Pi=Ki,function(e){Mi=e}(Ki);function Gi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Wi.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),De(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new ji(e,Gi(t))}if(e instanceof Array){let n=Wi.EMPTY_NODE;return Er(e,((t,r)=>{if(ut(e,t)&&"."!==t.substring(0,1)){const e=Gi(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Gi(t))}{const n=[];let r=!1;if(Er(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Gi(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new wi(e,i)))}})),0===n.length)return Wi.EMPTY_NODE;const i=Vi(n,Ni,(e=>e.name),Ri);if(r){const e=Vi(n,Fi.getCompare());return new Wi(i,Gi(t),new $i({".priority":e},{".priority":Fi}))}return new Wi(i,Gi(t),$i.Default)}}!function(e){Li=e}(Gi);class Qi extends xi{constructor(e){super(),this.indexPath_=e,De(!ui(e)&&".priority"!==ri(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?_r(e.name,t.name):i}makePost(e,t){const n=Gi(e),r=Wi.EMPTY_NODE.updateChild(this.indexPath_,n);return new wi(t,r)}maxPost(){const e=Wi.EMPTY_NODE.updateChild(this.indexPath_,Ki);return new wi(vr,e)}toString(){return ai(this.indexPath_,0).join("/")}}const Yi=new class extends xi{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?_r(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return wi.MIN}maxPost(){return wi.MAX}makePost(e,t){const n=Gi(e);return new wi(t,n)}toString(){return".value"}};function Xi(e){return{type:"value",snapshotNode:e}}function Ji(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Zi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function es(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class ts{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){De(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Zi(t,o)):De(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Ji(t,n)):s.trackChildChange(es(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Fi,((e,r)=>{t.hasChild(e)||n.trackChildChange(Zi(e,r))})),t.isLeafNode()||t.forEachChild(Fi,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(es(t,r,i))}else n.trackChildChange(Ji(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wi.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ns{constructor(e){this.indexedFilter_=new ts(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ns.getStartPost_(e),this.endPost_=ns.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new wi(t,n))||(n=Wi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Wi.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Wi.EMPTY_NODE);const i=this;return t.forEachChild(Fi,((e,t)=>{i.matches(new wi(e,t))||(r=r.updateImmediateChild(e,Wi.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class rs{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ns(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new wi(t,n))||(n=Wi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Wi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Wi.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Wi.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Wi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;De(o.numChildren()===this.limit_,"");const a=new wi(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(es(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Zi(t,e));const n=o.updateImmediateChild(t,Wi.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Ji(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Zi(l.name,l.node)),i.trackChildChange(Ji(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Wi.EMPTY_NODE)):e}}class is{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return De(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return De(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yr}hasEnd(){return this.endSet_}getIndexEndValue(){return De(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return De(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return De(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fi}copy(){const e=new is;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ss(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Fi?n="$priority":e.index_===Yi?n="$value":e.index_===Ti?n="$key":(De(e.index_ instanceof Qi,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=lt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=lt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+lt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=lt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+lt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function os(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Fi&&(t.i=e.index_.toString()),t}class as extends Jr{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=dr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(De(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=as.getListenId_(e,n),o={};this.listens_[s]=o;const a=ss(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),ht(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=as.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ss(e._queryParams),n=e._path.toString(),r=new Ye;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gt(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=at(a.responseText)}catch(hS){mr("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&mr("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class ls{constructor(){this.rootNode_=Wi.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cs(){return{value:null,children:new Map}}function us(e,t,n){if(ui(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ri(t);e.children.has(r)||e.children.set(r,cs());us(e.children.get(r),t=si(t),n)}}function hs(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{hs(r,new ti(t.toString()+"/"+e),n)}))}class ds{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Er(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class fs{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ds(e);const n=1e4+2e4*Math.random();Nr(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Er(e,((e,r)=>{r>0&&ut(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Nr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ps;function ms(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ps||(ps={}));class gs{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ps.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ui(this.path)){if(null!=this.affectedTree.value)return De(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ti(e));return new gs(ni(),t,this.revert)}}return De(ri(this.path)===e,"operationForChild called for unrelated child."),new gs(si(this.path),this.affectedTree,this.revert)}}class ys{constructor(e,t){this.source=e,this.path=t,this.type=ps.LISTEN_COMPLETE}operationForChild(e){return ui(this.path)?new ys(this.source,ni()):new ys(this.source,si(this.path))}}class vs{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ps.OVERWRITE}operationForChild(e){return ui(this.path)?new vs(this.source,ni(),this.snap.getImmediateChild(e)):new vs(this.source,si(this.path),this.snap)}}class _s{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ps.MERGE}operationForChild(e){if(ui(this.path)){const t=this.children.subtree(new ti(e));return t.isEmpty()?null:t.value?new vs(this.source,ni(),t.value):new _s(this.source,ni(),t)}return De(ri(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _s(this.source,si(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bs{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ui(e))return this.isFullyInitialized()&&!this.filtered_;const t=ri(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ws{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xs(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Le("Should only compare child_ events.");const r=new wi(t.childName,t.snapshotNode),i=new wi(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function ks(e,t){return{eventCache:e,serverCache:t}}function Es(e,t,n,r){return ks(new bs(t,n,r),e.serverCache)}function Ts(e,t,n,r){return ks(e.eventCache,new bs(t,n,r))}function Cs(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ss(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Is;class Ns{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Is||(Is=new Ii(br)),Is);this.value=e,this.children=t}static fromObject(e){let t=new Ns(null);return Er(e,((e,n)=>{t=t.set(new ti(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ni(),value:this.value};if(ui(e))return null;{const n=ri(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(si(e),t);if(null!=i){return{path:ci(new ti(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(ui(e))return this;{const t=ri(e),n=this.children.get(t);return null!==n?n.subtree(si(e)):new Ns(null)}}set(e,t){if(ui(e))return new Ns(t,this.children);{const n=ri(e),r=(this.children.get(n)||new Ns(null)).set(si(e),t),i=this.children.insert(n,r);return new Ns(this.value,i)}}remove(e){if(ui(e))return this.children.isEmpty()?new Ns(null):new Ns(null,this.children);{const t=ri(e),n=this.children.get(t);if(n){const r=n.remove(si(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Ns(null):new Ns(this.value,i)}return this}}get(e){if(ui(e))return this.value;{const t=ri(e),n=this.children.get(t);return n?n.get(si(e)):null}}setTree(e,t){if(ui(e))return t;{const n=ri(e),r=(this.children.get(n)||new Ns(null)).setTree(si(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Ns(this.value,i)}}fold(e){return this.fold_(ni(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(ci(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,ni(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(ui(e))return null;{const r=ri(e),i=this.children.get(r);return i?i.findOnPath_(si(e),ci(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ni(),t)}foreachOnPath_(e,t,n){if(ui(e))return this;{this.value&&n(t,this.value);const r=ri(e),i=this.children.get(r);return i?i.foreachOnPath_(si(e),ci(t,r),n):new Ns(null)}}foreach(e){this.foreach_(ni(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(ci(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Rs{constructor(e){this.writeTree_=e}static empty(){return new Rs(new Ns(null))}}function Ps(e,t,n){if(ui(t))return new Rs(new Ns(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=hi(i,t);return s=s.updateChild(o,n),new Rs(e.writeTree_.set(i,s))}{const r=new Ns(n),i=e.writeTree_.setTree(t,r);return new Rs(i)}}}function As(e,t,n){let r=e;return Er(n,((e,n)=>{r=Ps(r,ci(t,e),n)})),r}function Os(e,t){if(ui(t))return Rs.empty();{const n=e.writeTree_.setTree(t,new Ns(null));return new Rs(n)}}function Ds(e,t){return null!=Ls(e,t)}function Ls(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(hi(n.path,t)):null}function Ms(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Fi,((e,n)=>{t.push(new wi(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new wi(e,n.value))})),t}function js(e,t){if(ui(t))return e;{const n=Ls(e,t);return new Rs(null!=n?new Ns(n):e.writeTree_.subtree(t))}}function Fs(e){return e.writeTree_.isEmpty()}function Us(e,t){return zs(ni(),e.writeTree_,t)}function zs(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(De(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=zs(ci(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(ci(e,".priority"),r)),n}}function Vs(e,t){return eo(t,e)}function Bs(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));De(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&qs(t,r.path)?i=!1:pi(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=Hs(e.allWrites,$s,ni()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Os(e.visibleWrites,r.path);else{Er(r.children,(t=>{e.visibleWrites=Os(e.visibleWrites,ci(r.path,t))}))}return!0}return!1}function qs(e,t){if(e.snap)return pi(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&pi(ci(e.path,n),t))return!0;return!1}function $s(e){return e.visible}function Hs(e,t,n){let r=Rs.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)pi(n,e)?(t=hi(n,e),r=Ps(r,t,s.snap)):pi(e,n)&&(t=hi(e,n),r=Ps(r,ni(),s.snap.getChild(t)));else{if(!s.children)throw Le("WriteRecord should have .snap or .children");if(pi(n,e))t=hi(n,e),r=As(r,t,s.children);else if(pi(e,n))if(t=hi(e,n),ui(t))r=As(r,ni(),s.children);else{const e=ht(s.children,ri(t));if(e){const n=e.getChild(si(t));r=Ps(r,ni(),n)}}}}}return r}function Ws(e,t,n,r,i){if(r||i){const s=js(e.visibleWrites,t);if(!i&&Fs(s))return n;if(i||null!=n||Ds(s,ni())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(pi(e.path,t)||pi(t,e.path))};return Us(Hs(e.allWrites,s,t),n||Wi.EMPTY_NODE)}return null}{const r=Ls(e.visibleWrites,t);if(null!=r)return r;{const r=js(e.visibleWrites,t);if(Fs(r))return n;if(null!=n||Ds(r,ni())){return Us(r,n||Wi.EMPTY_NODE)}return null}}}function Ks(e,t,n,r){return Ws(e.writeTree,e.treePath,t,n,r)}function Gs(e,t){return function(e,t,n){let r=Wi.EMPTY_NODE;const i=Ls(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Fi,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=js(e.visibleWrites,t);return n.forEachChild(Fi,((e,t)=>{const n=Us(js(i,new ti(e)),t);r=r.updateImmediateChild(e,n)})),Ms(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Ms(js(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Qs(e,t,n,r){return function(e,t,n,r,i){De(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ci(t,n);if(Ds(e.visibleWrites,s))return null;{const t=js(e.visibleWrites,s);return Fs(t)?i.getChild(n):Us(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Ys(e,t){return function(e,t){return Ls(e.visibleWrites,t)}(e.writeTree,ci(e.treePath,t))}function Xs(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=js(e.visibleWrites,t),c=Ls(l,ni());if(null!=c)a=c;else{if(null==n)return[];a=Us(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Js(e,t,n){return function(e,t,n,r){const i=ci(t,n),s=Ls(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Us(js(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Zs(e,t){return eo(ci(e.treePath,t),e.writeTree)}function eo(e,t){return{treePath:e,writeTree:t}}class to{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;De("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),De(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,es(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Zi(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ji(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Le("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,es(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const no=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ro{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new bs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Js(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ss(this.viewCache_),i=Xs(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function io(e,t,n,r,i){const s=new to;let o,a;if(n.type===ps.OVERWRITE){const l=n;l.source.fromUser?o=ao(e,t,l.path,l.snap,r,i,s):(De(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!ui(l.path),o=oo(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===ps.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=ci(n,r);lo(t,ri(c))&&(a=ao(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=ci(n,r);lo(t,ri(c))||(a=ao(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(De(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=uo(e,t,l.path,l.children,r,i,a,s))}else if(n.type===ps.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Ys(r,n))return t;{const a=new ro(r,t,i),l=t.eventCache.getNode();let c;if(ui(n)||".priority"===ri(n)){let n;if(t.serverCache.isFullyInitialized())n=Ks(r,Ss(t));else{const e=t.serverCache.getNode();De(e instanceof Wi,"serverChildren would be complete if leaf node"),n=Gs(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=ri(n);let u=Js(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,si(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Wi.EMPTY_NODE,si(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ks(r,Ss(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Ys(r,ni()),Es(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Ys(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(ui(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return oo(e,t,n,l.getNode().getChild(n),i,s,a,o);if(ui(n)){let r=new Ns(null);return l.getNode().forEachChild(Ti,((e,t)=>{r=r.set(new ti(e),t)})),uo(e,t,n,r,i,s,a,o)}return t}{let c=new Ns(null);return r.foreach(((e,t)=>{const r=ci(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),uo(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==ps.LISTEN_COMPLETE)throw Le("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Ts(t,s.getNode(),s.isFullyInitialized()||ui(n),s.isFiltered());return so(e,o,n,r,no,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Cs(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Xi(Cs(t)))}}(t,o,l),{viewCache:o,changes:l}}function so(e,t,n,r,i,s){const o=t.eventCache;if(null!=Ys(r,n))return t;{let a,l;if(ui(n))if(De(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ss(t),i=Gs(r,n instanceof Wi?n:Wi.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Ks(r,Ss(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=ri(n);if(".priority"===c){De(1===ii(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Qs(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=si(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Qs(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=Js(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Es(t,a,o.isFullyInitialized()||ui(n),e.filter.filtersNodes())}}function oo(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(ui(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ri(n);if(!l.isCompleteForPath(n)&&ii(n)>1)return t;const i=si(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,no,null)}const h=Ts(t,c,l.isFullyInitialized()||ui(n),u.filtersNodes());return so(e,h,n,i,new ro(i,h,s),a)}function ao(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new ro(i,t,s);if(ui(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Es(t,c,!0,e.filter.filtersNodes());else{const i=ri(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Es(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=si(n),c=a.getNode().getImmediateChild(i);let h;if(ui(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===oi(s)&&e.getChild(li(s)).isEmpty()?e:e.updateChild(s,r):Wi.EMPTY_NODE}if(c.equals(h))l=t;else{l=Es(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function lo(e,t){return e.eventCache.isCompleteForChild(t)}function co(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function uo(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=ui(n)?r:new Ns(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=co(0,t.serverCache.getNode().getImmediateChild(n),r);c=oo(e,c,new ti(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=co(0,t.serverCache.getNode().getImmediateChild(n),r);c=oo(e,c,new ti(n),l,i,s,o,a)}})),c}class ho{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new ts(n.getIndex()),i=(s=n).loadsAllData()?new ts(s.getIndex()):s.hasLimit()?new rs(s):new ns(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Wi.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Wi.EMPTY_NODE,a.getNode(),null),u=new bs(l,o.isFullyInitialized(),r.filtersNodes()),h=new bs(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=ks(h,u),this.eventGenerator_=new ws(this.query_)}get query(){return this.query_}}function fo(e,t){const n=Ss(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ui(t)&&!n.getImmediateChild(ri(t)).isEmpty())?n.getChild(t):null}function po(e){return 0===e.eventRegistrations_.length}function mo(e,t,n){const r=[];if(n){De(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function go(e,t,n,r){t.type===ps.MERGE&&null!==t.source.queryId&&(De(Ss(e.viewCache_),"We should always have a full cache before handling merges"),De(Cs(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=io(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,De(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),De(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),De(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,yo(e,s.changes,s.viewCache.eventCache.getNode(),null)}function yo(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),xs(e,i,"child_removed",t,r,n),xs(e,i,"child_added",t,r,n),xs(e,i,"child_moved",s,r,n),xs(e,i,"child_changed",t,r,n),xs(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let vo,_o;class bo{constructor(){this.views=new Map}}function wo(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return De(null!=s,"SyncTree gave us an op for an invalid query."),go(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(go(s,t,n,r));return i}}function xo(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Ks(n,i?r:null),s=!1;e?s=!0:r instanceof Wi?(e=Gs(n,r),s=!1):(e=Wi.EMPTY_NODE,s=!1);const o=ks(new bs(e,s,!1),new bs(r,i,!1));return new ho(t,o)}return o}function ko(e,t,n,r,i,s){const o=xo(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Fi,((e,t)=>{r.push(Ji(e,t))}));return n.isFullyInitialized()&&r.push(Xi(n.getNode())),yo(e,r,n.getNode(),t)}(o,n)}function Eo(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=No(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(mo(c,n,r)),po(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(mo(t,n,r)),po(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!No(e)&&s.push(new(De(vo,"Reference.ts has not been loaded"),vo)(t._repo,t._path)),{removed:s,events:o}}function To(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Co(e,t){let n=null;for(const r of e.views.values())n=n||fo(r,t);return n}function So(e,t){if(t._queryParams.loadsAllData())return Ro(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Io(e,t){return null!=So(e,t)}function No(e){return null!=Ro(e)}function Ro(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Po=1;class Ao{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ns(null),this.pendingWriteTree_={visibleWrites:Rs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Oo(e,t,n,r,i){return function(e,t,n,r,i){De(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ps(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Bo(e,new vs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Do(e,t,n,r){!function(e,t,n,r){De(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=As(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Ns.fromObject(n);return Bo(e,new _s({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Bs(e.pendingWriteTree_,t)){let t=new Ns(null);return null!=r.snap?t=t.set(ni(),!0):Er(r.children,(e=>{t=t.set(new ti(e),!0)})),Bo(e,new gs(r.path,t,n))}return[]}function Mo(e,t,n){return Bo(e,new vs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function jo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Io(o,t))){const l=Eo(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>No(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&No(t)){return[Ro(t)]}{let e=[];return t&&(e=To(t)),Er(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Ho(e,r);e.listenProvider_.startListening(Xo(i),Wo(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Xo(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(Ko(t));e.listenProvider_.stopListening(Xo(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Ko(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Fo(e,t,n,r){const i=Go(e,r);if(null!=i){const r=Qo(i),s=r.path,o=r.queryId,a=hi(s,t);return Yo(e,s,new vs(ms(o),a,n))}return[]}function Uo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=hi(e,i);s=s||Co(t,n),o=o||No(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||No(l),s=s||Co(l,ni())):(l=new bo,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=Wi.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Co(t,ni());n&&(s=s.updateImmediateChild(e,n))}))}const c=Io(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Ko(t);De(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Po++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=ko(l,t,n,Vs(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=So(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Wo(e,t),s=Ho(e,n),o=e.listenProvider_.startListening(Xo(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)De(!No(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!ui(e)&&t&&No(t))return[Ro(t).query];{let e=[];return t&&(e=e.concat(To(t).map((e=>e.query)))),Er(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Xo(r),Wo(e,r))}}return o}(e,t,n))}return u}function zo(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Co(n,hi(e,t));if(r)return r}));return Ws(r,t,i,n,!0)}function Vo(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=hi(e,n);r=r||Co(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Co(i,ni()):(i=new bo,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new bs(r,!0,!1):null;return function(e){return Cs(e.viewCache_)}(xo(i,t,Vs(e.pendingWriteTree_,t._path),s?o.getNode():Wi.EMPTY_NODE,s))}function Bo(e,t){return qo(t,e.syncPointTree_,null,Vs(e.pendingWriteTree_,ni()))}function qo(e,t,n,r){if(ui(e.path))return $o(e,t,n,r);{const i=t.get(ni());null==n&&null!=i&&(n=Co(i,ni()));let s=[];const o=ri(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Zs(r,o);s=s.concat(qo(a,l,e,t))}return i&&(s=s.concat(wo(i,e,r,n))),s}}function $o(e,t,n,r){const i=t.get(ni());null==n&&null!=i&&(n=Co(i,ni()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Zs(r,t),l=e.operationForChild(t);l&&(s=s.concat($o(l,i,o,a)))})),i&&(s=s.concat(wo(i,e,r,n))),s}function Ho(e,t){const n=t.query,r=Wo(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Wi.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Go(e,n);if(r){const n=Qo(r),i=n.path,s=n.queryId,o=hi(i,t);return Yo(e,i,new ys(ms(s),o))}return[]}(e,n._path,r):function(e,t){return Bo(e,new ys({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return jo(e,n,null,r)}}}}function Wo(e,t){const n=Ko(t);return e.queryToTagMap.get(n)}function Ko(e){return e._path.toString()+"$"+e._queryIdentifier}function Go(e,t){return e.tagToQueryMap.get(t)}function Qo(e){const t=e.indexOf("$");return De(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ti(e.substr(0,t))}}function Yo(e,t,n){const r=e.syncPointTree_.get(t);De(r,"Missing sync point for query tag that we're tracking");return wo(r,n,Vs(e.pendingWriteTree_,t),null)}function Xo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(De(_o,"Reference.ts has not been loaded"),_o)(e._repo,e._path):e}class Jo{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Jo(t)}node(){return this.node_}}class Zo{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ci(this.path_,e);return new Zo(this.syncTree_,t)}node(){return zo(this.syncTree_,this.path_)}}const ea=function(e,t,n){return e&&"object"===typeof e?(De(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ta(e[".sv"],t,n):"object"===typeof e[".sv"]?na(e[".sv"],t):void De(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ta=function(e,t,n){if("timestamp"===e)return n.timestamp;De(!1,"Unexpected server value: "+e)},na=function(e,t,n){e.hasOwnProperty("increment")||De(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&De(!1,"Unexpected increment value: "+r);const i=t.node();if(De(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},ra=function(e,t,n,r){return sa(t,new Zo(n,e),r)},ia=function(e,t,n){return sa(e,new Jo(t),n)};function sa(e,t,n){const r=e.getPriority().val(),i=ea(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=ea(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new ji(s,Gi(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new ji(i))),r.forEachChild(Fi,((e,r)=>{const i=sa(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class oa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function aa(e,t){let n=t instanceof ti?t:new ti(t),r=e,i=ri(n);for(;null!==i;){const e=ht(r.node.children,i)||{children:{},childCount:0};r=new oa(i,r,e),n=si(n),i=ri(n)}return r}function la(e){return e.node.value}function ca(e,t){e.node.value=t,pa(e)}function ua(e){return e.node.childCount>0}function ha(e,t){Er(e.node.children,((n,r)=>{t(new oa(n,e,r))}))}function da(e,t,n,r){n&&!r&&t(e),ha(e,(e=>{da(e,t,!0,r)})),n&&r&&t(e)}function fa(e){return new ti(null===e.parent?e.name:fa(e.parent)+"/"+e.name)}function pa(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===la(e)&&!ua(e)}(n),i=ut(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,pa(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,pa(e))}(e.parent,e.name,e)}const ma=/[\[\].#$\/\u0000-\u001F\u007F]/,ga=/[\[\].#$\u0000-\u001F\u007F]/,ya=10485760,va=function(e){return"string"===typeof e&&0!==e.length&&!ma.test(e)},_a=function(e){return"string"===typeof e&&0!==e.length&&!ga.test(e)},ba=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!gr(e)||e&&"object"===typeof e&&ut(e,".sv")},wa=function(e,t,n,r){r&&void 0===t||xa(xt(e,"value"),t,n)},xa=function(e,t,n){const r=n instanceof ti?new mi(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+yi(r));if("function"===typeof t)throw new Error(e+"contains a function "+yi(r)+" with contents = "+t.toString());if(gr(t))throw new Error(e+"contains "+t.toString()+" "+yi(r));if("string"===typeof t&&t.length>ya/3&&kt(t)>ya)throw new Error(e+"contains a string greater than "+ya+" utf8 bytes "+yi(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Er(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!va(t)))throw new Error(e+" contains an invalid key ("+t+") "+yi(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=kt(t),gi(e)}(r,t),xa(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=kt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+yi(r)+" in addition to actual children.")}},ka=function(e,t,n,r){if(r&&void 0===t)return;const i=xt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Er(t,((e,t)=>{const r=new ti(e);if(xa(i,t,ci(n,r)),".priority"===oi(r)&&!ba(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=ai(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!va(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(di);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&pi(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Ea=function(e,t,n,r){if((!r||void 0!==n)&&!_a(n))throw new Error(xt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ta=function(e,t){if(".info"===ri(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ca=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!va(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),_a(e)}(n))throw new Error(xt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Sa{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ia(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||fi(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Na(e,t,n){Ia(e,n),Pa(e,(e=>fi(e,t)))}function Ra(e,t,n){Ia(e,n),Pa(e,(e=>pi(e,t)||pi(t,e)))}function Pa(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Aa(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Aa(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();lr&&hr("event: "+n.toString()),Ir(r)}}}const Oa="repo_interrupt";class Da{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cs(),this.transactionQueueTree_=new oa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function La(e,t,n){if(e.stats_=qr(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new as(e.repoInfo_,((t,n,r,i)=>{Fa(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Ua(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{lt(n)}catch(hS){throw new Error("Invalid authOverride provided: "+hS)}}e.persistentConnection_=new bi(e.repoInfo_,t,((t,n,r,i)=>{Fa(e,t,n,r,i)}),(t=>{Ua(e,t)}),(t=>{!function(e,t){Er(t,((t,n)=>{za(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Br[n]||(Br[n]=t()),Br[n]}(e.repoInfo_,(()=>new fs(e.stats_,e.server_))),e.infoData_=new ls,e.infoSyncTree_=new Ao({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Mo(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),za(e,"connected",!1),e.serverSyncTree_=new Ao({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);Ra(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Ma(e){const t=e.infoData_.getNode(new ti(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ja(e){return(t=(t={timestamp:Ma(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Fa(e,t,n,r,i){e.dataUpdateCount++;const s=new ti(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=ft(n,(e=>Gi(e)));o=function(e,t,n,r){const i=Go(e,r);if(i){const r=Qo(i),s=r.path,o=r.queryId,a=hi(s,t),l=Ns.fromObject(n);return Yo(e,s,new _s(ms(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Gi(n);o=Fo(e.serverSyncTree_,s,t,i)}else if(r){const t=ft(n,(e=>Gi(e)));o=function(e,t,n){const r=Ns.fromObject(n);return Bo(e,new _s({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Gi(n);o=Mo(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=Qa(e,s)),Ra(e.eventQueue_,a,o)}function Ua(e,t){za(e,"connected",t),!1===t&&function(e){Ha(e,"onDisconnectEvents");const t=ja(e),n=cs();hs(e.onDisconnect_,ni(),((r,i)=>{const s=ra(r,i,e.serverSyncTree_,t);us(n,r,s)}));let r=[];hs(n,ni(),((t,n)=>{r=r.concat(Mo(e.serverSyncTree_,t,n));const i=el(e,t);Qa(e,i)})),e.onDisconnect_=cs(),Ra(e.eventQueue_,ni(),r)}(e)}function za(e,t,n){const r=new ti("/.info/"+t),i=Gi(n);e.infoData_.updateSnapshot(r,i);const s=Mo(e.infoSyncTree_,r,i);Ra(e.eventQueue_,r,s)}function Va(e){return e.nextWriteId_++}function Ba(e,t,n,r,i){Ha(e,"set",{path:t.toString(),value:n,priority:r});const s=ja(e),o=Gi(n,r),a=zo(e.serverSyncTree_,t),l=ia(o,a,s),c=Va(e),u=Oo(e.serverSyncTree_,t,l,c,!0);Ia(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||mr("set at "+t+" failed: "+n);const o=Lo(e.serverSyncTree_,c,!s);Ra(e.eventQueue_,t,o),Wa(e,i,n,r)}));const h=el(e,t);Qa(e,h),Ra(e.eventQueue_,h,[])}function qa(e,t,n){let r;r=".info"===ri(t._path)?jo(e.infoSyncTree_,t,n):jo(e.serverSyncTree_,t,n),Na(e.eventQueue_,t._path,r)}function $a(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Oa)}function Ha(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];hr(t,...r)}function Wa(e,t,n,r){t&&Ir((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function Ka(e,t,n){return zo(e.serverSyncTree_,t,n)||Wi.EMPTY_NODE}function Ga(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Za(e,t),la(t)){const n=Xa(e,t);De(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=Ka(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];De(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=hi(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{Ha(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Lo(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Za(e,aa(e.transactionQueueTree_,t)),Ga(e,e.transactionQueueTree_),Ra(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Ir(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{mr("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Qa(e,t)}}),o)}(e,fa(t),n)}else ua(t)&&ha(t,(t=>{Ga(e,t)}))}function Qa(e,t){const n=Ya(e,t),r=fa(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=hi(n,s.path);let u,h=!1;if(De(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(Lo(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)h=!0,u="maxretry",i=i.concat(Lo(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Ka(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){xa("transaction failed: Data returned ",r,s.path);let t=Gi(r);"object"===typeof r&&null!=r&&ut(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=ja(e),c=ia(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Va(e),o.splice(o.indexOf(a),1),i=i.concat(Oo(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Lo(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(Lo(e.serverSyncTree_,s.currentWriteId,!0))}Ra(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;Za(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Ir(r[l]);Ga(e,e.transactionQueueTree_)}(e,Xa(e,n),r),r}function Ya(e,t){let n,r=e.transactionQueueTree_;for(n=ri(t);null!==n&&void 0===la(r);)r=aa(r,n),n=ri(t=si(t));return r}function Xa(e,t){const n=[];return Ja(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Ja(e,t,n){const r=la(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ha(t,(t=>{Ja(e,t,n)}))}function Za(e,t){const n=la(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ca(t,n.length>0?n:void 0)}ha(t,(t=>{Za(e,t)}))}function el(e,t){const n=fa(Ya(e,t)),r=aa(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{tl(e,t)})),tl(e,r),da(r,(t=>{tl(e,t)})),n}function tl(e,t){const n=la(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(De(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(De(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Lo(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ca(t,void 0):n.length=s+1,Ra(e.eventQueue_,fa(t),i);for(let e=0;e<r.length;e++)Ir(r[e])}}const nl=function(e,t){const n=rl(e),r=n.namespace;"firebase.com"===n.domain&&pr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||pr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Fr(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ti(n.pathString)}},rl=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(hS){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mr(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},il="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class sl{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+lt(this.snapshot.exportVal())}}class ol{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class al{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return De(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ll{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return ui(this._path)?null:oi(this._path)}get ref(){return new cl(this._repo,this._path)}get _queryIdentifier(){const e=os(this._queryParams),t=xr(e);return"{}"===t?"default":t}get _queryObject(){return os(this._queryParams)}isEqual(e){if(!((e=Et(e))instanceof ll))return!1;const t=this._repo===e._repo,n=fi(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class cl extends ll{constructor(e,t){super(e,t,new is,!1)}get parent(){const e=li(this._path);return null===e?null:new cl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ul{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ti(e),n=dl(this.ref,e);return new ul(this._node.getChild(t),n,Fi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new ul(n,dl(this.ref,t),Fi))))}hasChild(e){const t=new ti(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function hl(e,t){return(e=Et(e))._checkNotDeleted("ref"),void 0!==t?dl(e._root,t):e._root}function dl(e,t){var n,r,i,s;return null===ri((e=Et(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ea(n,r,i,s)):Ea("child","path",t,!1),new cl(e._repo,ci(e._path,t))}function fl(e,t){e=Et(e),Ta("set",e._path),wa("set",t,e._path,!1);const n=new Ye;return Ba(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function pl(e,t){ka("update",t,e._path,!1);const n=new Ye;return function(e,t,n,r){Ha(e,"update",{path:t.toString(),value:n});let i=!0;const s=ja(e),o={};if(Er(n,((n,r)=>{i=!1,o[n]=ra(ci(t,n),Gi(r),e.serverSyncTree_,s)})),i)hr("update() called with empty data.  Don't do anything."),Wa(0,r,"ok",void 0);else{const i=Va(e),s=Do(e.serverSyncTree_,t,o,i);Ia(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||mr("update at "+t+" failed: "+n);const a=Lo(e.serverSyncTree_,i,!o),l=a.length>0?Qa(e,t):t;Ra(e.eventQueue_,l,a),Wa(0,r,n,s)})),Er(n,(n=>{const r=el(e,ci(t,n));Qa(e,r)})),Ra(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function ml(e){e=Et(e);const t=new al((()=>{})),n=new gl(t);return function(e,t,n){const r=Vo(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Gi(r).withIndex(t._queryParams.getIndex());let s;if(Uo(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Mo(e.serverSyncTree_,t._path,i);else{const n=Wo(e.serverSyncTree_,t);s=Fo(e.serverSyncTree_,t._path,i,n)}return Ra(e.eventQueue_,t._path,s),jo(e.serverSyncTree_,t,n,null,!0),i}),(n=>(Ha(e,"get for query "+lt(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new ul(t,new cl(e._repo,e._path),e._queryParams.getIndex())))}class gl{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new sl("value",this,new ul(e.snapshotNode,new cl(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ol(this,e,t):null}matches(e){return e instanceof gl&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yl{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ol(this,e,t):null}createEvent(e,t){De(null!=e.childName,"Child events should have a childName.");const n=dl(new cl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new sl(e.type,this,new ul(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof yl&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function vl(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{qa(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new al(n,s||void 0),a="value"===t?new gl(o):new yl(t,o);return function(e,t,n){let r;r=".info"===ri(t._path)?Uo(e.infoSyncTree_,t,n):Uo(e.serverSyncTree_,t,n),Na(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>qa(e._repo,e,a)}function _l(e,t,n,r){return vl(e,"value",t,n,r)}!function(e){De(!vo,"__referenceConstructor has already been defined"),vo=e}(cl),function(e){De(!_o,"__referenceConstructor has already been defined"),_o=e}(cl);const bl={};let wl=!1;function xl(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||pr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hr("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=nl(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=nl(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Ar(Ar.OWNER):new Pr(e.name,e.options,t);Ca("Invalid Firebase Database URL",l),ui(l.path)||pr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=bl[t.name];i||(i={},bl[t.name]=i);let s=i[e.toURLString()];s&&pr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Da(e,wl,n,r),i[e.toURLString()]=s,s}(c,e,u,new Rr(e.name,n));return new kl(h,e)}class kl{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(La(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cl(this._repo,ni())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=bl[t];n&&n[e.key]===e||pr(`Database ${t}(${e.repoInfo_}) has already been deleted.`),$a(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pr("Cannot call "+e+" on a deleted database.")}}bi.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},bi.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Jn=e}(Mn),An(new Tt("database",((e,t)=>{let{instanceIdentifier:n}=t;return xl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Un(Yn,Xn,e),Un(Yn,Xn,"esm2017")}();function El(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Tl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cl=Tl,Sl=new st("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Il=new Lt("@firebase/auth");function Nl(e){if(Il.logLevel<=Rt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Il.error(`Auth (${Mn}): ${e}`,...n)}}function Rl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Dl(e,...n)}function Pl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dl(e,...n)}function Al(e,t,n){const r=Object.assign(Object.assign({},Cl()),{[t]:n});return new st("auth","Firebase",r).create(t,{appName:e.name})}function Ol(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Rl(e,"argument-error"),Al(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Sl.create(e,...n)}function Ll(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Dl(t,...r)}}function Ml(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nl(t),new Error(t)}function jl(e,t){e||Ml(t)}function Fl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ul(){return"http:"===zl()||"https:"===zl()}function zl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Vl(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ul()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Bl{constructor(e,t){this.shortDelay=e,this.longDelay=t,jl(t>e,"Short delay should be less than long delay!"),this.isMobile=Ze()||tt()}get(){return Vl()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ql(e,t){jl(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class $l{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ml("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ml("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ml("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wl=new Bl(3e4,6e4);function Kl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gl(e,t,n,r){return Ql(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=gt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),$l.fetch()(Xl(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Ql(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hl),t);try{const t=new Jl(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Zl(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Zl(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Zl(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Zl(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Al(e,a,o);Rl(e,a)}}catch(hS){if(hS instanceof it)throw hS;Rl(e,"network-request-failed",{message:String(hS)})}}async function Yl(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Gl(e,t,n,r,i);return"mfaPendingCredential"in s&&Rl(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Xl(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?ql(e.config,i):`${e.config.apiScheme}://${i}`}class Jl{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Pl(this.auth,"network-request-failed"))),Wl.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zl(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pl(e,t,r);return i.customData._tokenResponse=n,i}function ec(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(hS){}}function tc(e){return 1e3*Number(e)}function nc(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Nl("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ve(n);return e?JSON.parse(e):(Nl("Failed to decode base64 JWT payload"),null)}catch(hS){return Nl("Caught error parsing JWT payload as JSON",null===hS||void 0===hS?void 0:hS.toString()),null}}async function rc(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(hS){throw hS instanceof it&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(hS)&&e.auth.currentUser===e&&await e.auth.signOut(),hS}}class ic{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(hS){return void("auth/network-request-failed"===(null===hS||void 0===hS?void 0:hS.code)&&this.schedule(!0))}this.schedule()}}class sc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function oc(e){var t;const n=e.auth,r=await e.getIdToken(),i=await rc(e,async function(e,t){return Gl(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Ll(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=El(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sc(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class ac{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ll(e.idToken,"internal-error"),Ll("undefined"!==typeof e.idToken,"internal-error"),Ll("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=nc(e);return Ll(t,"internal-error"),Ll("undefined"!==typeof t.exp,"internal-error"),Ll("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ll(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ql(e,{},(async()=>{const n=gt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Xl(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",$l.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ac;return n&&(Ll("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ll("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ll("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ac,this.toJSON())}_performRefresh(){return Ml("not implemented")}}function lc(e,t){Ll("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class cc{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=El(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ic(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await rc(this,this.stsTokenManager.getToken(this.auth,e));return Ll(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Et(e),r=await n.getIdToken(t),i=nc(r);Ll(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ec(tc(i.auth_time)),issuedAtTime:ec(tc(i.iat)),expirationTime:ec(tc(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Et(e);await oc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ll(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ll(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await oc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await rc(this,async function(e,t){return Gl(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=t;Ll(v&&x,e,"internal-error");const k=ac.fromJSON(this.name,x);Ll("string"===typeof v,e,"internal-error"),lc(u,e.name),lc(h,e.name),Ll("boolean"===typeof _,e,"internal-error"),Ll("boolean"===typeof b,e,"internal-error"),lc(d,e.name),lc(f,e.name),lc(p,e.name),lc(m,e.name),lc(g,e.name),lc(y,e.name);const E=new cc({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ac;r.updateFromServerResponse(t);const i=new cc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await oc(i),i}}const uc=new Map;function hc(e){jl(e instanceof Function,"Expected a class definition");let t=uc.get(e);return t?(jl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,uc.set(e,t),t)}class dc{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dc.type="NONE";const fc=dc;function pc(e,t,n){return`firebase:${e}:${t}:${n}`}class mc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=pc(this.userKey,r.apiKey,i),this.fullPersistenceKey=pc("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?cc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new mc(hc(fc),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||hc(fc);const s=pc(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=cc._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new mc(i,e,n)):new mc(i,e,n)}}function gc(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xc(t))return"Blackberry";if(kc(t))return"Webos";if(vc(t))return"Safari";if((t.includes("chrome/")||_c(t))&&!t.includes("edge/"))return"Chrome";if(wc(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function yc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/firefox\//i.test(e)}function vc(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/crios\//i.test(e)}function bc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/iemobile/i.test(e)}function wc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/android/i.test(e)}function xc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/blackberry/i.test(e)}function kc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/webos/i.test(e)}function Ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Tc(){return function(){const e=Je();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Cc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return Ec(e)||wc(e)||kc(e)||xc(e)||/windows phone/i.test(e)||bc(e)}function Sc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=gc(Je());break;case"Worker":t=`${gc(Je())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mn}/${r}`}async function Ic(e,t){return Gl(e,"GET","/v2/recaptchaConfig",Kl(e,t))}function Nc(e){return void 0!==e&&void 0!==e.enterprise}class Rc{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Pc(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Pl("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ac(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Oc{constructor(e){this.type="recaptcha-enterprise",this.auth=jc(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Nc(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ic(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Rc(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Nc(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Pc("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Oc(e);let s;try{s=await i.verify(n)}catch(fr){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Lc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(hS){r(hS)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(hS){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===hS||void 0===hS?void 0:hS.message})}}}class Mc{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fc(this),this.idTokenSubscription=new Fc(this),this.beforeStateQueue=new Lc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sl,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hc(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await mc.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(hS){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(hS){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(hS)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ll(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(hS){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oc(e)}catch(hS){if("auth/network-request-failed"!==(null===hS||void 0===hS?void 0:hS.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Et(e):null;return t&&Ll(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ll(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(hc(e))}))}async initializeRecaptchaConfig(){const e=await Ic(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Rc(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Oc(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new st("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hc(e)||this._popupRedirectResolver;Ll(t,this,"argument-error"),this.redirectPersistenceManager=await mc.create(this,[hc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Ll(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ll(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Il.logLevel<=Rt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Il.warn(`Auth (${Mn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function jc(e){return Et(e)}class Fc{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new bt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Ll(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Uc(e,t,n){const r=jc(e);Ll(r._canInitEmulator,r,"emulator-config-failed"),Ll(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=zc(t),{host:o,port:a}=function(e){const t=zc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Vc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Vc(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function zc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Vc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Bc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ml("not implemented")}_getIdTokenResponse(e){return Ml("not implemented")}_linkToIdToken(e,t){return Ml("not implemented")}_getReauthenticationResolver(e){return Ml("not implemented")}}async function qc(e,t){return Gl(e,"POST","/v1/accounts:update",t)}async function $c(e,t){return Yl(e,"POST","/v1/accounts:signInWithPassword",Kl(e,t))}class Hc extends Bc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Hc(e,t,"password")}static _fromEmailAndCode(e,t){return new Hc(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Dc(e,n,"signInWithPassword");return $c(e,t)}return $c(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Dc(e,n,"signInWithPassword");return $c(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return Yl(e,"POST","/v1/accounts:signInWithEmailLink",Kl(e,t))}(e,{email:this._email,oobCode:this._password});default:Rl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return qc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Yl(e,"POST","/v1/accounts:signInWithEmailLink",Kl(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Rl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Wc(e,t){return Yl(e,"POST","/v1/accounts:signInWithIdp",Kl(e,t))}class Kc extends Bc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Kc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=El(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Kc(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Wc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Wc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gt(t)}return e}}const Gc={USER_NOT_FOUND:"user-not-found"};class Qc extends Bc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Qc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Qc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Yl(e,"POST","/v1/accounts:signInWithPhoneNumber",Kl(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Yl(e,"POST","/v1/accounts:signInWithPhoneNumber",Kl(e,t));if(n.temporaryProof)throw Zl(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Yl(e,"POST","/v1/accounts:signInWithPhoneNumber",Kl(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Gc)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Qc({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Yc{constructor(e){var t,n,r,i,s,o;const a=yt(vt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ll(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=yt(vt(e)).link,n=t?yt(vt(t)).deep_link_id:null,r=yt(vt(e)).deep_link_id;return(r?yt(vt(r)).link:null)||r||n||t||e}(e);try{return new Yc(t)}catch(n){return null}}}class Xc{constructor(){this.providerId=Xc.PROVIDER_ID}static credential(e,t){return Hc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Yc.parseLink(t);return Ll(n,"argument-error"),Hc._fromEmailAndCode(e,n.code,n.tenantId)}}Xc.PROVIDER_ID="password",Xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Jc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Zc extends Jc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class eu extends Zc{constructor(){super("facebook.com")}static credential(e){return Kc._fromParams({providerId:eu.PROVIDER_ID,signInMethod:eu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eu.credentialFromTaggedObject(e)}static credentialFromError(e){return eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return eu.credential(t.oauthAccessToken)}catch(n){return null}}}eu.FACEBOOK_SIGN_IN_METHOD="facebook.com",eu.PROVIDER_ID="facebook.com";class tu extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Kc._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tu.credentialFromTaggedObject(e)}static credentialFromError(e){return tu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return tu.credential(n,r)}catch(i){return null}}}tu.GOOGLE_SIGN_IN_METHOD="google.com",tu.PROVIDER_ID="google.com";class nu extends Zc{constructor(){super("github.com")}static credential(e){return Kc._fromParams({providerId:nu.PROVIDER_ID,signInMethod:nu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nu.credentialFromTaggedObject(e)}static credentialFromError(e){return nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nu.credential(t.oauthAccessToken)}catch(n){return null}}}nu.GITHUB_SIGN_IN_METHOD="github.com",nu.PROVIDER_ID="github.com";class ru extends Zc{constructor(){super("twitter.com")}static credential(e,t){return Kc._fromParams({providerId:ru.PROVIDER_ID,signInMethod:ru.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ru.credentialFromTaggedObject(e)}static credentialFromError(e){return ru.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ru.credential(n,r)}catch(i){return null}}}async function iu(e,t){return Yl(e,"POST","/v1/accounts:signUp",Kl(e,t))}ru.TWITTER_SIGN_IN_METHOD="twitter.com",ru.PROVIDER_ID="twitter.com";class su{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await cc._fromIdTokenResponse(e,n,r),s=ou(n);return new su({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ou(n);return new su({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ou(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class au extends it{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,au.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new au(e,t,n,r)}}function lu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw au._fromErrorAndOperation(e,n,t,r);throw n}))}async function cu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await rc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return su._forOperation(e,"link",r)}async function uu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await rc(e,lu(r,i,t,e),n);Ll(s.idToken,r,"internal-error");const o=nc(s.idToken);Ll(o,r,"internal-error");const{sub:a}=o;return Ll(e.uid===a,r,"user-mismatch"),su._forOperation(e,i,s)}catch(hS){throw"auth/user-not-found"===(null===hS||void 0===hS?void 0:hS.code)&&Rl(r,"user-mismatch"),hS}}async function hu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await lu(e,r,t),s=await su._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function du(e,t){return hu(jc(e),t)}async function fu(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Et(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await rc(i,async function(e,t){return Gl(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}new WeakMap;const pu="__sak";class mu{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pu,"1"),this.storage.removeItem(pu),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class gu extends mu{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Je();return vc(e)||Ec(e)}()&&function(){try{return!(!window||window===window.top)}catch(hS){return!1}}(),this.fallbackToPolling=Cc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Tc()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gu.type="LOCAL";const yu=gu;class vu extends mu{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vu.type="SESSION";const _u=vu;class bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new bu(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function wu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}bu.receivers=[];class xu{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=wu("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function ku(){return window}function Eu(){return"undefined"!==typeof ku().WorkerGlobalScope&&"function"===typeof ku().importScripts}const Tu="firebaseLocalStorageDb",Cu="firebaseLocalStorage",Su="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Nu(e,t){return e.transaction([Cu],t?"readwrite":"readonly").objectStore(Cu)}function Ru(){const e=indexedDB.open(Tu,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Cu,{keyPath:Su})}catch(hS){n(hS)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Cu)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Tu);return new Iu(e).toPromise()}(),t(await Ru()))}))}))}async function Pu(e,t,n){const r=Nu(e,!0).put({[Su]:t,value:n});return new Iu(r).toPromise()}function Au(e,t){const n=Nu(e,!0).delete(t);return new Iu(n).toPromise()}class Ou{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ru()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(hS){if(t++>3)throw hS;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Eu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bu._getInstance(Eu()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new xu(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ru();return await Pu(e,pu,"1"),await Au(e,pu),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Pu(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Nu(e,!1).get(t),r=await new Iu(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Au(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Nu(e,!1).getAll();return new Iu(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ou.type="LOCAL";const Du=Ou;Ac("rcb"),new Bl(3e4,6e4);const Lu="recaptcha";async function Mu(e,t,n){var r;const i=await n.verify();try{let s;if(Ll("string"===typeof i,e,"argument-error"),Ll(n.type===Lu,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ll("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Gl(e,"POST","/v2/accounts/mfaEnrollment:start",Kl(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ll("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ll(n,e,"missing-multi-factor-info");const o=await function(e,t){return Gl(e,"POST","/v2/accounts/mfaSignIn:start",Kl(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Gl(e,"POST","/v1/accounts:sendVerificationCode",Kl(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ju{constructor(e){this.providerId=ju.PROVIDER_ID,this.auth=jc(e)}verifyPhoneNumber(e,t){return Mu(this.auth,e,Et(t))}static credential(e,t){return Qc._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ju.credentialFromTaggedObject(t)}static credentialFromError(e){return ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Qc._fromTokenResponse(n,r):null}}function Fu(e,t){return t?hc(t):(Ll(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ju.PROVIDER_ID="phone",ju.PHONE_SIGN_IN_METHOD="phone";class Uu extends Bc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zu(e){return hu(e.auth,new Uu(e),e.bypassAuthState)}function Vu(e){const{auth:t,user:n}=e;return Ll(n,t,"internal-error"),uu(n,new Uu(e),e.bypassAuthState)}async function Bu(e){const{auth:t,user:n}=e;return Ll(n,t,"internal-error"),cu(n,new Uu(e),e.bypassAuthState)}class qu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(hS){this.reject(hS)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(hS){this.reject(hS)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zu;case"linkViaPopup":case"linkViaRedirect":return Bu;case"reauthViaPopup":case"reauthViaRedirect":return Vu;default:Rl(this.auth,"internal-error")}}resolve(e){jl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $u=new Bl(2e3,1e4);class Hu extends qu{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Hu.currentPopupAction&&Hu.currentPopupAction.cancel(),Hu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ll(e,this.auth,"internal-error"),e}async onExecution(){jl(1===this.filter.length,"Popup operations only handle one event");const e=wu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Pl(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Pl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Pl(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,$u.get())};e()}}Hu.currentPopupAction=null;const Wu=new Map;class Ku extends qu{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Wu.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Yu(t),r=Qu(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(hS){e=()=>Promise.reject(hS)}Wu.set(this.auth._key(),e)}return this.bypassAuthState||Wu.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Gu(e,t){Wu.set(e._key(),t)}function Qu(e){return hc(e._redirectPersistence)}function Yu(e){return pc("pendingRedirect",e.config.apiKey,e.name)}async function Xu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=jc(e),i=Fu(r,t),s=new Ku(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Ju{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!eh(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Pl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zu(e))}saveEventToCache(e){this.cachedEventUids.add(Zu(e)),this.lastProcessedEventTime=Date.now()}}function Zu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function eh(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const th=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nh=/^https?/;async function rh(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Gl(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ih(r))return}catch(n){}Rl(e,"unauthorized-domain")}function ih(e){const t=Fl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!nh.test(n))return!1;if(th.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const sh=new Bl(3e4,6e4);function oh(){const e=ku().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let ah=null;function lh(e){return ah=ah||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){oh(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oh(),n(Pl(e,"network-request-failed"))},timeout:sh.get()})}if(null===(i=null===(r=ku().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ku().gapi)||void 0===s?void 0:s.load)){const t=Ac("iframefcb");return ku()[t]=()=>{gapi.load?o():n(Pl(e,"network-request-failed"))},Pc(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw ah=null,e}))}(e),ah}const ch=new Bl(5e3,15e3),uh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dh(e){const t=e.config;Ll(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ql(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Mn},i=hh.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gt(r).slice(1)}`}const fh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ph{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(hS){}}}function mh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fh),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Je().toLowerCase();n&&(a=_c(c)?"_blank":n),yc(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Ec(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ph(null);const h=window.open(t||"",a,u);Ll(h,e,"popup-blocked");try{h.focus()}catch(hS){}return new ph(h)}const gh="__/auth/handler",yh="emulator/auth/handler",vh=encodeURIComponent("fac");async function _h(e,t,n,r,i,s){Ll(e.config.authDomain,e,"auth-domain-config-required"),Ll(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Mn,eventId:i};if(t instanceof Jc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",dt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Zc){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${vh}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${gh}`;return ql(t,yh)}(e)}?${gt(a).slice(1)}${c}`}const bh="webStorageSupport";const wh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_u,this._completeRedirectFn=Xu,this._overrideRedirectResult=Gu}async _openPopup(e,t,n,r){var i;jl(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return mh(e,await _h(e,t,n,Fl(),r),wu())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ku().location.href=e}(await _h(e,t,n,Fl(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(jl(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await lh(e),n=ku().gapi;return Ll(n,e,"internal-error"),t.open({where:document.body,url:dh(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uh,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Pl(e,"network-request-failed"),s=ku().setTimeout((()=>{r(i)}),ch.get());function o(){ku().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Ju(e);return t.register("authEvent",(t=>{Ll(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bh,{type:bh},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[bh];void 0!==i&&t(!!i),Rl(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rh(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cc()||vc()||Ec()}};var xh="@firebase/auth",kh="0.23.2";class Eh{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ll(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Th=Qe("authIdTokenMaxAge")||300;let Ch=null;var Sh;Sh="Browser",An(new Tt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ll(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Sh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sc(Sh)},c=new Mc(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),An(new Tt("auth-internal",(e=>(e=>new Eh(e))(jc(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Un(xh,kh,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Sh)),Un(xh,kh,"esm2017");Un("firebase","9.23.0","app");const Ih="firebasestorage.googleapis.com",Nh="storageBucket";class Rh extends it{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Oh(e),`Firebase Storage: ${t} (${Oh(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rh.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ph,Ah;function Oh(e){return"storage/"+e}function Dh(){return new Rh(Ph.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Lh(){return new Rh(Ph.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Mh(){return new Rh(Ph.CANCELED,"User canceled the upload/download.")}function jh(){return new Rh(Ph.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fh(e){return new Rh(Ph.INVALID_ARGUMENT,e)}function Uh(){return new Rh(Ph.APP_DELETED,"The Firebase app was deleted.")}function zh(e,t){return new Rh(Ph.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Vh(e){throw new Rh(Ph.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ph||(Ph={}));class Bh{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Bh.makeFromUrl(e,t)}catch(hS){return new Bh(e,"")}if(""===n.path)return n;throw r=e,new Rh(Ph.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Ih?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Bh(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Rh(Ph.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class qh{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function $h(e){return"string"===typeof e||e instanceof String}function Hh(e){return Wh()&&e instanceof Blob}function Wh(){return"undefined"!==typeof Blob&&!et()}function Kh(e,t,n,r){if(r<t)throw Fh(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Fh(`Invalid value for '${e}'. Expected ${n} or less.`)}function Gh(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Qh(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Yh(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ah||(Ah={}));class Xh{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Jh(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ah.NO_ERROR,i=n.getStatus();if(!t||Yh(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ah.ABORT;return void e(!1,new Jh(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Jh(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(hS){r(hS)}else if(null!==i){const e=Dh();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Uh():Mh())}else{r(Lh())}};this.canceled_?t(0,new Jh(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Jh{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Zh(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ed(){const e=Zh();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Wh())return new Blob(n);throw new Rh(Ph.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function td(e){if("undefined"===typeof atob)throw t="base-64",new Rh(Ph.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const nd="raw",rd="base64",id="base64url",sd="data_url";class od{constructor(e,t){this.data=e,this.contentType=t||null}}function ad(e,t){switch(e){case nd:return new od(ld(t));case rd:case id:return new od(cd(e,t));case sd:return new od(function(e){const t=new ud(e);return t.base64?cd(rd,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(hS){throw zh(sd,"Malformed data URL.")}return ld(t)}(t.rest)}(t),new ud(t).contentType)}throw Dh()}function ld(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function cd(e,t){switch(e){case rd:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw zh(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case id:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw zh(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=td(t)}catch(hS){if(hS.message.includes("polyfill"))throw hS;throw zh(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ud{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw zh(sd,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class hd{constructor(e,t){let n=0,r="";Hh(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Hh(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new hd(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new hd(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Wh()){const e=t.map((e=>e instanceof hd?e.data_:e));return new hd(ed.apply(null,e))}{const e=t.map((e=>$h(e)?ad(nd,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new hd(r,!0)}}uploadData(){return this.data_}}function dd(e){let t;try{t=JSON.parse(e)}catch(hS){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function fd(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function pd(e,t){return t}class md{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||pd}}let gd=null;function yd(){if(gd)return gd;const e=[];e.push(new md("bucket")),e.push(new md("generation")),e.push(new md("metageneration")),e.push(new md("name","fullPath",!0));const t=new md("name");t.xform=function(e,t){return function(e){return!$h(e)||e.length<2?e:fd(e)}(t)},e.push(t);const n=new md("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new md("timeCreated")),e.push(new md("updated")),e.push(new md("md5Hash",null,!0)),e.push(new md("cacheControl",null,!0)),e.push(new md("contentDisposition",null,!0)),e.push(new md("contentEncoding",null,!0)),e.push(new md("contentLanguage",null,!0)),e.push(new md("contentType",null,!0)),e.push(new md("metadata","customMetadata",!0)),gd=e,gd}function vd(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Bh(n,r);return t._makeStorageReference(i)}})}(r,e),r}function _d(e,t,n){const r=dd(t);if(null===r)return null;return vd(e,r,n)}function bd(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class wd{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xd(e){if(!e)throw Dh()}function kd(e,t){return function(n,r){const i=_d(e,r,t);return xd(null!==i),i}}function Ed(e,t){return function(n,r){const i=_d(e,r,t);return xd(null!==i),function(e,t,n,r){const i=dd(t);if(null===i)return null;if(!$h(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Gh("/b/"+o(i)+"/o/"+o(s),n,r)+Qh({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Td(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Rh(Ph.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Rh(Ph.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Rh(Ph.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Rh(Ph.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Cd(e){const t=Td(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Rh(Ph.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Sd(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Id(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=Sd(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+bd(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=hd.getBlob(c,r,u);if(null===h)throw jh();const d={name:l.fullPath},f=Gh(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new wd(f,"POST",kd(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=Td(t),m}class Nd{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ah.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Ah.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Ah.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Vh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(hS){return-1}}getResponse(){if(!this.sent_)throw Vh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Rd extends Nd{initXhr(){this.xhr_.responseType="text"}}function Pd(){return new Rd}class Ad{constructor(e,t){this._service=e,this._location=t instanceof Bh?t:Bh.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ad(e,t)}get root(){const e=new Bh(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fd(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Bh(this._location.bucket,e);return new Ad(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Rh(Ph.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Od(e,t,n){e._throwIfRoot("uploadBytes");const r=Id(e.storage,e._location,yd(),new hd(t,!0),n);return e.storage.makeRequestWithTokens(r,Pd).then((t=>({metadata:t,ref:e})))}function Dd(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Gh(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new wd(r,"GET",Ed(e,n),i);return s.errorHandler=Cd(t),s}(e.storage,e._location,yd());return e.storage.makeRequestWithTokens(t,Pd).then((e=>{if(null===e)throw new Rh(Ph.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ld(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Bh(e._location.bucket,n);return new Ad(e.storage,r)}function Md(e,t){if(e instanceof Ud){const n=e;if(null==n._bucket)throw new Rh(Ph.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Nh+"' property when initializing the app?");const r=new Ad(n,n._bucket);return null!=t?Md(r,t):r}return void 0!==t?Ld(e,t):e}function jd(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Ud)return new Ad(e,t);throw Fh("To use ref(service, url), the first argument must be a Storage instance.")}return Md(e,t)}function Fd(e,t){const n=null===t||void 0===t?void 0:t[Nh];return null==n?null:Bh.makeFromBucketSpec(n,e)}class Ud{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Ih,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Bh.makeFromBucketSpec(r,this._host):Fd(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Bh.makeFromBucketSpec(this._url,e):this._bucket=Fd(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ad(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new qh(Uh());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Qh(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Xh(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const zd="@firebase/storage",Vd="0.11.2",Bd="storage";function qd(e,t,n){return Od(e=Et(e),t,n)}function $d(e,t){return jd(e=Et(e),t)}function Hd(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Ud(r,i,s,n,Mn)}An(new Tt(Bd,Hd,"PUBLIC").setMultipleInstances(!0)),Un(zd,Vd,""),Un(zd,Vd,"esm2017");var Wd,Kd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Gd={},Qd=Qd||{},Yd=Kd||self;function Xd(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Jd(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Zd="closure_uid_"+(1e9*Math.random()>>>0),ef=0;function tf(e,t,n){return e.call.apply(e.bind,arguments)}function nf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function rf(e,t,n){return(rf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tf:nf).apply(null,arguments)}function sf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function of(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function af(){this.s=this.s,this.o=this.o}af.prototype.s=!1,af.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Zd)&&e[Zd]||(e[Zd]=++ef))},af.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function cf(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function uf(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Xd(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function hf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hf.prototype.h=function(){this.defaultPrevented=!0};var df=function(){if(!Yd.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Yd.addEventListener("test",(()=>{}),t),Yd.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function ff(e){return/^[\s\xa0]*$/.test(e)}function pf(){var e=Yd.navigator;return e&&(e=e.userAgent)?e:""}function mf(e){return-1!=pf().indexOf(e)}function gf(e){return gf[" "](e),e}gf[" "]=function(){};var yf,vf,_f=mf("Opera"),bf=mf("Trident")||mf("MSIE"),wf=mf("Edge"),xf=wf||bf,kf=mf("Gecko")&&!(-1!=pf().toLowerCase().indexOf("webkit")&&!mf("Edge"))&&!(mf("Trident")||mf("MSIE"))&&!mf("Edge"),Ef=-1!=pf().toLowerCase().indexOf("webkit")&&!mf("Edge");function Tf(){var e=Yd.document;return e?e.documentMode:void 0}e:{var Cf="",Sf=function(){var e=pf();return kf?/rv:([^\);]+)(\)|;)/.exec(e):wf?/Edge\/([\d\.]+)/.exec(e):bf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ef?/WebKit\/(\S+)/.exec(e):_f?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Sf&&(Cf=Sf?Sf[1]:""),bf){var If=Tf();if(null!=If&&If>parseFloat(Cf)){yf=String(If);break e}}yf=Cf}if(Yd.document&&bf){var Nf=Tf();vf=Nf||(parseInt(yf,10)||void 0)}else vf=void 0;var Rf=vf;function Pf(e,t){if(hf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(kf){e:{try{gf(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Af[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Pf.$.h.call(this)}}of(Pf,hf);var Af={2:"touch",3:"pen",4:"mouse"};Pf.prototype.h=function(){Pf.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Of="closure_listenable_"+(1e6*Math.random()|0),Df=0;function Lf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Df,this.fa=this.ia=!1}function Mf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function jf(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ff(e){const t={};for(const n in e)t[n]=e[n];return t}const Uf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zf(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Uf.length;t++)n=Uf[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vf(e){this.src=e,this.g={},this.h=0}function Bf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=lf(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Mf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function qf(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Vf.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=qf(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Lf(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var $f="closure_lm_"+(1e6*Math.random()|0),Hf={};function Wf(e,t,n,r,i){if(r&&r.once)return Gf(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Wf(e,t[s],n,r,i);return null}return n=tp(n),e&&e[Of]?e.O(t,n,Jd(r)?!!r.capture:!!r,i):Kf(e,t,n,!1,r,i)}function Kf(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Jd(i)?!!i.capture:!!i,a=Zf(e);if(a||(e[$f]=a=new Vf(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Jf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)df||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Xf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Gf(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Gf(e,t[s],n,r,i);return null}return n=tp(n),e&&e[Of]?e.P(t,n,Jd(r)?!!r.capture:!!r,i):Kf(e,t,n,!0,r,i)}function Qf(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Qf(e,t[s],n,r,i);else r=Jd(r)?!!r.capture:!!r,n=tp(n),e&&e[Of]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=qf(s=e.g[t],n,r,i))&&(Mf(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Zf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=qf(t,n,r,i)),(n=-1<e?t[e]:null)&&Yf(n))}function Yf(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Of])Bf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Xf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zf(t))?(Bf(n,e),0==n.h&&(n.src=null,t[$f]=null)):Mf(e)}}}function Xf(e){return e in Hf?Hf[e]:Hf[e]="on"+e}function Jf(e,t){if(e.fa)e=!0;else{t=new Pf(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Yf(e),e=n.call(r,t)}return e}function Zf(e){return(e=e[$f])instanceof Vf?e:null}var ep="__closure_events_fn_"+(1e9*Math.random()>>>0);function tp(e){return"function"===typeof e?e:(e[ep]||(e[ep]=function(t){return e.handleEvent(t)}),e[ep])}function np(){af.call(this),this.i=new Vf(this),this.S=this,this.J=null}function rp(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new hf(t,e);else if(t instanceof hf)t.target=t.target||e;else{var i=t;zf(t=new hf(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ip(o,r,!0,t)&&i}if(i=ip(o=t.g=e,r,!0,t)&&i,i=ip(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ip(o=t.g=n[s],r,!1,t)&&i}function ip(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Bf(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}of(np,af),np.prototype[Of]=!0,np.prototype.removeEventListener=function(e,t,n,r){Qf(this,e,t,n,r)},np.prototype.N=function(){if(np.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mf(n[r]);delete t.g[e],t.h--}}this.J=null},np.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},np.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sp=Yd.JSON.stringify;function op(){var e=fp;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ap=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new lp),(e=>e.reset()));class lp{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cp(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function up(e){Yd.setTimeout((()=>{throw e}),0)}let hp,dp=!1,fp=new class{constructor(){this.h=this.g=null}add(e,t){const n=ap.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},pp=()=>{const e=Yd.Promise.resolve(void 0);hp=()=>{e.then(mp)}};var mp=()=>{for(var e;e=op();){try{e.h.call(e.g)}catch(n){up(n)}var t=ap;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}dp=!1};function gp(e,t){np.call(this),this.h=e||1,this.g=t||Yd,this.j=rf(this.qb,this),this.l=Date.now()}function yp(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function vp(e,t,n){if("function"===typeof e)n&&(e=rf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=rf(e.handleEvent,e)}return 2147483647<Number(t)?-1:Yd.setTimeout(e,t||0)}function _p(e){e.g=vp((()=>{e.g=null,e.i&&(e.i=!1,_p(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}of(gp,np),(Wd=gp.prototype).ga=!1,Wd.T=null,Wd.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rp(this,"tick"),this.ga&&(yp(this),this.start()))}},Wd.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Wd.N=function(){gp.$.N.call(this),yp(this),delete this.g};class bp extends af{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_p(this)}N(){super.N(),this.g&&(Yd.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wp(e){af.call(this),this.h=e,this.g={}}of(wp,af);var xp=[];function kp(e,t,n,r){Array.isArray(n)||(n&&(xp[0]=n.toString()),n=xp);for(var i=0;i<n.length;i++){var s=Wf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ep(e){jf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Yf(e)}),e),e.g={}}function Tp(){this.g=!0}function Cp(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return sp(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}wp.prototype.N=function(){wp.$.N.call(this),Ep(this)},wp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tp.prototype.Ea=function(){this.g=!1},Tp.prototype.info=function(){};var Sp={},Ip=null;function Np(){return Ip=Ip||new np}function Rp(e){hf.call(this,Sp.Ta,e)}function Pp(e){const t=Np();rp(t,new Rp(t))}function Ap(e,t){hf.call(this,Sp.STAT_EVENT,e),this.stat=t}function Op(e){const t=Np();rp(t,new Ap(t,e))}function Dp(e,t){hf.call(this,Sp.Ua,e),this.size=t}function Lp(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Yd.setTimeout((function(){e()}),t)}Sp.Ta="serverreachability",of(Rp,hf),Sp.STAT_EVENT="statevent",of(Ap,hf),Sp.Ua="timingevent",of(Dp,hf);var Mp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fp(){}function Up(e){return e.h||(e.h=e.i())}function zp(){}Fp.prototype.h=null;var Vp,Bp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qp(){hf.call(this,"d")}function $p(){hf.call(this,"c")}function Hp(){}function Wp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new wp(this),this.P=Gp,e=xf?125:void 0,this.V=new gp(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Kp}function Kp(){this.i=null,this.g="",this.h=!1}of(qp,hf),of($p,hf),of(Hp,Fp),Hp.prototype.g=function(){return new XMLHttpRequest},Hp.prototype.i=function(){return{}},Vp=new Hp;var Gp=45e3,Qp={},Yp={};function Xp(e,t,n){e.L=1,e.v=gm(hm(t)),e.s=n,e.S=!0,Jp(e,null)}function Jp(e,t){e.G=Date.now(),nm(e),e.A=hm(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Nm(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Kp,e.g=Rg(e.l,n?t:null,!e.s),0<e.O&&(e.M=new bp(rf(e.Pa,e,e.g),e.O)),kp(e.U,e.g,"readystatechange",e.nb),t=e.I?Ff(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Pp(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Zp(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function em(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=tm(e,n),r==Yp){4==t&&(e.o=4,Op(14),i=!1),Cp(e.j,e.m,null,"[Incomplete Response]");break}if(r==Qp){e.o=4,Op(15),Cp(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Cp(e.j,e.m,r,null),am(e,r)}Zp(e)&&r!=Yp&&r!=Qp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Op(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xg(t),t.M=!0,Op(11))):(Cp(e.j,e.m,n,"[Invalid Chunked Response]"),om(e),sm(e))}function tm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Yp:(n=Number(t.substring(n,r)),isNaN(n)?Qp:(r+=1)+n>t.length?Yp:(t=t.slice(r,r+n),e.C=r+n,t))}function nm(e){e.Y=Date.now()+e.P,rm(e,e.P)}function rm(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Lp(rf(e.lb,e),t)}function im(e){e.B&&(Yd.clearTimeout(e.B),e.B=null)}function sm(e){0==e.l.H||e.J||Tg(e.l,e)}function om(e){im(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,yp(e.V),Ep(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function am(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Mm(n.i,e)))if(!e.K&&Mm(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Eg(n),pg(n)}wg(n),Op(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Lp(rf(n.ib,n),6e3));if(1>=Lm(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Sg(n,11)}else if((e.K||n.g==e)&&Eg(n),!ff(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(jm(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,mm(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ng(r,r.J?r.pa:null,r.Y),o.K){Fm(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(im(a),nm(a)),r.g=o}else bg(r);0<n.j.length&&gg(n)}else"stop"!=c[0]&&"close"!=c[0]||Sg(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Sg(n,7):fg(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Pp()}catch(c){}}function lm(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Xd(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Xd(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Xd(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Wd=Wp.prototype).setTimeout=function(e){this.P=e},Wd.nb=function(e){e=e.target;const t=this.M;t&&3==ag(e)?t.l():this.Pa(e)},Wd.Pa=function(e){try{if(e==this.g)e:{const u=ag(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||xf||this.g&&(this.h.h||this.g.ja()||lg(this.g)))){this.J||4!=u||7==t||Pp(),im(this);var n=this.g.da();this.ca=n;t:if(Zp(this)){var r=lg(this.g);e="";var i=r.length,s=4==ag(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){om(this),sm(this);var o="";break t}this.h.i=new Yd.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ff(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Op(12),om(this),sm(this);break e}Cp(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,am(this,n)}this.S?(em(this,u,o),xf&&this.i&&3==u&&(kp(this.U,this.V,"tick",this.mb),this.V.start())):(Cp(this.j,this.m,o,null),am(this,o)),4==u&&om(this),this.i&&!this.J&&(4==u?Tg(this.l,this):(this.i=!1,nm(this)))}else(function(e){const t={};e=(e.g&&2<=ag(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ff(e[r]))continue;var n=cp(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Op(12)):(this.o=0,Op(13)),om(this),sm(this)}}}catch(u){}},Wd.mb=function(){if(this.g){var e=ag(this.g),t=this.g.ja();this.C<t.length&&(im(this),em(this,e,t),this.i&&4!=e&&nm(this))}},Wd.cancel=function(){this.J=!0,om(this)},Wd.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Pp(),Op(17)),om(this),this.o=2,sm(this)):rm(this,this.Y-e)};var cm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function um(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof um){this.h=e.h,dm(this,e.j),this.s=e.s,this.g=e.g,fm(this,e.m),this.l=e.l;var t=e.i,n=new Tm;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pm(this,n),this.o=e.o}else e&&(t=String(e).match(cm))?(this.h=!1,dm(this,t[1]||"",!0),this.s=ym(t[2]||""),this.g=ym(t[3]||"",!0),fm(this,t[4]),this.l=ym(t[5]||"",!0),pm(this,t[6]||"",!0),this.o=ym(t[7]||"")):(this.h=!1,this.i=new Tm(null,this.h))}function hm(e){return new um(e)}function dm(e,t,n){e.j=n?ym(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function fm(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function pm(e,t,n){t instanceof Tm?(e.i=t,function(e,t){t&&!e.j&&(Cm(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Sm(this,t),Nm(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vm(t,km)),e.i=new Tm(t,e.h))}function mm(e,t,n){e.i.set(t,n)}function gm(e){return mm(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ym(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vm(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,_m),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function _m(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}um.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vm(t,bm,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vm(t,bm,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vm(n,"/"==n.charAt(0)?xm:wm,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vm(n,Em)),e.join("")};var bm=/[#\/\?@]/g,wm=/[#\?:]/g,xm=/[#\?]/g,km=/[#\?@]/g,Em=/#/g;function Tm(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Cm(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Sm(e,t){Cm(e),t=Rm(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Im(e,t){return Cm(e),t=Rm(e,t),e.g.has(t)}function Nm(e,t,n){Sm(e,t),0<n.length&&(e.i=null,e.g.set(Rm(e,t),cf(n)),e.h+=n.length)}function Rm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Wd=Tm.prototype).add=function(e,t){Cm(this),this.i=null,e=Rm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Wd.forEach=function(e,t){Cm(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Wd.ta=function(){Cm(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Wd.Z=function(e){Cm(this);let t=[];if("string"===typeof e)Im(this,e)&&(t=t.concat(this.g.get(Rm(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Wd.set=function(e,t){return Cm(this),this.i=null,Im(this,e=Rm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Wd.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Wd.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Pm=class{constructor(e,t){this.g=e,this.map=t}};function Am(e){this.l=e||Om,Yd.PerformanceNavigationTiming?e=0<(e=Yd.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Yd.g&&Yd.g.Ka&&Yd.g.Ka()&&Yd.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Om=10;function Dm(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Lm(e){return e.h?1:e.g?e.g.size:0}function Mm(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function jm(e,t){e.g?e.g.add(t):e.h=t}function Fm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Um(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return cf(e.i)}Am.prototype.cancel=function(){if(this.i=Um(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var zm,Vm=class{stringify(e){return Yd.JSON.stringify(e,void 0)}parse(e){return Yd.JSON.parse(e,void 0)}};function Bm(){this.g=new Vm}function qm(e,t,n){const r=n||"";try{lm(e,(function(e,n){let i=e;Jd(e)&&(i=sp(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(hS){throw t.push(r+"type="+encodeURIComponent("_badmap")),hS}}function $m(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Hm(e){this.l=e.fc||null,this.j=e.ob||!1}function Wm(e,t){np.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Km,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}of(Hm,Fp),Hm.prototype.g=function(){return new Wm(this.l,this.j)},Hm.prototype.i=(zm={},function(){return zm}),of(Wm,np);var Km=0;function Gm(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Qm(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ym(e)}function Ym(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Wd=Wm.prototype).open=function(e,t){if(this.readyState!=Km)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ym(this)},Wd.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Yd).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Wd.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qm(this)),this.readyState=Km},Wd.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ym(this)),this.g&&(this.readyState=3,Ym(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Yd.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gm(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Wd.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qm(this):Ym(this),3==this.readyState&&Gm(this)}},Wd.Za=function(e){this.g&&(this.response=this.responseText=e,Qm(this))},Wd.Ya=function(e){this.g&&(this.response=e,Qm(this))},Wd.ka=function(){this.g&&Qm(this)},Wd.setRequestHeader=function(e,t){this.v.append(e,t)},Wd.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Wd.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Wm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Xm=Yd.JSON.parse;function Jm(e){np.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Zm,this.L=this.M=!1}of(Jm,np);var Zm="",eg=/^https?$/i,tg=["POST","PUT"];function ng(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rg(e),sg(e)}function rg(e){e.F||(e.F=!0,rp(e,"complete"),rp(e,"error"))}function ig(e){if(e.h&&"undefined"!=typeof Qd&&(!e.C[1]||4!=ag(e)||2!=e.da()))if(e.v&&4==ag(e))vp(e.La,0,e);else if(rp(e,"readystatechange"),4==ag(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(cm)[1]||null;!i&&Yd.self&&Yd.self.location&&(i=Yd.self.location.protocol.slice(0,-1)),r=!eg.test(i?i.toLowerCase():"")}n=r}if(n)rp(e,"complete"),rp(e,"success");else{e.m=6;try{var s=2<ag(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",rg(e)}}finally{sg(e)}}}function sg(e,t){if(e.g){og(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||rp(e,"ready");try{n.onreadystatechange=r}catch(hS){}}}function og(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Yd.clearTimeout(e.A),e.A=null)}function ag(e){return e.g?e.g.readyState:0}function lg(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Zm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(fy){return null}}function cg(e){let t="";return jf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ug(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=cg(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):mm(e,t,n))}function hg(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function dg(e){this.Ga=0,this.j=[],this.l=new Tp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hg("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hg("baseRetryDelayMs",5e3,e),this.hb=hg("retryDelaySeedMs",1e4,e),this.eb=hg("forwardChannelMaxRetries",2,e),this.xa=hg("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Am(e&&e.concurrentRequestLimit),this.Ja=new Bm,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function fg(e){if(mg(e),3==e.H){var t=e.W++,n=hm(e.I);if(mm(n,"SID",e.K),mm(n,"RID",t),mm(n,"TYPE","terminate"),vg(e,n),(t=new Wp(e,e.l,t)).L=2,t.v=gm(hm(n)),n=!1,Yd.navigator&&Yd.navigator.sendBeacon)try{n=Yd.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Yd.Image&&((new Image).src=t.v,n=!0),n||(t.g=Rg(t.l,null),t.g.ha(t.v)),t.G=Date.now(),nm(t)}Ig(e)}function pg(e){e.g&&(xg(e),e.g.cancel(),e.g=null)}function mg(e){pg(e),e.u&&(Yd.clearTimeout(e.u),e.u=null),Eg(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Yd.clearTimeout(e.m),e.m=null)}function gg(e){if(!Dm(e.i)&&!e.m){e.m=!0;var t=e.Na;hp||pp(),dp||(hp(),dp=!0),fp.add(t,e),e.C=0}}function yg(e,t){var n;n=t?t.m:e.W++;const r=hm(e.I);mm(r,"SID",e.K),mm(r,"RID",n),mm(r,"AID",e.V),vg(e,r),e.o&&e.s&&ug(r,e.o,e.s),n=new Wp(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=_g(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),jm(e.i,n),Xp(n,r,t)}function vg(e,t){e.na&&jf(e.na,(function(e,n){mm(t,n,e)})),e.h&&lm({},(function(e,n){mm(t,n,e)}))}function _g(e,t,n){n=Math.min(e.j.length,n);var r=e.h?rf(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{qm(a,e,"req"+n+"_")}catch(Ey){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function bg(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;hp||pp(),dp||(hp(),dp=!0),fp.add(t,e),e.A=0}}function wg(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Lp(rf(e.Ma,e),Cg(e,e.A)),e.A++,!0)}function xg(e){null!=e.B&&(Yd.clearTimeout(e.B),e.B=null)}function kg(e){e.g=new Wp(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=hm(e.wa);mm(t,"RID","rpc"),mm(t,"SID",e.K),mm(t,"AID",e.V),mm(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&mm(t,"TO",e.qa),mm(t,"TYPE","xmlhttp"),vg(e,t),e.o&&e.s&&ug(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=gm(hm(t)),n.s=null,n.S=!0,Jp(n,e)}function Eg(e){null!=e.v&&(Yd.clearTimeout(e.v),e.v=null)}function Tg(e,t){var n=null;if(e.g==t){Eg(e),xg(e),e.g=null;var r=2}else{if(!Mm(e.i,t))return;n=t.F,Fm(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;rp(r=Np(),new Dp(r,n)),gg(e)}else bg(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Lm(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Lp(rf(e.Na,e,t),Cg(e,e.C)),e.C++,!0))}(e,t)||2==r&&wg(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Sg(e,5);break;case 4:Sg(e,10);break;case 3:Sg(e,6);break;default:Sg(e,2)}}function Cg(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Sg(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=rf(e.pb,e);n||(n=new um("//www.google.com/images/cleardot.gif"),Yd.location&&"http"==Yd.location.protocol||dm(n,"https"),gm(n)),function(e,t){const n=new Tp;if(Yd.Image){const r=new Image;r.onload=sf($m,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sf($m,n,r,"TestLoadImage: error",!1,t),r.onabort=sf($m,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sf($m,n,r,"TestLoadImage: timeout",!1,t),Yd.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Op(2);e.H=0,e.h&&e.h.za(t),Ig(e),mg(e)}function Ig(e){if(e.H=0,e.ma=[],e.h){const t=Um(e.i);0==t.length&&0==e.j.length||(uf(e.ma,t),uf(e.ma,e.j),e.i.i.length=0,cf(e.j),e.j.length=0),e.h.ya()}}function Ng(e,t,n){var r=n instanceof um?hm(n):new um(n);if(""!=r.g)t&&(r.g=t+"."+r.g),fm(r,r.m);else{var i=Yd.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new um(null);r&&dm(s,r),t&&(s.g=t),i&&fm(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&mm(r,n,t),mm(r,"VER",e.ra),vg(e,r),r}function Rg(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Jm(new Hm({ob:!0})):new Jm(e.va)).Oa(e.J),t}function Pg(){}function Ag(){if(bf&&!(10<=Number(Rf)))throw Error("Environmental error: no available transport.")}function Og(e,t){np.call(this),this.g=new dg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ff(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ff(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Mg(this)}function Dg(e){qp.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Lg(){$p.call(this),this.status=1}function Mg(e){this.g=e}function jg(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Fg(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Ug(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Wd=Jm.prototype).Oa=function(e){this.M=e},Wd.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Vp.g(),this.C=this.u?Up(this.u):Up(Vp),this.g.onreadystatechange=rf(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void ng(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Yd.FormData&&e instanceof Yd.FormData,!(0<=lf(tg,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{og(this),0<this.B&&((this.L=function(e){return bf&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rf(this.ua,this)):this.A=vp(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ng(this,s)}},Wd.ua=function(){"undefined"!=typeof Qd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rp(this,"timeout"),this.abort(8))},Wd.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,rp(this,"complete"),rp(this,"abort"),sg(this))},Wd.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sg(this,!0)),Jm.$.N.call(this)},Wd.La=function(){this.s||(this.G||this.v||this.l?ig(this):this.kb())},Wd.kb=function(){ig(this)},Wd.isActive=function(){return!!this.g},Wd.da=function(){try{return 2<ag(this)?this.g.status:-1}catch(zm){return-1}},Wd.ja=function(){try{return this.g?this.g.responseText:""}catch(zm){return""}},Wd.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Xm(t)}},Wd.Ia=function(){return this.m},Wd.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Wd=dg.prototype).ra=8,Wd.H=1,Wd.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Wp(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Ff(s),zf(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=_g(this,i,t),mm(n=hm(this.I),"RID",e),mm(n,"CVER",22),this.F&&mm(n,"X-HTTP-Session-Id",this.F),vg(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(cg(s)))+"&"+t:this.o&&ug(n,this.o,s)),jm(this.i,i),this.bb&&mm(n,"TYPE","init"),this.P?(mm(n,"$req",t),mm(n,"SID","null"),i.aa=!0,Xp(i,n,null)):Xp(i,n,t),this.H=2}}else 3==this.H&&(e?yg(this,e):0==this.j.length||Dm(this.i)||yg(this))},Wd.Ma=function(){if(this.u=null,kg(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Lp(rf(this.jb,this),e)}},Wd.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Op(10),pg(this),kg(this))},Wd.ib=function(){null!=this.v&&(this.v=null,pg(this),wg(this),Op(19))},Wd.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Op(2)):(this.l.info("Failed to ping google.com"),Op(1))},Wd.isActive=function(){return!!this.h&&this.h.isActive(this)},(Wd=Pg.prototype).Ba=function(){},Wd.Aa=function(){},Wd.za=function(){},Wd.ya=function(){},Wd.isActive=function(){return!0},Wd.Va=function(){},Ag.prototype.g=function(e,t){return new Og(e,t)},of(Og,np),Og.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Op(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ng(e,null,e.Y),gg(e)},Og.prototype.close=function(){fg(this.g)},Og.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=sp(e),e=n);t.j.push(new Pm(t.fb++,e)),3==t.H&&gg(t)},Og.prototype.N=function(){this.g.h=null,delete this.j,fg(this.g),delete this.g,Og.$.N.call(this)},of(Dg,qp),of(Lg,$p),of(Mg,Pg),Mg.prototype.Ba=function(){rp(this.g,"a")},Mg.prototype.Aa=function(e){rp(this.g,new Dg(e))},Mg.prototype.za=function(e){rp(this.g,new Lg)},Mg.prototype.ya=function(){rp(this.g,"b")},of(jg,(function(){this.blockSize=-1})),jg.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},jg.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Fg(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Fg(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Fg(this,r),i=0;break}}this.h=i,this.i+=t},jg.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var zg={};function Vg(e){return-128<=e&&128>e?function(e,t){var n=zg;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ug([0|e],0>e?-1:0)})):new Ug([0|e],0>e?-1:0)}function Bg(e){if(isNaN(e)||!isFinite(e))return $g;if(0>e)return Qg(Bg(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=qg;return new Ug(t,0)}var qg=4294967296,$g=Vg(0),Hg=Vg(1),Wg=Vg(16777216);function Kg(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Gg(e){return-1==e.h}function Qg(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ug(n,~e.h).add(Hg)}function Yg(e,t){return e.add(Qg(t))}function Xg(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Jg(e,t){this.g=e,this.h=t}function Zg(e,t){if(Kg(t))throw Error("division by zero");if(Kg(e))return new Jg($g,$g);if(Gg(e))return t=Zg(Qg(e),t),new Jg(Qg(t.g),Qg(t.h));if(Gg(t))return t=Zg(e,Qg(t)),new Jg(Qg(t.g),t.h);if(30<e.g.length){if(Gg(e)||Gg(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Hg,r=t;0>=r.X(e);)n=ey(n),r=ey(r);var i=ty(n,1),s=ty(r,1);for(r=ty(r,2),n=ty(n,2);!Kg(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=ty(r,1),n=ty(n,1)}return t=Yg(e,i.R(t)),new Jg(i,t)}for(i=$g;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Bg(n)).R(t);Gg(o)||0<o.X(e);)o=(s=Bg(n-=r)).R(t);Kg(s)&&(s=Hg),i=i.add(s),e=Yg(e,o)}return new Jg(i,e)}function ey(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ug(n,e.h)}function ty(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Ug(i,e.h)}(Wd=Ug.prototype).ea=function(){if(Gg(this))return-Qg(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:qg+r)*t,t*=qg}return e},Wd.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Kg(this))return"0";if(Gg(this))return"-"+Qg(this).toString(e);for(var t=Bg(Math.pow(e,6)),n=this,r="";;){var i=Zg(n,t).g,s=((0<(n=Yg(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Kg(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Wd.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Wd.X=function(e){return Gg(e=Yg(this,e))?-1:Kg(e)?0:1},Wd.abs=function(){return Gg(this)?Qg(this):this},Wd.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ug(n,-2147483648&n[n.length-1]?-1:0)},Wd.R=function(e){if(Kg(this)||Kg(e))return $g;if(Gg(this))return Gg(e)?Qg(this).R(Qg(e)):Qg(Qg(this).R(e));if(Gg(e))return Qg(this.R(Qg(e)));if(0>this.X(Wg)&&0>e.X(Wg))return Bg(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Xg(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Xg(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Xg(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Xg(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ug(n,0)},Wd.gb=function(e){return Zg(this,e).h},Wd.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ug(n,this.h&e.h)},Wd.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ug(n,this.h|e.h)},Wd.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ug(n,this.h^e.h)},Ag.prototype.createWebChannel=Ag.prototype.g,Og.prototype.send=Og.prototype.u,Og.prototype.open=Og.prototype.m,Og.prototype.close=Og.prototype.close,Mp.NO_ERROR=0,Mp.TIMEOUT=8,Mp.HTTP_ERROR=6,jp.COMPLETE="complete",zp.EventType=Bp,Bp.OPEN="a",Bp.CLOSE="b",Bp.ERROR="c",Bp.MESSAGE="d",np.prototype.listen=np.prototype.O,Jm.prototype.listenOnce=Jm.prototype.P,Jm.prototype.getLastError=Jm.prototype.Sa,Jm.prototype.getLastErrorCode=Jm.prototype.Ia,Jm.prototype.getStatus=Jm.prototype.da,Jm.prototype.getResponseJson=Jm.prototype.Wa,Jm.prototype.getResponseText=Jm.prototype.ja,Jm.prototype.send=Jm.prototype.ha,Jm.prototype.setWithCredentials=Jm.prototype.Oa,jg.prototype.digest=jg.prototype.l,jg.prototype.reset=jg.prototype.reset,jg.prototype.update=jg.prototype.j,Ug.prototype.add=Ug.prototype.add,Ug.prototype.multiply=Ug.prototype.R,Ug.prototype.modulo=Ug.prototype.gb,Ug.prototype.compare=Ug.prototype.X,Ug.prototype.toNumber=Ug.prototype.ea,Ug.prototype.toString=Ug.prototype.toString,Ug.prototype.getBits=Ug.prototype.D,Ug.fromNumber=Bg,Ug.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Qg(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Bg(Math.pow(n,8)),i=$g,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Bg(Math.pow(n,o)),i=i.R(o).add(Bg(a))):i=(i=i.R(r)).add(Bg(a))}return i};var ny=Gd.createWebChannelTransport=function(){return new Ag},ry=Gd.getStatEventTarget=function(){return Np()},iy=Gd.ErrorCode=Mp,sy=Gd.EventType=jp,oy=Gd.Event=Sp,ay=Gd.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ly=Gd.FetchXmlHttpFactory=Hm,cy=Gd.WebChannel=zp,uy=Gd.XhrIo=Jm,hy=Gd.Md5=jg,dy=Gd.Integer=Ug;const fy="@firebase/firestore";class py{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}py.UNAUTHENTICATED=new py(null),py.GOOGLE_CREDENTIALS=new py("google-credentials-uid"),py.FIRST_PARTY=new py("first-party-uid"),py.MOCK_USER=new py("mock-user");let my="9.23.0";const gy=new Lt("@firebase/firestore");function yy(){return gy.logLevel}function vy(e){if(gy.logLevel<=Rt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(wy);gy.debug(`Firestore (${my}): ${e}`,...i)}}function _y(e){if(gy.logLevel<=Rt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(wy);gy.error(`Firestore (${my}): ${e}`,...i)}}function by(e){if(gy.logLevel<=Rt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(wy);gy.warn(`Firestore (${my}): ${e}`,...i)}}function wy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xy(){const e=`FIRESTORE (${my}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw _y(e),new Error(e)}function ky(e,t){e||xy()}function Ey(e,t){return e}const Ty={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cy extends it{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sy{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Iy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ny{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(py.UNAUTHENTICATED)))}shutdown(){}}class Ry{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Py{constructor(e){this.t=e,this.currentUser=py.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Sy;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sy,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{vy("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(vy("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sy)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(vy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ky("string"==typeof t.accessToken),new Iy(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ky(null===e||"string"==typeof e),new py(e)}}class Ay{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=py.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Oy{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ay(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(py.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ly{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&vy("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,vy("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{vy("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):vy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ky("string"==typeof e.token),this.T=e.token,new Dy(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function My(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class jy{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=My(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Fy(e,t){return e<t?-1:e>t?1:0}function Uy(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class zy{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Cy(Ty.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Cy(Ty.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Cy(Ty.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Cy(Ty.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zy.fromMillis(Date.now())}static fromDate(e){return zy.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new zy(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fy(this.nanoseconds,e.nanoseconds):Fy(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vy{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vy(e)}static min(){return new Vy(new zy(0,0))}static max(){return new Vy(new zy(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class By{constructor(e,t,n){void 0===t?t=0:t>e.length&&xy(),void 0===n?n=e.length-t:n>e.length-t&&xy(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===By.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof By?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qy extends By{construct(e,t,n){return new qy(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Cy(Ty.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new qy(e)}static emptyPath(){return new qy([])}}const $y=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hy extends By{construct(e,t,n){return new Hy(e,t,n)}static isValidIdentifier(e){return $y.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hy.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hy(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Cy(Ty.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Cy(Ty.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Cy(Ty.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Cy(Ty.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hy(t)}static emptyPath(){return new Hy([])}}class Wy{constructor(e){this.path=e}static fromPath(e){return new Wy(qy.fromString(e))}static fromName(e){return new Wy(qy.fromString(e).popFirst(5))}static empty(){return new Wy(qy.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qy.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qy.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wy(new qy(e.slice()))}}class Ky{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Ky.UNKNOWN_ID=-1;function Gy(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vy.fromTimestamp(1e9===r?new zy(n+1,0):new zy(n,r));return new Yy(i,Wy.empty(),t)}function Qy(e){return new Yy(e.readTime,e.key,-1)}class Yy{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Yy(Vy.min(),Wy.empty(),-1)}static max(){return new Yy(Vy.max(),Wy.empty(),-1)}}function Xy(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Wy.comparator(e.documentKey,t.documentKey),0!==n?n:Fy(e.largestBatchId,t.largestBatchId))}const Jy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ev(e){if(e.code!==Ty.FAILED_PRECONDITION||e.message!==Jy)throw e;vy("LocalStore","Unexpectedly lost primary lease")}class tv{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tv(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof tv?t:tv.resolve(t)}catch(e){return tv.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):tv.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):tv.reject(t)}static resolve(e){return new tv(((t,n)=>{t(e)}))}static reject(e){return new tv(((t,n)=>{n(e)}))}static waitFor(e){return new tv(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=tv.resolve(!1);for(const n of e)t=t.next((e=>e?tv.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new tv(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new tv(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function nv(e){return"IndexedDbTransactionError"===e.name}class rv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function iv(e){return null==e}function sv(e){return 0===e&&1/e==-1/0}function ov(e){return"number"==typeof e&&Number.isInteger(e)&&!sv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}rv.ct=-1;const av=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cv=lv;function uv(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hv(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class fv{constructor(e,t){this.comparator=e,this.root=t||mv.EMPTY}insert(e,t){return new fv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mv.BLACK,null,null))}remove(e){return new fv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mv.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pv(this.root,e,this.comparator,!1)}getReverseIterator(){return new pv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pv(this.root,e,this.comparator,!0)}}class pv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mv.RED,this.left=null!=r?r:mv.EMPTY,this.right=null!=i?i:mv.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mv.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mv.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xy();if(this.right.isRed())throw xy();const e=this.left.check();if(e!==this.right.check())throw xy();return e+(this.isRed()?0:1)}}mv.EMPTY=null,mv.RED=!0,mv.BLACK=!1,mv.EMPTY=new class{constructor(){this.size=0}get key(){throw xy()}get value(){throw xy()}get color(){throw xy()}get left(){throw xy()}get right(){throw xy()}copy(e,t,n,r,i){return this}insert(e,t,n){return new mv(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gv{constructor(e){this.comparator=e,this.data=new fv(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof gv))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gv(this.comparator);return t.data=e,t}}class yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vv{constructor(e){this.fields=e,e.sort(Hy.comparator)}static empty(){return new vv([])}unionWith(e){let t=new gv(Hy.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vv(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uy(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class _v extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bv{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new _v("Invalid base64 string: "+e):e}}(e);return new bv(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bv(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fy(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bv.EMPTY_BYTE_STRING=new bv("");const wv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xv(e){if(ky(!!e),"string"==typeof e){let t=0;const n=wv.exec(e);if(ky(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:kv(e.seconds),nanos:kv(e.nanos)}}function kv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ev(e){return"string"==typeof e?bv.fromBase64String(e):bv.fromUint8Array(e)}function Tv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Cv(e){const t=e.mapValue.fields.__previous_value__;return Tv(t)?Cv(t):t}function Sv(e){const t=xv(e.mapValue.fields.__local_write_time__.timestampValue);return new zy(t.seconds,t.nanos)}class Iv{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Nv{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nv("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nv&&e.projectId===this.projectId&&e.database===this.database}}const Rv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tv(e)?4:$v(e)?9007199254740991:10:xy()}function Av(e,t){if(e===t)return!0;const n=Pv(e);if(n!==Pv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Sv(e).isEqual(Sv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xv(e.timestampValue),r=xv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ev(e.bytesValue).isEqual(Ev(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return kv(e.geoPointValue.latitude)===kv(t.geoPointValue.latitude)&&kv(e.geoPointValue.longitude)===kv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return kv(e.integerValue)===kv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=kv(e.doubleValue),r=kv(t.doubleValue);return n===r?sv(n)===sv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Uy(e.arrayValue.values||[],t.arrayValue.values||[],Av);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(uv(n)!==uv(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Av(n[i],r[i])))return!1;return!0}(e,t);default:return xy()}}function Ov(e,t){return void 0!==(e.values||[]).find((e=>Av(e,t)))}function Dv(e,t){if(e===t)return 0;const n=Pv(e),r=Pv(t);if(n!==r)return Fy(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fy(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=kv(e.integerValue||e.doubleValue),r=kv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Lv(e.timestampValue,t.timestampValue);case 4:return Lv(Sv(e),Sv(t));case 5:return Fy(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ev(e),r=Ev(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Fy(n[i],r[i]);if(0!==e)return e}return Fy(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Fy(kv(e.latitude),kv(t.latitude));return 0!==n?n:Fy(kv(e.longitude),kv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Dv(n[i],r[i]);if(e)return e}return Fy(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Rv.mapValue&&t===Rv.mapValue)return 0;if(e===Rv.mapValue)return 1;if(t===Rv.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Fy(r[o],s[o]);if(0!==e)return e;const t=Dv(n[r[o]],i[s[o]]);if(0!==t)return t}return Fy(r.length,s.length)}(e.mapValue,t.mapValue);default:throw xy()}}function Lv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Fy(e,t);const n=xv(e),r=xv(t),i=Fy(n.seconds,r.seconds);return 0!==i?i:Fy(n.nanos,r.nanos)}function Mv(e){return jv(e)}function jv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xv(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ev(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wy.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jv(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${jv(e.fields[i])}`;return n+"}"}(e.mapValue):xy();var t,n}function Fv(e){return!!e&&"integerValue"in e}function Uv(e){return!!e&&"arrayValue"in e}function zv(e){return!!e&&"nullValue"in e}function Vv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bv(e){return!!e&&"mapValue"in e}function qv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hv(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=qv(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qv(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $v(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Hv{constructor(e){this.value=e}static empty(){return new Hv({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Bv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qv(t)}setAll(e){let t=Hy.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qv(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Bv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Av(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Bv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){hv(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Hv(qv(this.value))}}function Wv(e){const t=[];return hv(e.fields,((e,n)=>{const r=new Hy([e]);if(Bv(n)){const e=Wv(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new vv(t)}class Kv{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Kv(e,0,Vy.min(),Vy.min(),Vy.min(),Hv.empty(),0)}static newFoundDocument(e,t,n,r){return new Kv(e,1,t,Vy.min(),n,r,0)}static newNoDocument(e,t){return new Kv(e,2,t,Vy.min(),Vy.min(),Hv.empty(),0)}static newUnknownDocument(e,t){return new Kv(e,3,t,Vy.min(),Vy.min(),Hv.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hv.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hv.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vy.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gv{constructor(e,t){this.position=e,this.inclusive=t}}function Qv(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Wy.comparator(Wy.fromName(o.referenceValue),n.key):Dv(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Yv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Av(e.position[n],t.position[n]))return!1;return!0}class Xv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Jv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Zv{}class e_ extends Zv{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new l_(e,t,n):"array-contains"===t?new d_(e,n):"in"===t?new f_(e,n):"not-in"===t?new p_(e,n):"array-contains-any"===t?new m_(e,n):new e_(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new c_(e,n):new u_(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dv(t,this.value)):null!==t&&Pv(this.value)===Pv(t)&&this.matchesComparison(Dv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xy()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class t_ extends Zv{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new t_(e,t)}matches(e){return n_(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function n_(e){return"and"===e.op}function r_(e){return i_(e)&&n_(e)}function i_(e){for(const t of e.filters)if(t instanceof t_)return!1;return!0}function s_(e){if(e instanceof e_)return e.field.canonicalString()+e.op.toString()+Mv(e.value);if(r_(e))return e.filters.map((e=>s_(e))).join(",");{const t=e.filters.map((e=>s_(e))).join(",");return`${e.op}(${t})`}}function o_(e,t){return e instanceof e_?function(e,t){return t instanceof e_&&e.op===t.op&&e.field.isEqual(t.field)&&Av(e.value,t.value)}(e,t):e instanceof t_?function(e,t){return t instanceof t_&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&o_(n,t.filters[r])),!0)}(e,t):void xy()}function a_(e){return e instanceof e_?function(e){return`${e.field.canonicalString()} ${e.op} ${Mv(e.value)}`}(e):e instanceof t_?function(e){return e.op.toString()+" {"+e.getFilters().map(a_).join(" ,")+"}"}(e):"Filter"}class l_ extends e_{constructor(e,t,n){super(e,t,n),this.key=Wy.fromName(n.referenceValue)}matches(e){const t=Wy.comparator(e.key,this.key);return this.matchesComparison(t)}}class c_ extends e_{constructor(e,t){super(e,"in",t),this.keys=h_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class u_ extends e_{constructor(e,t){super(e,"not-in",t),this.keys=h_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function h_(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Wy.fromName(e.referenceValue)))}class d_ extends e_{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uv(t)&&Ov(t.arrayValue,this.value)}}class f_ extends e_{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ov(this.value.arrayValue,t)}}class p_ extends e_{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ov(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ov(this.value.arrayValue,t)}}class m_ extends e_{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ov(this.value.arrayValue,e)))}}class g_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function y_(e){return new g_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function v_(e){const t=Ey(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>s_(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),iv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Mv(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Mv(e))).join(",")),t.dt=e}return t.dt}function __(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Jv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!o_(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yv(e.startAt,t.startAt)&&Yv(e.endAt,t.endAt)}function b_(e){return Wy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class w_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function x_(e,t,n,r,i,s,o,a){return new w_(e,t,n,r,i,s,o,a)}function k_(e){return new w_(e)}function E_(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function T_(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function C_(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function S_(e){return null!==e.collectionGroup}function I_(e){const t=Ey(e);if(null===t.wt){t.wt=[];const e=C_(t),n=T_(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Xv(e)),t.wt.push(new Xv(Hy.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Xv(Hy.keyField(),e))}}}return t.wt}function N_(e){const t=Ey(e);if(!t._t)if("F"===t.limitType)t._t=y_(t.path,t.collectionGroup,I_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of I_(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Xv(i.field,t))}const n=t.endAt?new Gv(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gv(t.startAt.position,t.startAt.inclusive):null;t._t=y_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function R_(e,t,n){return new w_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function P_(e,t){return __(N_(e),N_(t))&&e.limitType===t.limitType}function A_(e){return`${v_(N_(e))}|lt:${e.limitType}`}function O_(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>a_(e))).join(", ")}]`),iv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Mv(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Mv(e))).join(",")),`Target(${t})`}(N_(e))}; limitType=${e.limitType})`}function D_(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of I_(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Qv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,I_(e),t))&&!(e.endAt&&!function(e,t,n){const r=Qv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,I_(e),t))}(e,t)}function L_(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function M_(e){return(t,n)=>{let r=!1;for(const i of I_(e)){const e=j_(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function j_(e,t,n){const r=e.field.isKeyField()?Wy.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Dv(r,i):xy()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xy()}}class F_{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hv(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}const U_=new fv(Wy.comparator);function z_(){return U_}const V_=new fv(Wy.comparator);function B_(){let e=V_;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function q_(e){let t=V_;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $_(){return W_()}function H_(){return W_()}function W_(){return new F_((e=>e.toString()),((e,t)=>e.isEqual(t)))}const K_=new fv(Wy.comparator),G_=new gv(Wy.comparator);function Q_(){let e=G_;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Y_=new gv(Fy);function X_(){return Y_}function J_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sv(t)?"-0":t}}function Z_(e){return{integerValue:""+e}}function eb(e,t){return ov(t)?Z_(t):J_(e,t)}class tb{constructor(){this._=void 0}}function nb(e,t,n){return e instanceof sb?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Tv(t)&&(t=Cv(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ob?ab(e,t):e instanceof lb?cb(e,t):function(e,t){const n=ib(e,t),r=hb(n)+hb(e.gt);return Fv(n)&&Fv(e.gt)?Z_(r):J_(e.serializer,r)}(e,t)}function rb(e,t,n){return e instanceof ob?ab(e,t):e instanceof lb?cb(e,t):n}function ib(e,t){return e instanceof ub?Fv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class sb extends tb{}class ob extends tb{constructor(e){super(),this.elements=e}}function ab(e,t){const n=db(t);for(const r of e.elements)n.some((e=>Av(e,r)))||n.push(r);return{arrayValue:{values:n}}}class lb extends tb{constructor(e){super(),this.elements=e}}function cb(e,t){let n=db(t);for(const r of e.elements)n=n.filter((e=>!Av(e,r)));return{arrayValue:{values:n}}}class ub extends tb{constructor(e,t){super(),this.serializer=e,this.gt=t}}function hb(e){return kv(e.integerValue||e.doubleValue)}function db(e){return Uv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fb{constructor(e,t){this.field=e,this.transform=t}}class pb{constructor(e,t){this.version=e,this.transformResults=t}}class mb{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mb}static exists(e){return new mb(void 0,e)}static updateTime(e){return new mb(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class yb{}function vb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ib(e.key,mb.none()):new kb(e.key,e.data,mb.none());{const n=e.data,r=Hv.empty();let i=new gv(Hy.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Eb(e.key,r,new vv(i.toArray()),mb.none())}}function _b(e,t,n){e instanceof kb?function(e,t,n){const r=e.value.clone(),i=Cb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Eb?function(e,t,n){if(!gb(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Cb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Tb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function bb(e,t,n,r){return e instanceof kb?function(e,t,n,r){if(!gb(e.precondition,t))return n;const i=e.value.clone(),s=Sb(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Eb?function(e,t,n,r){if(!gb(e.precondition,t))return n;const i=Sb(e.fieldTransforms,r,t),s=t.data;return s.setAll(Tb(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return gb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function wb(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ib(r.transform,e||null);null!=i&&(null===n&&(n=Hv.empty()),n.set(r.field,i))}return n||null}function xb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Uy(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ob&&t instanceof ob||e instanceof lb&&t instanceof lb?Uy(e.elements,t.elements,Av):e instanceof ub&&t instanceof ub?Av(e.gt,t.gt):e instanceof sb&&t instanceof sb}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class kb extends yb{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Eb extends yb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Tb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Cb(e,t,n){const r=new Map;ky(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,rb(o,a,n[i]))}return r}function Sb(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,nb(e,s,t))}return r}class Ib extends yb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nb extends yb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rb{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&_b(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=bb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=bb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=H_();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=vb(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Vy.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Q_())}isEqual(e){return this.batchId===e.batchId&&Uy(this.mutations,e.mutations,((e,t)=>xb(e,t)))&&Uy(this.baseMutations,e.baseMutations,((e,t)=>xb(e,t)))}}class Pb{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ky(e.mutations.length===n.length);let r=K_;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Pb(e,t,n,r)}}class Ab{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ob{constructor(e,t){this.count=e,this.unchangedNames=t}}var Db,Lb;function Mb(e){switch(e){default:return xy();case Ty.CANCELLED:case Ty.UNKNOWN:case Ty.DEADLINE_EXCEEDED:case Ty.RESOURCE_EXHAUSTED:case Ty.INTERNAL:case Ty.UNAVAILABLE:case Ty.UNAUTHENTICATED:return!1;case Ty.INVALID_ARGUMENT:case Ty.NOT_FOUND:case Ty.ALREADY_EXISTS:case Ty.PERMISSION_DENIED:case Ty.FAILED_PRECONDITION:case Ty.ABORTED:case Ty.OUT_OF_RANGE:case Ty.UNIMPLEMENTED:case Ty.DATA_LOSS:return!0}}function jb(e){if(void 0===e)return _y("GRPC error has no .code"),Ty.UNKNOWN;switch(e){case Db.OK:return Ty.OK;case Db.CANCELLED:return Ty.CANCELLED;case Db.UNKNOWN:return Ty.UNKNOWN;case Db.DEADLINE_EXCEEDED:return Ty.DEADLINE_EXCEEDED;case Db.RESOURCE_EXHAUSTED:return Ty.RESOURCE_EXHAUSTED;case Db.INTERNAL:return Ty.INTERNAL;case Db.UNAVAILABLE:return Ty.UNAVAILABLE;case Db.UNAUTHENTICATED:return Ty.UNAUTHENTICATED;case Db.INVALID_ARGUMENT:return Ty.INVALID_ARGUMENT;case Db.NOT_FOUND:return Ty.NOT_FOUND;case Db.ALREADY_EXISTS:return Ty.ALREADY_EXISTS;case Db.PERMISSION_DENIED:return Ty.PERMISSION_DENIED;case Db.FAILED_PRECONDITION:return Ty.FAILED_PRECONDITION;case Db.ABORTED:return Ty.ABORTED;case Db.OUT_OF_RANGE:return Ty.OUT_OF_RANGE;case Db.UNIMPLEMENTED:return Ty.UNIMPLEMENTED;case Db.DATA_LOSS:return Ty.DATA_LOSS;default:return xy()}}(Lb=Db||(Db={}))[Lb.OK=0]="OK",Lb[Lb.CANCELLED=1]="CANCELLED",Lb[Lb.UNKNOWN=2]="UNKNOWN",Lb[Lb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lb[Lb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lb[Lb.NOT_FOUND=5]="NOT_FOUND",Lb[Lb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lb[Lb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lb[Lb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lb[Lb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lb[Lb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lb[Lb.ABORTED=10]="ABORTED",Lb[Lb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lb[Lb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lb[Lb.INTERNAL=13]="INTERNAL",Lb[Lb.UNAVAILABLE=14]="UNAVAILABLE",Lb[Lb.DATA_LOSS=15]="DATA_LOSS";class Fb{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ub}static getOrCreateInstance(){return null===Ub&&(Ub=new Fb),Ub}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Ub=null;function zb(){return new TextEncoder}const Vb=new dy([4294967295,4294967295],0);function Bb(e){const t=zb().encode(e),n=new hy;return n.update(t),new Uint8Array(n.digest())}function qb(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new dy([n,r],0),new dy([i,s],0)]}class $b{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Hb(`Invalid padding: ${t}`);if(n<0)throw new Hb(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Hb(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Hb(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=dy.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(dy.fromNumber(n)));return 1===r.compare(Vb)&&(r=new dy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Bb(e),[n,r]=qb(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new $b(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=Bb(e),[n,r]=qb(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Hb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wb{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Kb.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wb(Vy.min(),r,new fv(Fy),z_(),Q_())}}class Kb{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kb(n,t,Q_(),Q_(),Q_())}}class Gb{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Qb{constructor(e,t){this.targetId=e,this.Vt=t}}class Yb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bv.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Xb{constructor(){this.St=0,this.Dt=ew(),this.Ct=bv.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Q_(),t=Q_(),n=Q_();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xy()}})),new Kb(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=ew()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Jb{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=z_(),this.zt=Zb(),this.Wt=new fv(Fy)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:xy()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(b_(s))if(0===r){const e=new Wy(s.path);this.Yt(n,e,Kv.newNoDocument(e,Vy.min()))}else ky(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Fb.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Ev(i).toUint8Array()}catch(e){if(e instanceof _v)return by("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new $b(a,s,o)}catch(e){return by(e instanceof Hb?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&b_(i.target)){const t=new Wy(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Kv.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Q_();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new Wb(e,t,this.Wt,this.jt,n);return this.jt=z_(),this.zt=Zb(),this.Wt=new fv(Fy),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Xb,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new gv(Fy),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||vy("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Xb),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Zb(){return new fv(Wy.comparator)}function ew(){return new fv(Wy.comparator)}const tw={asc:"ASCENDING",desc:"DESCENDING"},nw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rw={and:"AND",or:"OR"};class iw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sw(e,t){return e.useProto3Json||iv(t)?t:{value:t}}function ow(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function lw(e,t){return ow(e,t.toTimestamp())}function cw(e){return ky(!!e),Vy.fromTimestamp(function(e){const t=xv(e);return new zy(t.seconds,t.nanos)}(e))}function uw(e,t){return function(e){return new qy(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function hw(e){const t=qy.fromString(e);return ky(Pw(t)),t}function dw(e,t){return uw(e.databaseId,t.path)}function fw(e,t){const n=hw(t);if(n.get(1)!==e.databaseId.projectId)throw new Cy(Ty.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Cy(Ty.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wy(yw(n))}function pw(e,t){return uw(e.databaseId,t)}function mw(e){const t=hw(e);return 4===t.length?qy.emptyPath():yw(t)}function gw(e){return new qy(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yw(e){return ky(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vw(e,t,n){return{name:dw(e,t),fields:n.value.mapValue.fields}}function _w(e,t){let n;if(t instanceof kb)n={update:vw(e,t.key,t.value)};else if(t instanceof Ib)n={delete:dw(e,t.key)};else if(t instanceof Eb)n={update:vw(e,t.key,t.data),updateMask:Rw(t.fieldMask)};else{if(!(t instanceof Nb))return xy();n={verify:dw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof sb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ob)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof lb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ub)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw xy()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:lw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xy()}(e,t.precondition)),n}function bw(e,t){return{documents:[pw(e,t.path)]}}function ww(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=pw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=pw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Nw(t_.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Sw(e.field),direction:Ew(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=sw(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xw(e){let t=mw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ky(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=kw(e);return t instanceof t_&&r_(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Xv(Iw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,iv(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Gv(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Gv(n,t)}(n.endAt)),x_(t,i,o,s,a,"F",l,c)}function kw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Iw(e.unaryFilter.field);return e_.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Iw(e.unaryFilter.field);return e_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Iw(e.unaryFilter.field);return e_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Iw(e.unaryFilter.field);return e_.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xy()}}(e):void 0!==e.fieldFilter?function(e){return e_.create(Iw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xy()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return t_.create(e.compositeFilter.filters.map((e=>kw(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xy()}}(e.compositeFilter.op))}(e):xy()}function Ew(e){return tw[e]}function Tw(e){return nw[e]}function Cw(e){return rw[e]}function Sw(e){return{fieldPath:e.canonicalString()}}function Iw(e){return Hy.fromServerFormat(e.fieldPath)}function Nw(e){return e instanceof e_?function(e){if("=="===e.op){if(Vv(e.value))return{unaryFilter:{field:Sw(e.field),op:"IS_NAN"}};if(zv(e.value))return{unaryFilter:{field:Sw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vv(e.value))return{unaryFilter:{field:Sw(e.field),op:"IS_NOT_NAN"}};if(zv(e.value))return{unaryFilter:{field:Sw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sw(e.field),op:Tw(e.op),value:e.value}}}(e):e instanceof t_?function(e){const t=e.getFilters().map((e=>Nw(e)));return 1===t.length?t[0]:{compositeFilter:{op:Cw(e.op),filters:t}}}(e):xy()}function Rw(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Pw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Aw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vy.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vy.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bv.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Aw(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Aw(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Aw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Aw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ow{constructor(e){this.fe=e}}function Dw(e){const t=xw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?R_(t,t.limit,"L"):t}class Lw{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(kv(e.integerValue));else if("doubleValue"in e){const n=kv(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),sv(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ev(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?$v(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):xy()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Wy.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Lw.Ve=new Lw;class Mw{constructor(){this.rn=new jw}addToCollectionParentIndex(e,t){return this.rn.add(t),tv.resolve()}getCollectionParents(e,t){return tv.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return tv.resolve()}deleteFieldIndex(e,t){return tv.resolve()}getDocumentsMatchingTarget(e,t){return tv.resolve(null)}getIndexType(e,t){return tv.resolve(0)}getFieldIndexes(e,t){return tv.resolve([])}getNextCollectionGroupToUpdate(e){return tv.resolve(null)}getMinOffset(e,t){return tv.resolve(Yy.min())}getMinOffsetFromCollectionGroup(e,t){return tv.resolve(Yy.min())}updateCollectionGroup(e,t,n){return tv.resolve()}updateIndexEntries(e,t){return tv.resolve()}}class jw{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gv(qy.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gv(qy.comparator)).toArray()}}new Uint8Array(0);class Fw{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Fw(e,Fw.DEFAULT_COLLECTION_PERCENTILE,Fw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Fw.DEFAULT_COLLECTION_PERCENTILE=10,Fw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fw.DEFAULT=new Fw(41943040,Fw.DEFAULT_COLLECTION_PERCENTILE,Fw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fw.DISABLED=new Fw(-1,0,0);class Uw{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Uw(0)}static Mn(){return new Uw(-1)}}class zw{constructor(){this.changes=new F_((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?tv.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bw{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&bb(n.mutation,e,vv.empty(),zy.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Q_()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q_();const r=$_();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=B_();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=$_();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Q_())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=z_();const s=W_(),o=W_();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Eb)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),bb(o.mutation,t,o.mutation.getFieldMask(),zy.now())):s.set(t.key,vv.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Vw(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=W_();let r=new fv(((e,t)=>e-t)),i=Q_();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||vv.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Q_()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=H_();l.forEach((e=>{if(!i.has(e)){const r=vb(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return tv.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Wy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):S_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):tv.resolve($_());let o=-1,a=i;return s.next((t=>tv.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?tv.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Q_()))).next((e=>({batchId:o,changes:q_(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Wy(t)).next((e=>{let t=B_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=B_();return this.indexManager.getCollectionParents(e,r).next((s=>tv.forEach(s,(s=>{const o=function(e,t){return new w_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Kv.newInvalidDocument(r)))}));let n=B_();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&bb(s.mutation,i,vv.empty(),zy.now()),D_(t,i)&&(n=n.insert(e,i))})),n}))}}class qw{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return tv.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:cw(n.createTime)}),tv.resolve()}getNamedQuery(e,t){return tv.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Dw(e.bundledQuery),readTime:cw(e.readTime)}}(t)),tv.resolve()}}class $w{constructor(){this.overlays=new fv(Wy.comparator),this.ls=new Map}getOverlay(e,t){return tv.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$_();return tv.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),tv.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),tv.resolve()}getOverlaysForCollection(e,t,n){const r=$_(),i=t.length+1,s=new Wy(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return tv.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new fv(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$_(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=$_(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return tv.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ab(t,n));let i=this.ls.get(t);void 0===i&&(i=Q_(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class Hw{constructor(){this.fs=new gv(Ww.ds),this.ws=new gv(Ww._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Ww(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new Ww(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Wy(new qy([])),n=new Ww(t,e),r=new Ww(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Wy(new qy([])),n=new Ww(t,e),r=new Ww(t,e+1);let i=Q_();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Ww(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ww{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Wy.comparator(e.key,t.key)||Fy(e.As,t.As)}static _s(e,t){return Fy(e.As,t.As)||Wy.comparator(e.key,t.key)}}class Kw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new gv(Ww.ds)}checkEmpty(e){return tv.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Rb(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new Ww(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return tv.resolve(s)}lookupMutationBatch(e,t){return tv.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return tv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return tv.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return tv.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ww(t,0),r=new Ww(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),tv.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gv(Fy);return t.forEach((e=>{const t=new Ww(e,0),r=new Ww(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),tv.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Wy.isDocumentKey(i)||(i=i.child(""));const s=new Ww(new Wy(i),0);let o=new gv(Fy);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),tv.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ky(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return tv.forEach(t.mutations,(r=>{const i=new Ww(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new Ww(t,0),r=this.Rs.firstAfterOrEqual(n);return tv.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,tv.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Gw{constructor(e){this.Ds=e,this.docs=new fv(Wy.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return tv.resolve(n?n.document.mutableCopy():Kv.newInvalidDocument(t))}getEntries(e,t){let n=z_();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Kv.newInvalidDocument(e))})),tv.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=z_();const s=t.path,o=new Wy(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Xy(Qy(o),n)<=0||(r.has(o.key)||D_(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return tv.resolve(i)}getAllFromCollectionGroup(e,t,n,r){xy()}Cs(e,t){return tv.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Qw(this)}getSize(e){return tv.resolve(this.size)}}class Qw extends zw{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),tv.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Yw{constructor(e){this.persistence=e,this.xs=new F_((e=>v_(e)),__),this.lastRemoteSnapshotVersion=Vy.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Hw,this.targetCount=0,this.Ms=Uw.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),tv.resolve()}getLastRemoteSnapshotVersion(e){return tv.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tv.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),tv.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),tv.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Uw(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,tv.resolve()}updateTargetData(e,t){return this.Fn(t),tv.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,tv.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),tv.waitFor(i).next((()=>r))}getTargetCount(e){return tv.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return tv.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),tv.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),tv.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),tv.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return tv.resolve(n)}containsKey(e,t){return tv.resolve(this.ks.containsKey(t))}}class Xw{constructor(e,t){this.$s={},this.overlays={},this.Os=new rv(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Yw(this),this.indexManager=new Mw,this.remoteDocumentCache=function(e){return new Gw(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Ow(t),this.qs=new qw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $w,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Kw(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){vy("MemoryPersistence","Starting transaction:",e);const r=new Jw(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return tv.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class Jw extends Zy{constructor(e){super(),this.currentSequenceNumber=e}}class Zw{constructor(e){this.persistence=e,this.Qs=new Hw,this.js=null}static zs(e){return new Zw(e)}get Ws(){if(this.js)return this.js;throw xy()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),tv.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),tv.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),tv.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tv.forEach(this.Ws,(n=>{const r=Wy.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Vy.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return tv.or([()=>tv.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ex{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Q_(),r=Q_();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ex(e,t.fromCache,n,r)}}class tx{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(E_(t))return tv.resolve(null);let n=N_(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=R_(t,null,"F"),n=N_(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Q_(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,R_(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return E_(t)||r.isEqual(Vy.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(yy()<=Rt.DEBUG&&vy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),O_(t)),this.Wi(e,s,t,Gy(r,-1)))}))}ji(e,t){let n=new gv(M_(e));return t.forEach(((t,r)=>{D_(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return yy()<=Rt.DEBUG&&vy("QueryEngine","Using full collection scan to execute query:",O_(t)),this.Ui.getDocumentsMatchingQuery(e,t,Yy.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class nx{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new fv(Fy),this.Yi=new F_((e=>v_(e)),__),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bw(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function rx(e,t,n,r){return new nx(e,t,n,r)}async function ix(e,t){const n=Ey(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Q_();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function sx(e){const t=Ey(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function ox(e,t,n){let r=Q_(),i=Q_();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=z_();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Vy.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):vy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function ax(e,t){const n=Ey(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function lx(e,t){const n=Ey(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,tv.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Aw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function cx(e,t,n){const r=Ey(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!nv(e))throw e;vy("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function ux(e,t,n){const r=Ey(e);let i=Vy.min(),s=Q_();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Ey(e),i=r.Yi.get(n);return void 0!==i?tv.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,N_(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Vy.min(),n?s:Q_()))).next((e=>(hx(r,L_(t),e),{documents:e,ir:s})))))}function hx(e,t,n){let r=e.Xi.get(t)||Vy.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class dx{constructor(){this.activeTargetIds=X_()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fx{constructor(){this.Hr=new dx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new dx,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class px{Yr(e){}shutdown(){}}class mx{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){vy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){vy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gx=null;function yx(){return null===gx?gx=268435456+Math.round(2147483648*Math.random()):gx++,"0x"+gx.toString(16)}const vx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _x{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const bx="WebChannelConnection";class wx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=yx(),o=this.To(e,t);vy("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(vy("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw by("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+my,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=vx[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=yx();return new Promise(((s,o)=>{const a=new uy;a.setWithCredentials(!0),a.listenOnce(sy.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case iy.NO_ERROR:const t=a.getResponseJson();vy(bx,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case iy.TIMEOUT:vy(bx,`RPC '${e}' ${i} timed out`),o(new Cy(Ty.DEADLINE_EXCEEDED,"Request time out"));break;case iy.HTTP_ERROR:const n=a.getStatus();if(vy(bx,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ty).indexOf(t)>=0?t:Ty.UNKNOWN}(t.status);o(new Cy(e,t.message))}else o(new Cy(Ty.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Cy(Ty.UNAVAILABLE,"Connection failed."));break;default:xy()}}finally{vy(bx,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);vy(bx,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=yx(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ny(),o=ry(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new ly({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");vy(bx,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new _x({ro:t=>{d?vy(bx,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(vy(bx,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),vy(bx,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,cy.EventType.OPEN,(()=>{d||vy(bx,`RPC '${e}' stream ${r} transport opened.`)})),p(u,cy.EventType.CLOSE,(()=>{d||(d=!0,vy(bx,`RPC '${e}' stream ${r} transport closed`),f.wo())})),p(u,cy.EventType.ERROR,(t=>{d||(d=!0,by(bx,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Cy(Ty.UNAVAILABLE,"The operation could not be completed")))})),p(u,cy.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ky(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){vy(bx,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Db[e];if(void 0!==t)return jb(t)}(t),i=o.message;void 0===n&&(n=Ty.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Cy(n,i)),u.close()}else vy(bx,`RPC '${e}' stream ${r} received:`,i),f._o(i)}})),p(o,oy.STAT_EVENT,(t=>{t.stat===ay.PROXY?vy(bx,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ay.NOPROXY&&vy(bx,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function xx(){return"undefined"!=typeof document?document:null}function kx(e){return new iw(e,!0)}class Ex{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&vy("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Tx{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Ex(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Ty.RESOURCE_EXHAUSTED?(_y(t.toString()),_y("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Ty.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Cy(Ty.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return vy("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(vy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cx extends Tx{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xy()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ky(void 0===t||"string"==typeof t),bv.fromBase64String(t||"")):(ky(void 0===t||t instanceof Uint8Array),bv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ty.UNKNOWN:jb(e.code);return new Cy(t,e.message||"")}(o);n=new Yb(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=fw(e,r.document.name),s=cw(r.document.updateTime),o=r.document.createTime?cw(r.document.createTime):Vy.min(),a=new Hv({mapValue:{fields:r.document.fields}}),l=Kv.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Gb(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=fw(e,r.document),s=r.readTime?cw(r.readTime):Vy.min(),o=Kv.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Gb([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=fw(e,r.document),s=r.removedTargetIds||[];n=new Gb([],s,i,null)}else{if(!("filter"in t))return xy();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ob(r,i),o=e.targetId;n=new Qb(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Vy.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vy.min():t.readTime?cw(t.readTime):Vy.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=gw(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=b_(r)?{documents:bw(e,r)}:{query:ww(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=aw(e,t.resumeToken);const r=sw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Vy.min())>0){n.readTime=ow(e,t.snapshotVersion.toTimestamp());const r=sw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xy()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=gw(this.serializer),t.removeTarget=e,this.Wo(t)}}class Sx extends Tx{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ky(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(ky(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?cw(e.updateTime):cw(t);return n.isEqual(Vy.min())&&(n=cw(t)),new pb(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=cw(e.commitTime);return this.listener.cu(n,t)}return ky(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=gw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>_w(this.serializer,e)))};this.Wo(t)}}class Ix extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Cy(Ty.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ty.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Cy(Ty.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ty.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Cy(Ty.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Nx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(_y(t),this.mu=!1):vy("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Rx{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Ux(this)&&(vy("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ey(e);t.vu.add(4),await Ax(t),t.bu.set("Unknown"),t.vu.delete(4),await Px(t)}(this))}))})),this.bu=new Nx(n,r)}}async function Px(e){if(Ux(e))for(const t of e.Ru)await t(!0)}async function Ax(e){for(const t of e.Ru)await t(!1)}function Ox(e,t){const n=Ey(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Fx(n)?jx(n):rk(n).Ko()&&Lx(n,t))}function Dx(e,t){const n=Ey(e),r=rk(n);n.Au.delete(t),r.Ko()&&Mx(n,t),0===n.Au.size&&(r.Ko()?r.jo():Ux(n)&&n.bu.set("Unknown"))}function Lx(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vy.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rk(e).su(t)}function Mx(e,t){e.Vu.qt(t),rk(e).iu(t)}function jx(e){e.Vu=new Jb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),rk(e).start(),e.bu.gu()}function Fx(e){return Ux(e)&&!rk(e).Uo()&&e.Au.size>0}function Ux(e){return 0===Ey(e).vu.size}function zx(e){e.Vu=void 0}async function Vx(e){e.Au.forEach(((t,n)=>{Lx(e,t)}))}async function Bx(e,t){zx(e),Fx(e)?(e.bu.Iu(t),jx(e)):e.bu.set("Unknown")}async function qx(e,t,n){if(e.bu.set("Online"),t instanceof Yb&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){vy("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await $x(e,n)}else if(t instanceof Gb?e.Vu.Ht(t):t instanceof Qb?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Vy.min()))try{const t=await sx(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(bv.EMPTY_BYTE_STRING,r.snapshotVersion)),Mx(e,t);const i=new Aw(r.target,t,n,r.sequenceNumber);Lx(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){vy("RemoteStore","Failed to raise snapshot:",t),await $x(e,t)}}async function $x(e,t,n){if(!nv(t))throw t;e.vu.add(1),await Ax(e),e.bu.set("Offline"),n||(n=()=>sx(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{vy("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Px(e)}))}function Hx(e,t){return t().catch((n=>$x(e,n,t)))}async function Wx(e){const t=Ey(e),n=ik(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Kx(t);)try{const e=await ax(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Gx(t,e)}catch(e){await $x(t,e)}Qx(t)&&Yx(t)}function Kx(e){return Ux(e)&&e.Eu.length<10}function Gx(e,t){e.Eu.push(t);const n=ik(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Qx(e){return Ux(e)&&!ik(e).Uo()&&e.Eu.length>0}function Yx(e){ik(e).start()}async function Xx(e){ik(e).hu()}async function Jx(e){const t=ik(e);for(const n of e.Eu)t.uu(n.mutations)}async function Zx(e,t,n){const r=e.Eu.shift(),i=Pb.from(r,t,n);await Hx(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Wx(e)}async function ek(e,t){t&&ik(e).ou&&await async function(e,t){if(Mb(n=t.code)&&n!==Ty.ABORTED){const n=e.Eu.shift();ik(e).Qo(),await Hx(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Wx(e)}var n}(e,t),Qx(e)&&Yx(e)}async function tk(e,t){const n=Ey(e);n.asyncQueue.verifyOperationInProgress(),vy("RemoteStore","RemoteStore received new credentials");const r=Ux(n);n.vu.add(3),await Ax(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Px(n)}async function nk(e,t){const n=Ey(e);t?(n.vu.delete(2),await Px(n)):t||(n.vu.add(2),await Ax(n),n.bu.set("Unknown"))}function rk(e){return e.Su||(e.Su=function(e,t,n){const r=Ey(e);return r.fu(),new Cx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Vx.bind(null,e),ao:Bx.bind(null,e),nu:qx.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Fx(e)?jx(e):e.bu.set("Unknown")):(await e.Su.stop(),zx(e))}))),e.Su}function ik(e){return e.Du||(e.Du=function(e,t,n){const r=Ey(e);return r.fu(),new Sx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Xx.bind(null,e),ao:ek.bind(null,e),au:Jx.bind(null,e),cu:Zx.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await Wx(e)):(await e.Du.stop(),e.Eu.length>0&&(vy("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))}))),e.Du}class sk{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Sy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new sk(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Cy(Ty.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ok(e,t){if(_y("AsyncQueue",`${t}: ${e}`),nv(e))return new Cy(Ty.UNAVAILABLE,`${t}: ${e}`);throw e}class ak{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Wy.comparator(t.key,n.key):(e,t)=>Wy.comparator(e.key,t.key),this.keyedMap=B_(),this.sortedSet=new fv(this.comparator)}static emptySet(e){return new ak(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ak))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ak;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class lk{constructor(){this.Cu=new fv(Wy.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):xy():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ck{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new ck(e,t,ak.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&P_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class uk{constructor(){this.Nu=void 0,this.listeners=[]}}class hk{constructor(){this.queries=new F_((e=>A_(e)),P_),this.onlineState="Unknown",this.ku=new Set}}async function dk(e,t){const n=Ey(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new uk),i)try{s.Nu=await n.onListen(r)}catch(e){const n=ok(e,`Initialization of query '${O_(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&gk(n)}async function fk(e,t){const n=Ey(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function pk(e,t){const n=Ey(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&gk(n)}function mk(e,t,n){const r=Ey(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function gk(e){e.ku.forEach((e=>{e.next()}))}class yk{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ck(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=ck.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class vk{constructor(e){this.key=e}}class _k{constructor(e){this.key=e}}class bk{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Q_(),this.mutatedKeys=Q_(),this.tc=M_(e),this.ec=new ak(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new lk,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=D_(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xy()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new ck(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new lk,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Q_(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new _k(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new vk(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Q_();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return ck.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class wk{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class xk{constructor(e){this.key=e,this.fc=!1}}class kk{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new F_((e=>A_(e)),P_),this._c=new Map,this.mc=new Set,this.gc=new fv(Wy.comparator),this.yc=new Map,this.Ic=new Hw,this.Tc={},this.Ec=new Map,this.Ac=Uw.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Ek(e,t){const n=Bk(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await lx(n.localStore,N_(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Tk(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Ox(n.remoteStore,e)}return i}async function Tk(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await ux(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Mk(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await ux(e.localStore,t,!0),o=new bk(t,s.ir),a=o.sc(s.documents),l=Kb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Mk(e,n,c.cc);const u=new wk(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Ck(e,t){const n=Ey(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!P_(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await cx(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Dx(n.remoteStore,r.targetId),Dk(n,r.targetId)})).catch(ev)):(Dk(n,r.targetId),await cx(n.localStore,r.targetId,!0))}async function Sk(e,t){const n=Ey(e);try{const e=await function(e,t){const n=Ey(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(bv.EMPTY_BYTE_STRING,Vy.min()).withLastLimboFreeSnapshotVersion(Vy.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Bs.updateTargetData(e,c))}));let a=z_(),l=Q_();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ox(e,s,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(Vy.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return tv.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(ky(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?ky(r.fc):e.removedDocuments.size>0&&(ky(r.fc),r.fc=!1))})),await Uk(n,e,t)}catch(e){await ev(e)}}function Ik(e,t,n){const r=Ey(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ey(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&gk(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Nk(e,t,n){const r=Ey(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new fv(Wy.comparator);e=e.insert(s,Kv.newNoDocument(s,Vy.min()));const n=Q_().add(s),i=new Wb(Vy.min(),new Map,new fv(Fy),e,n);await Sk(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Fk(r)}else await cx(r.localStore,t,!1).then((()=>Dk(r,t,n))).catch(ev)}async function Rk(e,t){const n=Ey(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ey(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=tv.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ky(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Q_();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ok(n,r,null),Ak(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uk(n,e)}catch(e){await ev(e)}}async function Pk(e,t,n){const r=Ey(e);try{const e=await function(e,t){const n=Ey(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ky(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ok(r,t,n),Ak(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Uk(r,e)}catch(n){await ev(n)}}function Ak(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Ok(e,t,n){const r=Ey(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Dk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Lk(e,t)}))}function Lk(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Dx(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Fk(e))}function Mk(e,t,n){for(const r of n)r instanceof vk?(e.Ic.addReference(r.key,t),jk(e,r)):r instanceof _k?(vy("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Lk(e,r.key)):xy()}function jk(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(vy("SyncEngine","New document in limbo: "+n),e.mc.add(r),Fk(e))}function Fk(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Wy(qy.fromString(t)),r=e.Ac.next();e.yc.set(r,new xk(n)),e.gc=e.gc.insert(n,r),Ox(e.remoteStore,new Aw(N_(k_(n.path)),r,"TargetPurposeLimboResolution",rv.ct))}}async function Uk(e,t,n){const r=Ey(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=ex.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Ey(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>tv.forEach(t,(t=>tv.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>tv.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!nv(e))throw e;vy("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function zk(e,t){const n=Ey(e);if(!n.currentUser.isEqual(t)){vy("SyncEngine","User change. New user:",t.toKey());const e=await ix(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Cy(Ty.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Uk(n,e.er)}}function Vk(e,t){const n=Ey(e),r=n.yc.get(t);if(r&&r.fc)return Q_().add(r.key);{let e=Q_();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function Bk(e){const t=Ey(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Sk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nk.bind(null,t),t.dc.nu=pk.bind(null,t.eventManager),t.dc.Pc=mk.bind(null,t.eventManager),t}function qk(e){const t=Ey(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Pk.bind(null,t),t}class $k{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=kx(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return rx(this.persistence,new tx,e.initialUser,this.serializer)}createPersistence(e){return new Xw(Zw.zs,this.serializer)}createSharedClientState(e){return new fx}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Hk{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ik(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=zk.bind(null,this.syncEngine),await nk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hk}createDatastore(e){const t=kx(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new wx(r));var r;return function(e,t,n,r){return new Ix(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Ik(this.syncEngine,e,0),s=mx.D()?new mx:new px,new Rx(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new kk(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ey(e);vy("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Ax(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class Wk{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):_y("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Kk{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=py.UNAUTHENTICATED,this.clientId=jy.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{vy("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(vy("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Cy(Ty.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(hS){const n=ok(hS,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Gk(e,t){e.asyncQueue.verifyOperationInProgress(),vy("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ix(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Qk(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Xk(e);vy("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>tk(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>tk(t.remoteStore,n))),e._onlineComponents=t}function Yk(e){return"FirebaseError"===e.name?e.code===Ty.FAILED_PRECONDITION||e.code===Ty.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Xk(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vy("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gk(e,e._uninitializedComponentsProvider._offline)}catch(hS){const n=hS;if(!Yk(n))throw n;by("Error using user provided cache. Falling back to memory cache: "+n),await Gk(e,new $k)}}else vy("FirestoreClient","Using default OfflineComponentProvider"),await Gk(e,new $k);return e._offlineComponents}async function Jk(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vy("FirestoreClient","Using user provided OnlineComponentProvider"),await Qk(e,e._uninitializedComponentsProvider._online)):(vy("FirestoreClient","Using default OnlineComponentProvider"),await Qk(e,new Hk))),e._onlineComponents}function Zk(e){return Jk(e).then((e=>e.syncEngine))}async function eE(e){const t=await Jk(e),n=t.eventManager;return n.onListen=Ek.bind(null,t.syncEngine),n.onUnlisten=Ck.bind(null,t.syncEngine),n}function tE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sy;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Wk({next:s=>{t.enqueueAndForget((()=>fk(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Cy(Ty.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Cy(Ty.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new yk(k_(n.path),s,{includeMetadataChanges:!0,Ku:!0});return dk(e,o)}(await eE(e),e.asyncQueue,t,n,r))),r.promise}function nE(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const rE=new Map;function iE(e,t,n){if(!n)throw new Cy(Ty.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function sE(e){if(!Wy.isDocumentKey(e))throw new Cy(Ty.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function oE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":xy()}function aE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Cy(Ty.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oE(e);throw new Cy(Ty.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class lE{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Cy(Ty.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Cy(Ty.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Cy(Ty.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nE(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Cy(Ty.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Cy(Ty.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Cy(Ty.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class cE{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Cy(Ty.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Cy(Ty.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ny;switch(e.type){case"firstParty":return new Oy(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Cy(Ty.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rE.get(e);t&&(vy("ComponentProvider","Removing Datastore"),rE.delete(e),t.terminate())}(this),Promise.resolve()}}class uE{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uE(this.firestore,e,this._key)}}class hE{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hE(this.firestore,e,this._query)}}class dE extends hE{constructor(e,t,n){super(e,t,k_(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uE(this.firestore,null,new Wy(e))}withConverter(e){return new dE(this.firestore,e,this._path)}}function fE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Et(e),1===arguments.length&&(t=jy.A()),iE("doc","path",t),e instanceof cE){const n=qy.fromString(t,...r);return sE(n),new uE(e,null,new Wy(n))}{if(!(e instanceof uE||e instanceof dE))throw new Cy(Ty.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(qy.fromString(t,...r));return sE(n),new uE(e.firestore,e instanceof dE?e.converter:null,new Wy(n))}}class pE{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Ex(this,"async_queue_retry"),this.Xc=()=>{const e=xx();e&&vy("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=xx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=xx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Sy;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!nv(e))throw e;vy("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw _y("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=sk.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&xy()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class mE extends cE{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new pE,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yE(this),this._firestoreClient.terminate()}}function gE(e){return e._firestoreClient||yE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function yE(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Iv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,nE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Kk(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class vE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vE(bv.fromBase64String(e))}catch(e){throw new Cy(Ty.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vE(bv.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _E{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Cy(Ty.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hy(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bE{constructor(e){this._methodName=e}}class wE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Cy(Ty.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Cy(Ty.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fy(this._lat,e._lat)||Fy(this._long,e._long)}}const xE=/^__.*__$/;class kE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Eb(e,this.data,this.fieldMask,t,this.fieldTransforms):new kb(e,this.data,t,this.fieldTransforms)}}class EE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Eb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xy()}}class CE{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new CE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return BE(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(TE(this.ca)&&xE.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class SE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kx(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new CE({ca:e,methodName:t,ga:n,path:Hy.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IE(e){const t=e._freezeSettings(),n=kx(e._databaseId);return new SE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function NE(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);FE("Data must be an object, but it was:",o,r);const a=ME(r,o);let l,c;if(s.merge)l=new vv(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=UE(t,r,n);if(!o.contains(i))throw new Cy(Ty.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);qE(e,i)||e.push(i)}l=new vv(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new kE(new Hv(a),l,c)}class RE extends bE{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof RE}}function PE(e,t,n){return new CE({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class AE extends bE{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=PE(this,e,!0),n=this.pa.map((e=>LE(e,t))),r=new ob(n);return new fb(e.path,r)}isEqual(e){return this===e}}function OE(e,t,n,r){const i=e.ya(1,t,n);FE("Data must be an object, but it was:",i,r);const s=[],o=Hv.empty();hv(r,((e,r)=>{const a=VE(t,e,n);r=Et(r);const l=i.da(a);if(r instanceof RE)s.push(a);else{const e=LE(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new vv(s);return new EE(o,a,i.fieldTransforms)}function DE(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[UE(t,r,n)],l=[i];if(s.length%2!=0)throw new Cy(Ty.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(UE(t,s[d])),l.push(s[d+1]);const c=[],u=Hv.empty();for(let d=a.length-1;d>=0;--d)if(!qE(c,a[d])){const e=a[d];let t=l[d];t=Et(t);const n=o.da(e);if(t instanceof RE)c.push(e);else{const r=LE(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new vv(c);return new EE(u,h,o.fieldTransforms)}function LE(e,t){if(jE(e=Et(e)))return FE("Unsupported field value:",t,e),ME(e,t);if(e instanceof bE)return function(e,t){if(!TE(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=LE(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Et(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return eb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=zy.fromDate(e);return{timestampValue:ow(t.serializer,n)}}if(e instanceof zy){const n=new zy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ow(t.serializer,n)}}if(e instanceof wE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vE)return{bytesValue:aw(t.serializer,e._byteString)};if(e instanceof uE){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:uw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${oE(e)}`)}(e,t)}function ME(e,t){const n={};return dv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hv(e,((e,r)=>{const i=LE(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof zy||e instanceof wE||e instanceof vE||e instanceof uE||e instanceof bE)}function FE(e,t,n){if(!jE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=oE(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function UE(e,t,n){if((t=Et(t))instanceof _E)return t._internalPath;if("string"==typeof t)return VE(e,t);throw BE("Field path arguments must be of type string or ",e,!1,void 0,n)}const zE=new RegExp("[~\\*/\\[\\]]");function VE(e,t,n){if(t.search(zE)>=0)throw BE(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new _E(...t.split("."))._internalPath}catch(r){throw BE(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function BE(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Cy(Ty.INVALID_ARGUMENT,a+e+l)}function qE(e,t){return e.some((e=>e.isEqual(t)))}class $E{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new uE(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class HE extends $E{data(){return super.data()}}function WE(e,t){return"string"==typeof t?VE(e,t):t instanceof _E?t._internalPath:t._delegate._internalPath}class KE{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ev(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xy()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return hv(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new wE(kv(e.latitude),kv(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Cv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sv(e));default:return null}}convertTimestamp(e){const t=xv(e);return new zy(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=qy.fromString(e);ky(Pw(n));const r=new Nv(n.get(1),n.get(3)),i=new Wy(n.popFirst(5));return r.isEqual(t)||_y(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function GE(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class QE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YE extends $E{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new XE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(WE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class XE extends YE{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}function JE(e){e=aE(e,uE);const t=aE(e.firestore,mE);return tE(gE(t),e._key).then((n=>nT(t,e,n)))}class ZE extends KE{constructor(e){super(),this.firestore=e}convertBytes(e){return new vE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uE(this.firestore,null,t)}}function eT(e,t,n){e=aE(e,uE);const r=aE(e.firestore,mE),i=GE(e.converter,t,n);return tT(r,[NE(IE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,mb.none())])}function tT(e,t){return function(e,t){const n=new Sy;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=qk(e);try{const e=await function(e,t){const n=Ey(e),r=zy.now(),i=t.reduce(((e,t)=>e.add(t.key)),Q_());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=z_(),l=Q_();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=wb(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Eb(e.key,t,Wv(t.value.mapValue),mb.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:q_(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new fv(Fy)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Uk(r,e.changes),await Wx(r.remoteStore)}catch(e){const t=ok(e,"Failed to persist write");n.reject(t)}}(await Zk(e),t,n))),n.promise}(gE(e),t)}function nT(e,t,n){const r=n.docs.get(t._key),i=new ZE(e);return new YE(e,i,t._key,r,new QE(n.hasPendingWrites,n.fromCache),t.converter)}function rT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AE("arrayUnion",t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){my=e}(Mn),An(new Tt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new mE(new Py(e.getProvider("auth-internal")),new Ly(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Cy(Ty.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nv(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Un(fy,"3.13.0",e),Un(fy,"3.13.0","esm2017")}();const iT=jn({apiKey:"AIzaSyBgxnV_AGydX3z2SNAzpH66qNmyKHvoKs4",authDomain:"schoolapp-c2f68.firebaseapp.com",databaseURL:"https://schoolapp-c2f68-default-rtdb.firebaseio.com",projectId:"schoolapp-c2f68",storageBucket:"schoolapp-c2f68.appspot.com",messagingSenderId:"217519489759",appId:"1:217519489759:web:1b26607449f211cf4b1f6a",measurementId:"G-NZ1WHRQ6QL"}),sT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();const t=On(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=On(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(pt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Rl(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:wh,persistence:[Du,yu,_u]}),r=Qe("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Th)return;const r=null===t||void 0===t?void 0:t.token;Ch!==r&&(Ch=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Et(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){Et(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=We("auth");return s&&Uc(n,`http://${s}`),n}(iT),oT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn(),t=arguments.length>1?arguments[1]:void 0;const n=On(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Ke("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Et(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&pr("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ar(Ar.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Xe(r.mockUserToken,e.app.options.projectId);s=new Ar(t)}!function(e,t,n,r){e.repoInfo_=new Fr(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}(iT),aT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn(),t=arguments.length>1?arguments[1]:void 0;e=Et(e);const n=On(e,Bd).getImmediate({identifier:t}),r=Ke("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Xe(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(iT),lT=function(e,t){const n="string"==typeof e?e:t||"(default)",r=On("object"==typeof e?e:Fn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Ke("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=aE(e,cE))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&by("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=py.MOCK_USER;else{t=Xe(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Cy(Ty.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new py(s)}e._authCredentials=new Ry(new Iy(t,n))}}(r,...e)}return r}(iT);function cT(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=cT(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const uT=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=cT(e))&&(r&&(r+=" "),r+=t);return r};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var hT=e=>"number"==typeof e&&!isNaN(e),dT=e=>"string"==typeof e,fT=e=>"function"==typeof e,pT=e=>dT(e)||fT(e)?e:null,mT=(e,t)=>!1===e||hT(e)&&e>0?e:t,gT=e=>(0,i.isValidElement)(e)||dT(e)||fT(e)||hT(e);function yT(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:o=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:h,isIn:d,playToast:f}=e,p=r?`${t}--${l}`:t,m=r?`${n}--${l}`:n,g=(0,i.useRef)(0);return(0,i.useLayoutEffect)((()=>{let e=h.current,t=p.split(" "),n=r=>{r.target===h.current&&(f(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,i.useEffect)((()=>{let e=h.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,u,o):u()};d||(c?t():(g.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))}),[d]),i.createElement(i.Fragment,null,a)}}function vT(e,t){return{content:_T(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function _T(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,i.isValidElement)(e)&&!dT(e.type)?(0,i.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):fT(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function bT(e){let{delay:t,isRunning:n,closeToast:r,type:s="default",hide:o,className:a,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:d}=e,f=o||l&&0===c,p={animationDuration:`${t}ms`,animationPlayState:n?"running":"paused"};l&&(p.transform=`scaleX(${c})`);let m=uT("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":u}),g=fT(a)?a({rtl:u,type:s,defaultClassName:m}):uT(m,a),y={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&r()}};return i.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},i.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),i.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:g,style:p,...y}))}var wT=1,xT=()=>""+wT++;function kT(e,t,n){let r=1,i=0,s=[],o=[],a=t,l=new Map,c=new Set,u=()=>{o=Array.from(l.values()),c.forEach((e=>e()))},h=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},d=e=>{if(null==e)l.forEach(h);else{let t=l.get(e);t&&h(t)}u()},f=e=>{var t,r;let{toastId:i,updateId:s}=e.props,o=null==s;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(i,e),u(),n(vT(e,o?"added":"updated")),o&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:a,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:d,toasts:l,clearQueue:()=>{i-=s.length,s=[]},buildToast:(t,o)=>{if((t=>{let{containerId:n,toastId:r,updateId:i}=t,s=n?n!==e:1!==e,o=l.has(r)&&null==i;return s||o})(o))return;let{toastId:c,updateId:h,data:p,staleId:m,delay:g}=o,y=null==h;y&&i++;let v={...a,style:a.toastStyle,key:r++,...Object.fromEntries(Object.entries(o).filter((e=>{let[t,n]=e;return null!=n}))),toastId:c,updateId:h,data:p,isIn:!1,className:pT(o.className||a.toastClassName),progressClassName:pT(o.progressClassName||a.progressClassName),autoClose:!o.isLoading&&mT(o.autoClose,a.autoClose),closeToast(e){l.get(c).removalReason=e,d(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(vT(e,"removed")),l.delete(c),i--,i<0&&(i=0),s.length>0)return void f(s.shift());u()}}};v.closeButton=a.closeButton,!1===o.closeButton||gT(o.closeButton)?v.closeButton=o.closeButton:!0===o.closeButton&&(v.closeButton=!gT(a.closeButton)||a.closeButton);let _={content:t,props:v,staleId:m};a.limit&&a.limit>0&&i>a.limit&&y?s.push(_):hT(g)?setTimeout((()=>{f(_)}),g):f(_)},setProps(e){a=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>o}}var ET=new Map,TT=[],CT=new Set,ST=e=>CT.forEach((t=>t(e))),IT=()=>ET.size>0;function NT(e,t){var n;if(t)return!(null==(n=ET.get(t))||!n.isToastActive(e));let r=!1;return ET.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function RT(e){if(IT()){if(null==e||(e=>dT(e)||hT(e))(e))ET.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=ET.get(e.containerId);t?t.removeToast(e.id):ET.forEach((t=>{t.removeToast(e.id)}))}}else TT=TT.filter((t=>null!=e&&t.options.toastId!==e))}function PT(e,t){gT(e)&&(IT()||TT.push({content:e,options:t}),ET.forEach((n=>{n.buildToast(e,t)})))}function AT(e,t){ET.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function OT(e){let t=e.containerId||1;return{subscribe(n){let r=kT(t,e,ST);ET.set(t,r);let i=r.observe(n);return TT.forEach((e=>PT(e.content,e.options))),TT=[],()=>{i(),ET.delete(t)}},setProps(e){var n;null==(n=ET.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=ET.get(t))?void 0:e.getSnapshot()}}}function DT(e){return e&&(dT(e.toastId)||hT(e.toastId))?e.toastId:xT()}function LT(e,t){return PT(e,t),t.toastId}function MT(e,t){return{...t,type:t&&t.type||e,toastId:DT(t)}}function jT(e){return(t,n)=>LT(t,MT(e,n))}function FT(e,t){return LT(e,MT("default",t))}function UT(e){let[t,n]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),o=(0,i.useRef)(null),a=(0,i.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:h,closeOnClick:d}=e;function f(){n(!0)}function p(){n(!1)}function m(n){let r=o.current;if(a.canDrag&&r){a.didMove=!0,t&&p(),"x"===e.draggableDirection?a.delta=n.clientX-a.start:a.delta=n.clientY-a.start,a.start!==n.clientX&&(a.canCloseOnClick=!1);let i="x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;r.style.transform=`translate3d(${i},0)`,r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance))}}function g(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g);let t=o.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return s(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=ET.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,i.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||p(),window.addEventListener("focus",f),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",p)}}),[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",g);let n=o.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:i,right:s}=o.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=i&&t.clientX<=s&&t.clientY>=n&&t.clientY<=r?p():f()}};return l&&c&&(y.onMouseEnter=p,e.stacked||(y.onMouseLeave=f)),d&&(y.onClick=e=>{h&&h(e),a.canCloseOnClick&&u(!0)}),{playToast:f,pauseToast:p,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:y}}FT.loading=(e,t)=>LT(e,MT("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),FT.promise=function(e,t,n){let r,{pending:i,error:s,success:o}=t;i&&(r=dT(i)?FT.loading(i,n):FT.loading(i.render,{...n,...i}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void FT.dismiss(r);let s={type:e,...a,...n,data:i},o=dT(t)?{render:t}:t;return r?FT.update(r,{...s,...o}):FT(o.render,{...s,...o}),i},c=fT(e)?e():e;return c.then((e=>l("success",o,e))).catch((e=>l("error",s,e))),c},FT.success=jT("success"),FT.info=jT("info"),FT.error=jT("error"),FT.warning=jT("warning"),FT.warn=FT.warning,FT.dark=(e,t)=>LT(e,MT("default",{theme:"dark",...t})),FT.dismiss=function(e){RT(e)},FT.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ET.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},FT.isActive=NT,FT.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=ET.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:xT()};s.toastId!==e&&(s.staleId=e);let o=s.render||i;delete s.render,LT(o,s)}},FT.done=e=>{FT.update(e,{progress:1})},FT.onChange=function(e){return CT.add(e),()=>{CT.delete(e)}},FT.play=e=>AT(!0,e),FT.pause=e=>AT(!1,e);var zT="undefined"!=typeof window?i.useLayoutEffect:i.useEffect,VT=e=>{let{theme:t,type:n,isLoading:r,...s}=e;return i.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...s})};var BT={info:function(e){return i.createElement(VT,{...e},i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return i.createElement(VT,{...e},i.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return i.createElement(VT,{...e},i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return i.createElement(VT,{...e},i.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return i.createElement("div",{className:"Toastify__spinner"})}};function qT(e){let{theme:t,type:n,isLoading:r,icon:s}=e,o=null,a={theme:t,type:n};return!1===s||(fT(s)?o=s({...a,isLoading:r}):(0,i.isValidElement)(s)?o=(0,i.cloneElement)(s,a):r?o=BT.spinner():(e=>e in BT)(n)&&(o=BT[n](a))),o}var $T=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:o}=UT(e),{closeButton:a,children:l,autoClose:c,onClick:u,type:h,hideProgressBar:d,closeToast:f,transition:p,position:m,className:g,style:y,progressClassName:v,updateId:_,role:b,progress:w,rtl:x,toastId:k,deleteToast:E,isIn:T,isLoading:C,closeOnClick:S,theme:I,ariaLabel:N}=e,R=uT("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":S}),P=fT(g)?g({rtl:x,position:m,type:h,defaultClassName:R}):uT(R,g),A=qT(e),O=!!w||!c,D={closeToast:f,type:h,theme:I},L=null;return!1===a||(L=fT(a)?a(D):(0,i.isValidElement)(a)?(0,i.cloneElement)(a,D):function(e){let{closeToast:t,theme:n,ariaLabel:r="close"}=e;return i.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":r},i.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},i.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(D)),i.createElement(p,{isIn:T,done:E,position:m,preventExitTransition:n,nodeRef:r,playToast:o},i.createElement("div",{id:k,tabIndex:0,onClick:u,"data-in":T,className:P,...s,style:y,ref:r,...T&&{role:b,"aria-label":N}},null!=A&&i.createElement("div",{className:uT("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!C})},A),_T(l,e,!t),L,!e.customProgressBar&&i.createElement(bT,{..._&&!O?{key:`p-${_}`}:{},rtl:x,theme:I,delay:c,isRunning:t,isIn:T,closeToast:f,hide:d,type:h,className:v,controlledProgress:O,progress:w||0})))},HT=function(e){return{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},WT=yT(HT("bounce",!0)),KT=(yT(HT("slide",!0)),yT(HT("zoom")),yT(HT("flip")),{position:"top-right",transition:WT,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function GT(e){let t={...KT,...e},n=e.stacked,[r,s]=(0,i.useState)(!0),o=(0,i.useRef)(null),{getToastToRender:a,isToastActive:l,count:c}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:s}=(0,i.useRef)(OT(e)).current;s(e);let o=null==(t=(0,i.useSyncExternalStore)(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!o)return[];let n=new Map;return e.newestOnTop&&o.reverse(),o.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:NT,count:null==o?void 0:o.length}}(t),{className:u,style:h,rtl:d,containerId:f,hotKeys:p}=t;function m(e){let t=uT("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":d});return fT(u)?u({position:e,rtl:d,defaultClassName:t}):uT(t,pT(u))}function g(){n&&(s(!0),FT.play())}return zT((()=>{var e;if(n){let n=o.current.querySelectorAll('[data-in="true"]'),i=12,s=null==(e=t.position)?void 0:e.includes("top"),a=0,l=0;Array.from(n).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${r}`),n.dataset.pos||(n.dataset.pos=s?"top":"bot");let o=a*(r?.2:1)+(r?0:i*t);n.style.setProperty("--y",`${s?o:-1*o}px`),n.style.setProperty("--g",`${i}`),n.style.setProperty("--s",""+(1-(r?l:0))),a+=n.offsetHeight,l+=.025}))}}),[r,c,n]),(0,i.useEffect)((()=>{function e(e){var t;let n=o.current;p(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),s(!1),FT.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(s(!0),FT.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[p]),i.createElement("section",{ref:o,className:"Toastify",id:f,onMouseEnter:()=>{n&&(s(!1),FT.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a(((e,t)=>{let r=t.length?{...h}:{...h,pointerEvents:"none"};return i.createElement("div",{tabIndex:-1,className:m(e),"data-stacked":n,style:r,key:`c-${e}`},t.map((e=>{let{content:t,props:r}=e;return i.createElement($T,{...r,stacked:n,collapseAll:g,isIn:l(r.toastId,r.containerId),key:`t-${r.key}`},t)})))})))}var QT=n(579);const YT=(0,i.createContext)({product:[{product_discount:"",product_name:"",product_type:"",product_image:"",product_en_name:"",product_tc_name:"",product_en_brand:"",product_quantity:"",product_tc_brand:"",porduct_description:"",product_tc_description:"",product_price:""}],orderArr:[],myself:"",setMyself:()=>{},education:"",setEducation:()=>{},setAuth:()=>{},setLoginStatus:()=>{},auth:{},loginStatus:!1,signOut:()=>{},googleLogin:()=>{},setOrderArr:()=>{},totalQuantity:0}),XT=e=>{const[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)((()=>JSON.parse(localStorage.getItem("order")||"[]"))),[l,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[d,f]=(0,i.useState)({}),[p,m]=(0,i.useState)(!1),[g,y]=(0,i.useState)([{product_price:"",product_discount:"",product_name:"",product_type:"",product_image:"",product_en_name:"",product_tc_name:"",product_en_brand:"",product_quantity:"",product_tc_brand:"",porduct_description:"",product_tc_description:""}]);(0,i.useEffect)((()=>{_l(hl(oT,"product0"),(e=>{const t=e.val();y(t)})),function(e,t,n,r){Et(e).onAuthStateChanged(t,n,r)}(sT,(e=>{e?(f(e),m(!0)):m(!1)}));const e=v();s(e);const t=JSON.parse(localStorage.getItem("order")||"[]");n(t)}),[p]),(0,i.useEffect)((()=>{localStorage.setItem("order",JSON.stringify(t))}),[t]);const v=()=>JSON.parse(localStorage.getItem("order")||"[]"),_=t.reduce(((e,t)=>e+Number(t.quantity||1)),0),b=async(e,t)=>{const n=fE(lT,"users",e),r=await JE(n);r.exists()?console.log("Document data:",r.data()):t(e)},w={auth:d,signOut:()=>{sT.signOut()},setAuth:e=>{(function(e,t,n){return du(Et(e),Xc.credential(t,n))})(sT,e.email,e.password).then((e=>{const t=e.user;b(t.uid,(async e=>{await eT(fE(lT,"users",e),{email:t.email,imageUrl:t.photoURL,method:"local",name:t.displayName,orders:[]})}))})).catch((e=>{const t=e.code,n=e.message;console.log(n),console.log(t)}))},setLoginStatus:e=>{m(e)},loginStatus:p,product:g,myself:l,setMyself:e=>{c(e)},education:u,setEducation:e=>{h(e)},googleLogin:()=>{const e=new tu;(async function(e,t,n){const r=jc(e);Ol(e,t,Jc);const i=Fu(r,n);return new Hu(r,"signInViaPopup",t,i).executeNotNull()})(sT,e).then((e=>{var t;const n=tu.credentialFromResult(e),r=null!==(t=null===n||void 0===n?void 0:n.accessToken)&&void 0!==t?t:"undefinded",i=e.user,s=i.uid;sessionStorage.setItem("token",r),sessionStorage.setItem("uid",s),m(!0),b(s,(async e=>{await eT(fE(lT,"users",e),{email:i.email,imageUrl:i.photoURL,method:"google",name:i.displayName,orders:[]})})),console.log(i),console.log("google")})).catch((e=>{console.log(e)}))},setOrderArr:e=>{const t=v();if(t.some((t=>t.product_en_name===e.product_en_name)))return void FT.error("Item already in cart",{position:"top-center",autoClose:1e3});const n=[...t,e];localStorage.setItem("order",JSON.stringify(n)),s(n),FT.success("Item added to cart",{position:"top-center",autoClose:1e3})},orderArr:o,totalQuantity:_};return(0,QT.jsx)(YT.Provider,{value:w,children:e.children})},JT=e=>{let{open:t,handler:n}=e;const r=(0,i.useRef)(),s=(0,i.useRef)(),[o,a]=(0,i.useState)(null);return(0,QT.jsxs)("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":t,children:[(0,QT.jsx)("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":t}),(0,QT.jsx)("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:(0,QT.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,QT.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,QT.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,QT.jsxs)("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[(0,QT.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,QT.jsx)("img",{className:"mx-auto h-10 w-auto",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/How_to_use_icon.svg/2214px-How_to_use_icon.svg.png",alt:"Sign Up"}),(0,QT.jsx)("h2",{className:"mt-10 text-center text-2xl font-bold tracking-tight text-gray-900",children:"Join the Cult Mechanicus"})]}),(0,QT.jsxs)("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,QT.jsxs)("form",{ref:r,className:"space-y-6",onSubmit:async e=>{e.preventDefault();const t=r.current[0].value,i=r.current[1].value,s=r.current[2].value;let a="";if(o){const e=$d(aT,`images/${Date.now()}_${o.name}`);await qd(e,o),a=await function(e){return Dd(e=Et(e))}(e)}try{const e=await async function(e,t,n){var r;const i=jc(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Dc(i,s,"signUpPassword");o=iu(i,e)}else o=iu(i,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Dc(i,s,"signUpPassword");return iu(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),l=await su._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(sT,t,i);await fu(e.user,{displayName:s,photoURL:a}),await eT(fE(lT,"users",e.user.uid),{email:t,name:s,imageUrl:a,method:"email",orders:[]}),n()}catch(fr){console.error("Signup Error:",fr.message),alert(fr.message)}},children:[(0,QT.jsxs)("div",{children:[(0,QT.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Email address"}),(0,QT.jsx)("input",{type:"email",required:!0,className:"block w-full rounded-md border px-3 py-2 mt-2"})]}),(0,QT.jsxs)("div",{children:[(0,QT.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Password"}),(0,QT.jsx)("input",{type:"password",required:!0,className:"block w-full rounded-md border px-3 py-2 mt-2"})]}),(0,QT.jsxs)("div",{children:[(0,QT.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Display Name"}),(0,QT.jsx)("input",{type:"text",required:!0,className:"block w-full rounded-md border px-3 py-2 mt-2"})]}),(0,QT.jsxs)("div",{children:[(0,QT.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Upload Avatar (optional)"}),(0,QT.jsx)("input",{type:"file",ref:s,onChange:e=>{e.target.files[0]&&a(e.target.files[0])},accept:"image/*",className:"block w-full text-sm text-gray-500 mt-2"})]}),(0,QT.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-2 px-4 rounded",children:"Sign Up"})]}),(0,QT.jsx)("p",{className:"mt-6 text-center text-sm text-gray-500",children:(0,QT.jsx)("span",{className:"font-semibold text-indigo-600",children:"Metal is truth, flesh is weakness."})})]})]})}),(0,QT.jsx)("div",{className:"px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:(0,QT.jsx)("button",{type:"button",onClick:n,className:"inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:w-auto",children:"Cancel"})})]})})})]})},ZT=e=>{let{open:t,handler:n}=e;const{setAuth:r,googleLogin:s}=(0,i.useContext)(YT),o=(0,i.useRef)();return(0,QT.jsxs)("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":t,children:[(0,QT.jsx)("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":t}),(0,QT.jsx)("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:(0,QT.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,QT.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,QT.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,QT.jsxs)("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[(0,QT.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,QT.jsx)("img",{className:"mx-auto h-10 w-auto",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/How_to_use_icon.svg/2214px-How_to_use_icon.svg.png",alt:"Your Blow"}),(0,QT.jsx)("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900",children:"For the machine God"})]}),(0,QT.jsxs)("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,QT.jsxs)("form",{ref:o,className:"space-y-6",children:[(0,QT.jsxs)("div",{children:[(0,QT.jsx)("label",{className:"block text-sm/6 font-medium text-gray-900",children:"Email address"}),(0,QT.jsx)("div",{className:"mt-2",children:(0,QT.jsx)("input",{type:"email",name:"email",id:"email",required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),(0,QT.jsxs)("div",{children:[(0,QT.jsxs)("div",{className:"flex items-center justify-between",children:[(0,QT.jsx)("label",{className:"block text-sm/6 font-medium text-gray-900",children:"Password"}),(0,QT.jsx)("div",{className:"text-sm",children:(0,QT.jsx)("a",{href:"#",className:"font-semibold text-indigo-600 hover:text-indigo-500"})})]}),(0,QT.jsx)("div",{className:"mt-2",children:(0,QT.jsx)("input",{type:"password",name:"password",id:"password",required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),(0,QT.jsx)("div",{children:(0,QT.jsx)("button",{type:"submit",onClick:()=>{const e=o.current[0].value,t=o.current[1].value;r({email:e,password:t}),n()},className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Sign in"})}),(0,QT.jsx)("div",{children:(0,QT.jsx)("button",{type:"submit",onClick:()=>{s(),n()},className:"flex w-full justify-center rounded-md bg-orange-400 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Google Login"})})]}),(0,QT.jsx)("p",{className:"mt-10 text-center text-sm/6 text-gray-500",children:(0,QT.jsx)("p",{className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Machinery will triumph over flesh"})})]})]}),(0,QT.jsx)("div",{className:"sm:flex sm:items-start"})]}),(0,QT.jsx)("div",{className:"px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:(0,QT.jsx)("button",{type:"button",onClick:n,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})})]})})})]})},eC=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(0),[s,o]=(0,i.useState)(!1),{loginStatus:a,signOut:l,auth:c,totalQuantity:u}=(0,i.useContext)(YT),h=()=>{o((e=>!e))},d=()=>t((e=>!e));return(0,i.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("order")||"[]").reduce(((e,t)=>e+Number(t.quantity||1)),0);r(e)}),[s,a]),(0,i.useEffect)((()=>{}),[u]),(0,QT.jsxs)("div",{children:[s&&(0,QT.jsx)(ZT,{open:s,handler:h}),e&&(0,QT.jsx)(JT,{open:e,handler:d}),(0,QT.jsx)("header",{children:(0,QT.jsx)("nav",{className:"bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800",children:(0,QT.jsxs)("div",{className:"flex flex-wrap justify-between items-center mx-auto max-w-screen-xl",children:[(0,QT.jsxs)("div",{className:"flex items-center",children:[(0,QT.jsx)("img",{src:"https://i.redd.it/is-there-a-more-correct-lore-accurate-way-for-the-adeptus-v0-zl789e1341kd1.jpg?width=600&format=pjpg&auto=webp&s=ecb01f404f35f5ed8e2dc541a33440f89f9ca2e6",className:"mr-3 h-6 sm:h-9",alt:"HAVE Logo"}),(0,QT.jsx)("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"MECHANICUS"})]}),!0!==a?(0,QT.jsxs)("div",{className:"flex gap-2 items-center lg:order-2",children:[(0,QT.jsx)("button",{type:"button",onClick:h,className:"text-gray-800 dark:text-white font-medium text-sm px-4 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Log in"}),(0,QT.jsx)("button",{type:"button",onClick:d,className:"text-indigo-700 border border-indigo-600 dark:text-white font-medium text-sm px-4 py-2 rounded-lg hover:bg-indigo-100 dark:hover:bg-gray-700",children:"Sign up"})]}):(0,QT.jsxs)("div",{className:"flex items-center space-x-3 lg:order-2",children:[(0,QT.jsx)("img",{src:(null===c||void 0===c?void 0:c.photoURL)||"https://static.vecteezy.com/system/resources/previews/019/879/186/non_2x/user-icon-on-transparent-background-free-png.png",alt:"User Avatar",className:"w-8 h-8 rounded-full border border-gray-300 dark:border-gray-600"}),(0,QT.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(null===c||void 0===c?void 0:c.displayName)||"User"}),(0,QT.jsx)("button",{type:"button",onClick:l,className:"text-gray-800 dark:text-white font-medium text-sm px-4 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Log out"})]}),(0,QT.jsx)("div",{className:"flex justify-between items-center w-full lg:flex lg:w-auto lg:order-1",id:"mobile-menu-2",children:(0,QT.jsxs)("ul",{className:"flex flex-col gap-2 mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0",children:[(0,QT.jsx)("li",{children:(0,QT.jsx)(Ie,{to:"/cart",className:"relative block py-2 pr-4 pl-3 text-white rounded bg-primary-700 lg:bg-transparent lg:text-primary-700 lg:p-0 dark:text-white",children:"Cart"})}),(0,QT.jsx)("li",{children:(0,QT.jsx)(Ie,{to:"/",className:"block py-2 pr-4 pl-3 text-white rounded bg-primary-700 lg:bg-transparent lg:text-primary-700 lg:p-0 dark:text-white",children:"Home"})}),a&&(0,QT.jsx)("li",{children:(0,QT.jsx)(Ie,{to:"/order",className:"block py-2 pr-4 pl-3 text-white rounded bg-primary-700 lg:bg-transparent lg:text-primary-700 lg:p-0 dark:text-white",children:"Order"})}),a&&"admin@profile.com"===c.email&&(0,QT.jsx)("li",{children:(0,QT.jsx)(Ie,{to:"/panel",className:"block py-2 pr-4 pl-3 text-white rounded bg-primary-700 lg:bg-transparent lg:text-primary-700 lg:p-0 dark:text-white",children:"Panel"})})]})})]})})})]})},tC=e=>{let{porduct_description:t,product_discount:n,product_en_name:r,product_image:s,setOrderArr:o}=e;const[a,l]=(0,i.useState)({product_en_name:r,product_discount:n,quantity:1,product_image:s}),c=r&&r.length>15?r.substring(0,25)+"...":r;return(0,i.useEffect)((()=>{}),[a]),(0,QT.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[(0,QT.jsx)("div",{className:"h-56 w-full",children:(0,QT.jsx)("div",{children:(0,QT.jsx)("img",{className:"mx-auto h-full dark:hidden",src:s,alt:""})})}),(0,QT.jsxs)("div",{className:"pt-6",children:[(0,QT.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-4",children:[(0,QT.jsx)("span",{className:"me-2 rounded bg-primary-100 px-2.5 py-0.5 text-xs font-medium text-primary-800 dark:bg-primary-900 dark:text-primary-300",children:" Up to 35% off "}),(0,QT.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,QT.jsxs)("button",{type:"button","data-tooltip-target":"tooltip-quick-look",className:"rounded-lg p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[(0,QT.jsx)("span",{className:"sr-only",children:" Quick look "}),(0,QT.jsxs)("svg",{className:"h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,QT.jsx)("path",{stroke:"currentColor","stroke-width":"2",d:"M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"}),(0,QT.jsx)("path",{stroke:"currentColor","stroke-width":"2",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})]}),(0,QT.jsxs)("div",{id:"tooltip-quick-look",role:"tooltip",className:"tooltip invisible absolute z-10 inline-block rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700","data-popper-placement":"top",children:["Quick look",(0,QT.jsx)("div",{className:"tooltip-arrow","data-popper-arrow":""})]}),(0,QT.jsxs)("button",{type:"button","data-tooltip-target":"tooltip-add-to-favorites",className:"rounded-lg p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[(0,QT.jsx)("span",{className:"sr-only",children:" Add to Favorites "}),(0,QT.jsx)("svg",{className:"h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6C6.5 1 1 8 5.8 13l6.2 7 6.2-7C23 8 17.5 1 12 6Z"})})]}),(0,QT.jsxs)("div",{id:"tooltip-add-to-favorites",role:"tooltip",className:"tooltip invisible absolute z-10 inline-block rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700","data-popper-placement":"top",children:["Add to favorites",(0,QT.jsx)("div",{className:"tooltip-arrow","data-popper-arrow":""})]})]})]}),(0,QT.jsx)("div",{className:"text-lg font-semibold leading-tight text-gray-900 hover:underline dark:text-white",children:c}),(0,QT.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,QT.jsxs)("div",{className:"flex items-center",children:[(0,QT.jsx)("svg",{className:"h-4 w-4 text-yellow-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{d:"M13.8 4.2a2 2 0 0 0-3.6 0L8.4 8.4l-4.6.3a2 2 0 0 0-1.1 3.5l3.5 3-1 4.4c-.5 1.7 1.4 3 2.9 2.1l3.9-2.3 3.9 2.3c1.5 1 3.4-.4 3-2.1l-1-4.4 3.4-3a2 2 0 0 0-1.1-3.5l-4.6-.3-1.8-4.2Z"})}),(0,QT.jsx)("svg",{className:"h-4 w-4 text-yellow-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{d:"M13.8 4.2a2 2 0 0 0-3.6 0L8.4 8.4l-4.6.3a2 2 0 0 0-1.1 3.5l3.5 3-1 4.4c-.5 1.7 1.4 3 2.9 2.1l3.9-2.3 3.9 2.3c1.5 1 3.4-.4 3-2.1l-1-4.4 3.4-3a2 2 0 0 0-1.1-3.5l-4.6-.3-1.8-4.2Z"})}),(0,QT.jsx)("svg",{className:"h-4 w-4 text-yellow-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{d:"M13.8 4.2a2 2 0 0 0-3.6 0L8.4 8.4l-4.6.3a2 2 0 0 0-1.1 3.5l3.5 3-1 4.4c-.5 1.7 1.4 3 2.9 2.1l3.9-2.3 3.9 2.3c1.5 1 3.4-.4 3-2.1l-1-4.4 3.4-3a2 2 0 0 0-1.1-3.5l-4.6-.3-1.8-4.2Z"})}),(0,QT.jsx)("svg",{className:"h-4 w-4 text-yellow-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{d:"M13.8 4.2a2 2 0 0 0-3.6 0L8.4 8.4l-4.6.3a2 2 0 0 0-1.1 3.5l3.5 3-1 4.4c-.5 1.7 1.4 3 2.9 2.1l3.9-2.3 3.9 2.3c1.5 1 3.4-.4 3-2.1l-1-4.4 3.4-3a2 2 0 0 0-1.1-3.5l-4.6-.3-1.8-4.2Z"})}),(0,QT.jsx)("svg",{className:"h-4 w-4 text-yellow-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{d:"M13.8 4.2a2 2 0 0 0-3.6 0L8.4 8.4l-4.6.3a2 2 0 0 0-1.1 3.5l3.5 3-1 4.4c-.5 1.7 1.4 3 2.9 2.1l3.9-2.3 3.9 2.3c1.5 1 3.4-.4 3-2.1l-1-4.4 3.4-3a2 2 0 0 0-1.1-3.5l-4.6-.3-1.8-4.2Z"})})]}),(0,QT.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"5.0"}),(0,QT.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"(455)"})]}),(0,QT.jsxs)("ul",{className:"mt-2 flex items-center gap-4",children:[(0,QT.jsxs)("li",{className:"flex items-center gap-2",children:[(0,QT.jsx)("svg",{className:"h-4 w-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h6l2 4m-8-4v8m0-8V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9h2m8 0H9m4 0h2m4 0h2v-4m0 0h-5m3.5 5.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm-10 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"})}),(0,QT.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fast Delivery"})]}),(0,QT.jsxs)("li",{className:"flex items-center gap-2",children:[(0,QT.jsx)("svg",{className:"h-4 w-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"2",d:"M8 7V6c0-.6.4-1 1-1h11c.6 0 1 .4 1 1v7c0 .6-.4 1-1 1h-1M3 18v-7c0-.6.4-1 1-1h11c.6 0 1 .4 1 1v7c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1Zm8-3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),(0,QT.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Best Price"})]})]}),(0,QT.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-4",children:[(0,QT.jsxs)("p",{className:"text-2xl font-extrabold leading-tight text-gray-900 dark:text-white",children:["$",n]}),(0,QT.jsxs)("button",{onClick:()=>{o(a)},type:"button",className:"inline-flex items-center rounded-lg bg-primary-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-primary-800 focus:outline-none focus:ring-4  focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[(0,QT.jsx)("svg",{className:"-ms-2 me-2 h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4h1.5L8 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm.75-3H7.5M11 7H6.312M17 4v6m-3-3h6"})}),"Add to cart"]})]})]})]})},nC=e=>{let{setOrderArr:t}=e;const n=(0,i.useContext)(YT),{product:r}=n;return(0,i.useEffect)((()=>{}),[]),(0,QT.jsx)("section",{className:"bg-white py-8 antialiased dark:bg-gray-900 md:py-12",children:(0,QT.jsxs)("div",{className:"mx-auto max-w-screen-xl px-4 2xl:px-0",children:[(0,QT.jsxs)("div",{className:"mb-4 items-end justify-between space-y-4 sm:flex sm:space-y-0 md:mb-8",children:[(0,QT.jsx)("div",{children:(0,QT.jsx)("h2",{className:"mt-3 text-xl font-semibold text-gray-900 dark:text-white sm:text-2xl",children:"Customers also purchased"})}),(0,QT.jsx)("div",{className:"flex items-center space-x-4",children:(0,QT.jsx)("div",{id:"dropdownSort1",className:"z-50 hidden w-40 divide-y divide-gray-100 rounded-lg bg-white shadow dark:bg-gray-700","data-popper-placement":"bottom",children:(0,QT.jsxs)("ul",{className:"p-2 text-left text-sm font-medium text-gray-500 dark:text-gray-400","aria-labelledby":"sortDropdownButton",children:[(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{href:"#",className:"group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white",children:" The most popular "})}),(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{href:"#",className:"group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white",children:" Newest "})}),(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{href:"#",className:"group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white",children:" Increasing price "})}),(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{href:"#",className:"group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white",children:" Decreasing price "})}),(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{href:"#",className:"group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white",children:" No. reviews "})}),(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{href:"#",className:"group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white",children:" Discount % "})})]})})})]}),(0,QT.jsx)("div",{className:"mb-4 grid gap-4 sm:grid-cols-2 md:mb-8 lg:grid-cols-3 xl:grid-cols-4",children:r?r.map((e=>(0,QT.jsx)(tC,{...e,setOrderArr:t}))):null})]})})},rC=e=>{let{setOrderArr:t}=e;return(0,QT.jsx)("div",{children:(0,QT.jsxs)("div",{className:"min-h-screen dark:bg-neutral-900",children:[(0,QT.jsx)(eC,{}),(0,QT.jsx)(nC,{setOrderArr:t}),(0,QT.jsx)("footer",{className:"mx-auto mt-32 w-full max-w-container px-4 sm:px-6 lg:px-8","aria-labelledby":"footer-heading",children:(0,QT.jsx)("div",{className:"items-centers grid grid-cols-1 justify-between gap-4 border-t border-gray-100 py-6 md:grid-cols-2",children:(0,QT.jsxs)("p",{className:"text-sm/6 text-gray-600 max-md:text-center",children:["\xa9",(0,QT.jsx)("a",{children:"Create by Lawrence Cheng"}),". All rights reserved."]})})})]})})},iC=()=>(0,QT.jsxs)("aside",{className:"bg-gradient-to-br from-gray-800 to-gray-900 -translate-x-80 fixed inset-0 z-50 my-4 ml-4 h-[calc(100vh-32px)] w-72 rounded-xl transition-transform duration-300 xl:translate-x-0",children:[(0,QT.jsxs)("div",{className:"relative border-b border-white/20",children:[(0,QT.jsx)("a",{className:"flex items-center gap-4 py-6 px-8",href:"#/",children:(0,QT.jsx)("h6",{className:"block antialiased tracking-normal font-sans text-base font-semibold leading-relaxed text-white",children:"EVEN IN DEATH I SERVE THE OMNISSIAH"})}),(0,QT.jsx)("button",{className:"middle none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-8 max-w-[32px] h-8 max-h-[32px] rounded-lg text-xs text-white hover:bg-white/10 active:bg-white/30 absolute right-0 top-0 grid rounded-br-none rounded-tl-none xl:hidden",type:"button",children:(0,QT.jsx)("span",{className:"absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2",children:(0,QT.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor","aria-hidden":"true",className:"h-5 w-5 text-white",children:(0,QT.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})})})})]}),(0,QT.jsxs)("div",{className:"m-4",children:[(0,QT.jsx)("ul",{className:"mb-4 flex flex-col gap-1",children:(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{"aria-current":"page",className:"active",href:"#",children:(0,QT.jsxs)(Ie,{to:"/",className:"middle none font-sans font-bold center transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-3 rounded-lg bg-gradient-to-tr from-blue-600 to-blue-400 text-white shadow-md shadow-blue-500/20 hover:shadow-lg hover:shadow-blue-500/40 active:opacity-[0.85] w-full flex items-center gap-4 px-4 capitalize",type:"button",children:[(0,QT.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"w-5 h-5 text-inherit",children:[(0,QT.jsx)("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),(0,QT.jsx)("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"})]}),(0,QT.jsx)("p",{className:"block antialiased font-sans text-base leading-relaxed text-inherit font-medium capitalize",children:"Home"})]})})})}),(0,QT.jsx)("ul",{className:"mb-4 flex flex-col gap-1",children:(0,QT.jsx)("li",{className:"mx-3.5 mt-4 mb-2",children:(0,QT.jsx)("p",{className:"block antialiased font-sans text-sm leading-normal text-white font-black uppercase opacity-75",children:"auth pages"})})})]})]}),sC=e=>{let{product:t,handleOpen:n}=e;return(0,QT.jsx)("div",{children:(0,QT.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,QT.jsx)("div",{className:"relative p-4 w-full max-w-md max-h-full",children:(0,QT.jsxs)("div",{className:"relative bg-white rounded-lg shadow-sm dark:bg-gray-700",children:[(0,QT.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600 border-gray-200",children:[(0,QT.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Product"}),(0,QT.jsxs)("button",{onClick:()=>n(),type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-toggle":"crud-modal",children:[(0,QT.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,QT.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,QT.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=String(t.productId);let i={productName:e.target[0].value,productPrice:e.target[1].value,quantity:e.target[2].value};const s=hl(oT,`product/${r}`);try{const e=await ml(s);if(e.exists()){const r={...e.val(),product_en_name:i.productName?i.productName:t.product_en_name,product_discount:i.productPrice?i.productPrice:t.product_discount,product_quantity:i.quantity?i.quantity:t.product_quantity};await pl(s,r),n(!1)}}catch(fr){console.log("Error updating product: ",fr)}},className:"p-4 md:p-5",children:[(0,QT.jsxs)("div",{className:"grid gap-4 mb-4 grid-cols-2",children:[(0,QT.jsxs)("div",{className:"col-span-2",children:[(0,QT.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Name"}),(0,QT.jsx)("input",{type:"text",name:"name",id:"name",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:t.product_en_name})]}),(0,QT.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,QT.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Price"}),(0,QT.jsx)("input",{type:"number",name:"price",id:"price",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:t.product_discount})]}),(0,QT.jsxs)("div",{className:"col-span-2",children:[(0,QT.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"quantity"}),(0,QT.jsx)("input",{type:"number",name:"price",id:"price",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:t.product_quantity})]})]}),(0,QT.jsx)("button",{type:"submit",className:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Edit"})]})]})})})})},oC=e=>{let{product_en_name:t,product_discount:n,product_quantity:r,productId:s}=e;const[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),u={productId:s,product_en_name:t,product_discount:n,product_quantity:r};return(0,i.useEffect)((()=>{}),[o]),(0,QT.jsxs)("tr",{children:[(0,QT.jsx)("td",{className:"py-3 px-5 border-b border-blue-gray-50",children:(0,QT.jsx)("div",{className:"flex items-center gap-4",children:(0,QT.jsx)("p",{className:"block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-bold",children:t})})}),(0,QT.jsx)("td",{className:"py-3 px-5 border-b border-blue-gray-50",children:(0,QT.jsxs)("p",{className:"block antialiased font-sans text-xs font-medium text-blue-gray-600",children:["$",n]})}),(0,QT.jsx)("td",{className:"py-3 px-5 border-b border-blue-gray-50",children:(0,QT.jsxs)("div",{className:"w-10/12",children:[(0,QT.jsx)("p",{className:"antialiased font-sans mb-1 block text-xs font-medium text-blue-gray-600",children:r}),(0,QT.jsx)("div",{className:"flex flex-start bg-blue-gray-50 overflow-hidden w-full rounded-sm font-sans text-xs font-medium h-1",children:(0,QT.jsx)("div",{className:"flex justify-center items-center h-full bg-gradient-to-tr from-blue-600 to-blue-400 text-white"})})]})}),(0,QT.jsx)("td",{className:"py-3 px-5 border-b border-blue-gray-50",children:(0,QT.jsxs)("div",{className:"w-10/12",children:[(0,QT.jsx)("button",{onClick:()=>(c(u),void a(!0)),"data-modal-target":"crud-modal","data-modal-toggle":"crud-modal",className:"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button",children:"Edit"}),o&&(null===l||void 0===l?void 0:l.productId)===u.productId&&(0,QT.jsx)(sC,{handleOpen:e=>{a(e)},product:l},s),(0,QT.jsx)("div",{className:"flex flex-start bg-blue-gray-50 overflow-hidden w-full rounded-sm font-sans text-xs font-medium h-1",children:(0,QT.jsx)("div",{className:"flex justify-center items-center h-full bg-gradient-to-tr from-blue-600 to-blue-400 text-white"})})]})})]})},aC=e=>{let{Image:t,number:n}=e;return(0,QT.jsxs)("div",{className:"relative flex flex-col bg-clip-border rounded-xl bg-white text-gray-700 shadow-md",children:[(0,QT.jsx)("div",{className:"bg-clip-border mx-4 rounded-xl overflow-hidden bg-gradient-to-tr from-blue-600 to-blue-400 text-white shadow-blue-500/40 shadow-lg absolute -mt-4 grid h-16 w-16 place-items-center",children:(0,QT.jsx)(t,{})}),(0,QT.jsxs)("div",{className:"p-4 text-right",children:[(0,QT.jsx)("p",{className:"block antialiased font-sans text-sm leading-normal font-normal text-blue-gray-600",children:"Machine Spirit"}),(0,QT.jsxs)("h4",{className:"block antialiased tracking-normal font-sans text-2xl font-semibold leading-snug text-blue-gray-900",children:[n,"k"]})]}),(0,QT.jsx)("div",{className:"border-t border-blue-gray-50 p-4",children:(0,QT.jsxs)("p",{className:"block antialiased font-sans text-base leading-relaxed font-normal text-blue-gray-600",children:[(0,QT.jsx)("strong",{className:"text-green-500"}),"\xa0For the Machine is immortal"]})})]})};var lC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cC=i.createContext&&i.createContext(lC),uC=["attr","size","title"];function hC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function dC(){return dC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dC.apply(this,arguments)}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fC(Object(n),!0).forEach((function(t){mC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mC(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gC(e){return e&&e.map(((e,t)=>i.createElement(e.tag,pC({key:t},e.attr),gC(e.child))))}function yC(e){return t=>i.createElement(vC,dC({attr:pC({},e.attr)},t),gC(e.child))}function vC(e){var t=t=>{var n,{attr:r,size:s,title:o}=e,a=hC(e,uC),l=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.createElement("svg",dC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:pC(pC({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&i.createElement("title",null,o),e.children)};return void 0!==cC?i.createElement(cC.Consumer,null,(e=>t(e))):t(lC)}function _C(e){return yC({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.89 10.188l-4-5c-0.095-0.119-0.239-0.188-0.39-0.188h-7c-0.152 0-0.296 0.069-0.39 0.188l-4 5c-0.071 0.089-0.11 0.199-0.11 0.312v4.5c0 0.552 0.448 1 1 1h14c0.552 0 1-0.448 1-1v-4.5c0-0.114-0.039-0.224-0.11-0.312zM15 11h-3.5l-2 2h-3l-2-2h-3.5v-0.325l3.74-4.675h6.519l3.74 4.675v0.325z"},child:[]},{tag:"path",attr:{d:"M11.5 8h-7c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h7c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z"},child:[]},{tag:"path",attr:{d:"M12.5 10h-9c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h9c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z"},child:[]}]})(e)}const bC=e=>{let{handleOpen:t}=e;const n=async e=>{let{file:t,index:n}=e;if(t){const e=$d(aT,`product/product${n}`);return await qd(e,t)}return""};return(0,QT.jsx)("div",{children:(0,QT.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,QT.jsx)("div",{className:"relative p-4 w-full max-w-md max-h-full",children:(0,QT.jsxs)("div",{className:"relative bg-white rounded-lg shadow-sm dark:bg-gray-700",children:[(0,QT.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600 border-gray-200",children:[(0,QT.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Product"}),(0,QT.jsxs)("button",{onClick:()=>t(!1),type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-toggle":"crud-modal",children:[(0,QT.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,QT.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,QT.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=e.target[3],i=hl(oT,"product0");try{const s=await ml(i);if(s.exists()){const t=s.val(),i=t.length;let o={product_description:e.target[0].value,product_discount:e.target[1].value,product_en_brand:e.target[0].value,product_en_description:e.target[0].value,product_en_name:e.target[0].value,product_image:await n({file:r.files[0],index:i}),product_type:"household appliances"};console.log(i),fl(hl(oT,"product0"),{...t,[i]:o})}t(!1)}catch(fr){console.log("Adding product error: ",fr)}},className:"p-4 md:p-5",children:[(0,QT.jsxs)("div",{className:"grid gap-4 mb-4 grid-cols-2",children:[(0,QT.jsxs)("div",{className:"col-span-2",children:[(0,QT.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Name"}),(0,QT.jsx)("input",{type:"text",name:"name",id:"name",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Product Name"})]}),(0,QT.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,QT.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Price"}),(0,QT.jsx)("input",{type:"number",name:"price",id:"price",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Product Price"})]}),(0,QT.jsxs)("div",{className:"col-span-2",children:[(0,QT.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"quantity"}),(0,QT.jsx)("input",{type:"number",name:"price",id:"price",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Product Quantity"})]}),(0,QT.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Upload file"}),(0,QT.jsx)("input",{className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",id:"file_input",type:"file"})]}),(0,QT.jsx)("button",{type:"submit",className:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"add"})]})]})})})})},wC=()=>{const e=(0,i.useContext)(YT),[t,n]=(0,i.useState)(!1),{product:r}=e;return(0,QT.jsx)("div",{children:(0,QT.jsxs)("div",{className:"mt-12",children:[(0,QT.jsx)("div",{className:"mb-12 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:(0,QT.jsx)(aC,{Image:_C,number:40})}),(0,QT.jsx)("div",{className:"mb-4 grid grid-cols-1 gap-6 xl:grid-cols-3",children:(0,QT.jsxs)("div",{className:"relative flex flex-col bg-clip-border rounded-xl bg-white text-gray-700 shadow-md overflow-hidden xl:col-span-2",children:[(0,QT.jsxs)("div",{className:"relative bg-clip-border rounded-xl overflow-hidden bg-transparent text-gray-700 shadow-none m-0 flex items-center justify-between p-6",children:[(0,QT.jsxs)("div",{children:[(0,QT.jsx)("h6",{className:"block antialiased tracking-normal font-sans text-base font-semibold leading-relaxed text-blue-gray-900 mb-1",children:"Space Marine"}),(0,QT.jsxs)("p",{className:"antialiased font-sans text-sm leading-normal flex items-center gap-1 font-normal text-blue-gray-600",children:[(0,QT.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor","aria-hidden":"true",className:"h-4 w-4 text-blue-500",children:(0,QT.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})}),(0,QT.jsx)("strong",{children:"For the emperor"})," this month"]})]}),(0,QT.jsx)("button",{onClick:()=>n((e=>!e)),"aria-expanded":"false","aria-haspopup":"menu",id:":r5:",className:"relative middle none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-8 max-w-[32px] h-8 max-h-[32px] rounded-lg text-xs text-blue-gray-500 hover:bg-blue-gray-500/10 active:bg-blue-gray-500/30",type:"button",children:(0,QT.jsx)("span",{className:"absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2",children:(0,QT.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currenColor",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor","aria-hidden":"true",className:"h-6 w-6",children:(0,QT.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})})})})]}),(0,QT.jsx)("div",{className:"p-6 overflow-x-scroll px-0 pt-0 pb-2",children:(0,QT.jsxs)("table",{className:"w-full min-w-[640px] table-auto",children:[(0,QT.jsx)("thead",{children:(0,QT.jsxs)("tr",{children:[(0,QT.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-6 text-left",children:(0,QT.jsx)("p",{className:"block antialiased font-sans text-[11px] font-medium uppercase text-blue-gray-400",children:"description"})}),(0,QT.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-6 text-left",children:(0,QT.jsx)("p",{className:"block antialiased font-sans text-[11px] font-medium uppercase text-blue-gray-400",children:"discount"})}),(0,QT.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-6 text-left",children:(0,QT.jsx)("p",{className:"block antialiased font-sans text-[11px] font-medium uppercase text-blue-gray-400",children:"quantity"})}),(0,QT.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-6 text-left",children:(0,QT.jsx)("p",{className:"block antialiased font-sans text-[11px] font-medium uppercase text-blue-gray-400",children:"Edit"})})]})}),(0,QT.jsxs)("tbody",{children:[t?(0,QT.jsx)(bC,{handleOpen:e=>{n(e)}}):null,r?r.map(((e,t)=>(0,QT.jsx)(oC,{product_en_name:e.product_en_name,product_discount:e.product_discount,product_quantity:e.product_quantity,productId:t},t))):null]})]})})]})})]})})};function xC(e){return yC({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M413.967 276.8c1.06-6.235 1.06-13.518 1.06-20.8s-1.06-13.518-1.06-20.8l44.667-34.318c4.26-3.118 5.319-8.317 2.13-13.518L418.215 115.6c-2.129-4.164-8.507-6.235-12.767-4.164l-53.186 20.801c-10.638-8.318-23.394-15.601-36.16-20.801l-7.448-55.117c-1.06-4.154-5.319-8.318-10.638-8.318h-85.098c-5.318 0-9.577 4.164-10.637 8.318l-8.508 55.117c-12.767 5.2-24.464 12.482-36.171 20.801l-53.186-20.801c-5.319-2.071-10.638 0-12.767 4.164L49.1 187.365c-2.119 4.153-1.061 10.399 2.129 13.518L96.97 235.2c0 7.282-1.06 13.518-1.06 20.8s1.06 13.518 1.06 20.8l-44.668 34.318c-4.26 3.118-5.318 8.317-2.13 13.518L92.721 396.4c2.13 4.164 8.508 6.235 12.767 4.164l53.187-20.801c10.637 8.318 23.394 15.601 36.16 20.801l8.508 55.117c1.069 5.2 5.318 8.318 10.637 8.318h85.098c5.319 0 9.578-4.164 10.638-8.318l8.518-55.117c12.757-5.2 24.464-12.482 36.16-20.801l53.187 20.801c5.318 2.071 10.637 0 12.767-4.164l42.549-71.765c2.129-4.153 1.06-10.399-2.13-13.518l-46.8-34.317zm-158.499 52c-41.489 0-74.46-32.235-74.46-72.8s32.971-72.8 74.46-72.8 74.461 32.235 74.461 72.8-32.972 72.8-74.461 72.8z"},child:[]}]})(e)}const kC=()=>(0,QT.jsx)("div",{className:"text-blue-gray-600",children:(0,QT.jsx)("footer",{className:"py-2",children:(0,QT.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-center gap-6 px-2 md:justify-between",children:[(0,QT.jsxs)("p",{className:"block antialiased font-sans text-sm leading-normal font-normal text-inherit",children:["\xa9 2025, made with",(0,QT.jsx)("div",{className:"-mt-0.5 inline-block h-2.6 w-3.5",children:(0,QT.jsx)(xC,{})}),"by ",(0,QT.jsx)("a",{href:"https://www.creative-tim.com",target:"_blank",className:"transition-colors hover:text-blue-500",children:"Lawrence Cheng"})," for a better web. "]}),(0,QT.jsx)("ul",{className:"flex items-center gap-4",children:(0,QT.jsx)("li",{children:(0,QT.jsx)("a",{href:"#",className:"block antialiased font-sans text-sm leading-normal py-0.5 px-1 font-normal text-inherit transition-colors hover:text-blue-500",children:"Blog"})})})]})})}),EC=e=>{let{handleOpen:t}=e;const n=(0,i.useContext)(YT),{auth:r}=n;return(0,QT.jsx)("nav",{className:"block w-full max-w-full bg-transparent text-white shadow-none rounded-xl transition-all px-0 py-1",children:(0,QT.jsxs)("div",{className:"flex flex-col-reverse justify-between gap-6 md:flex-row md:items-center",children:[(0,QT.jsxs)("div",{className:"capitalize",children:[(0,QT.jsx)("nav",{"aria-label":"breadcrumb",className:"w-max",children:(0,QT.jsxs)("ol",{className:"flex flex-wrap items-center w-full bg-opacity-60 rounded-md bg-transparent p-0 transition-all",children:[(0,QT.jsxs)("li",{className:"flex items-center text-blue-gray-900 antialiased font-sans text-sm font-normal leading-normal cursor-pointer transition-colors duration-300 hover:text-light-blue-500",children:[(0,QT.jsx)("a",{href:"#",children:(0,QT.jsx)(Ie,{to:"/panel",className:"block antialiased font-sans text-sm leading-normal text-blue-900 font-normal opacity-50 transition-all hover:text-blue-300 hover:opacity-100",children:"dashboard"})}),(0,QT.jsx)("span",{className:"text-gray-500 text-sm antialiased font-sans font-normal leading-normal mx-2 pointer-events-none select-none",children:"/"})]}),(0,QT.jsx)("li",{className:"flex items-center text-blue-900 antialiased font-sans text-sm font-normal leading-normal cursor-pointer transition-colors duration-200 hover:text-blue-300",children:(0,QT.jsx)(Ie,{to:"/",className:"block antialiased font-sans text-sm leading-normal text-blue-gray-400 font-normal",children:"home"})})]})}),(0,QT.jsx)("h6",{className:"block antialiased tracking-normal font-sans text-base font-semibold leading-relaxed text-gray-900",children:"home"})]}),(0,QT.jsxs)("div",{className:"flex items-center",children:[(0,QT.jsx)("div",{className:"mr-auto md:mr-4 md:w-56",children:(0,QT.jsxs)("div",{className:"relative w-full min-w-[200px] h-10",children:[(0,QT.jsx)("input",{className:"peer w-full h-full bg-transparent text-gray-700 font-sans font-normal outline outline-0 focus:outline-0 disabled:bg-blue-gray-50 disabled:border-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 border focus:border-2 border-t-transparent focus:border-t-transparent text-sm px-3 py-2.5 rounded-[7px] border-blue-gray-200 focus:border-blue-500",placeholder:" "}),(0,QT.jsx)("label",{className:"flex w-full h-full select-none pointer-events-none absolute left-0 font-normal peer-placeholder-shown:text-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:box-border before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 peer-placeholder-shown:before:border-transparent before:rounded-tl-md before:border-t peer-focus:before:border-t-2 before:border-l peer-focus:before:border-l-2 before:pointer-events-none before:transition-all peer-disabled:before:border-transparent after:content[' '] after:block after:flex-grow after:box-border after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 peer-placeholder-shown:after:border-transparent after:rounded-tr-md after:border-t peer-focus:after:border-t-2 after:border-r peer-focus:after:border-r-2 after:pointer-events-none after:transition-all peer-disabled:after:border-transparent peer-placeholder-shown:leading-[3.75] text-blue-gray-400 peer-focus:text-blue-500 before:border-blue-gray-200 peer-focus:before:border-blue-500 after:border-blue-gray-200 peer-focus:after:border-blue-500",children:"Type here"})]})}),(0,QT.jsx)("button",{className:"relative middle none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-10 max-w-[40px] h-10 max-h-[40px] rounded-lg text-xs text-gray-500 hover:bg-blue-gray-500/10 active:bg-blue-gray-500/30 grid xl:hidden",type:"button",children:(0,QT.jsx)("span",{className:"absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2",children:(0,QT.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","stroke-width":"3",className:"h-6 w-6 text-blue-gray-500",children:(0,QT.jsx)("path",{"fill-rule":"evenodd",d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})})})}),(0,QT.jsxs)(Ie,{to:"/",children:[(0,QT.jsxs)("button",{className:"middle none font-sans font-bold center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-3 rounded-lg text-gray-500 hover:bg-blue-gray-500/10 active:bg-blue-gray-500/30 hidden items-center gap-1 px-4 xl:flex",type:"button",children:[(0,QT.jsx)("img",{src:r.photoURL,className:"h-5 w-5 rounded-xl text-blue-gray-500 "}),r.displayName]}),(0,QT.jsx)("button",{className:"relative middle none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-10 max-w-[40px] h-10 max-h-[40px] rounded-lg text-xs text-gray-500 hover:bg-blue-gray-500/10 active:bg-blue-gray-500/30 grid xl:hidden",type:"button",children:(0,QT.jsx)("span",{className:"absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2",children:(0,QT.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"h-5 w-5 text-blue-gray-500",children:(0,QT.jsx)("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z","clip-rule":"evenodd"})})})})]}),(0,QT.jsx)("button",{onClick:t,className:"relative middle none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-10 max-w-[40px] h-10 max-h-[40px] rounded-lg text-xs text-gray-500 hover:bg-blue-gray-500/10 active:bg-blue-gray-500/30",type:"button",children:(0,QT.jsx)("span",{className:"absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2",children:(0,QT.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"h-5 w-5 text-blue-gray-500",children:(0,QT.jsx)("path",{"fill-rule":"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.923-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z","clip-rule":"evenodd"})})})}),(0,QT.jsx)("button",{"aria-expanded":"false","aria-haspopup":"menu",id:":r2:",className:"relative middle none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-10 max-w-[40px] h-10 max-h-[40px] rounded-lg text-xs text-gray-500 hover:bg-blue-gray-500/10 active:bg-blue-gray-500/30",type:"button",children:(0,QT.jsx)("span",{className:"absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2",children:(0,QT.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"h-5 w-5 text-blue-gray-500",children:(0,QT.jsx)("path",{"fill-rule":"evenodd",d:"M5.25 9a6.75 6.75 0 0113.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 01-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 11-7.48 0 24.585 24.585 0 01-4.831-1.244.75.75 0 01-.298-1.205A8.217 8.217 0 005.25 9.75V9zm4.502 8.9a2.25 2.25 0 104.496 0 25.057 25.057 0 01-4.496 0z","clip-rule":"evenodd"})})})})]})]})})},TC=()=>(0,QT.jsxs)("div",{className:"min-h-screen bg-gray-50/50",children:[(0,QT.jsx)(iC,{}),(0,QT.jsxs)("div",{className:"p-4 xl:ml-80",children:[(0,QT.jsx)(EC,{}),(0,QT.jsx)(wC,{}),(0,QT.jsx)(kC,{})]})]}),CC=()=>(0,QT.jsx)("section",{className:"bg-white dark:bg-gray-900",children:(0,QT.jsx)("div",{className:"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6",children:(0,QT.jsxs)("div",{className:"mx-auto max-w-screen-sm text-center",children:[(0,QT.jsx)("h1",{className:"mb-4 text-7xl tracking-tight font-extrabold lg:text-9xl text-primary-600 dark:text-primary-500",children:"404"}),(0,QT.jsx)("p",{className:"mb-4 text-3xl tracking-tight font-bold text-gray-900 md:text-4xl dark:text-white",children:"Something's missing."}),(0,QT.jsx)("p",{className:"mb-4 text-lg font-light text-gray-500 dark:text-gray-400",children:"Sorry, we can't find that page. You'll find lots to explore on the home page. "}),(0,QT.jsx)(Ie,{to:"/",className:"inline-flex text-white bg-primary-600 hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:focus:ring-primary-900 my-4",children:"Back to Homepage"})]})})}),SC=e=>{let{product_en_name:t,product_image:n,quantity:r,product_discount:i,index:s,onRemove:o,onQuantityChange:a}=e;return(0,QT.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 md:p-6",children:(0,QT.jsxs)("div",{className:"space-y-4 md:flex md:items-center md:justify-between md:gap-6 md:space-y-0",children:[(0,QT.jsxs)("a",{href:"#",className:"shrink-0 md:order-1",children:[(0,QT.jsx)("img",{className:"h-20 w-20 dark:hidden",src:n,alt:"imac image"}),(0,QT.jsx)("img",{className:"hidden h-20 w-20 dark:block",src:"https://flowbite.s3.amazonaws.com/blocks/e-commerce/imac-front-dark.svg",alt:"imac image"})]}),(0,QT.jsx)("label",{className:"sr-only",children:"Choose quantity:"}),(0,QT.jsxs)("div",{className:"flex items-center justify-between md:order-3 md:justify-end",children:[(0,QT.jsxs)("div",{className:"flex items-center",children:[(0,QT.jsx)("button",{onClick:()=>{r>1&&a(s,r-1)},type:"button",id:"decrement-button","data-input-counter-decrement":"counter-input",className:"inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700",children:(0,QT.jsx)("svg",{className:"h-2.5 w-2.5 text-gray-900 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 1h16"})})}),(0,QT.jsx)("input",{type:"text",id:"counter-input","data-input-counter":!0,className:"w-10 shrink-0 border-0 bg-transparent text-center text-sm font-medium text-gray-900 focus:outline-none focus:ring-0 dark:text-white",placeholder:"",value:r,required:!0}),(0,QT.jsx)("button",{onClick:()=>{a(s,r+1)},type:"button",id:"increment-button","data-input-counter-increment":"counter-input",className:"inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700",children:(0,QT.jsx)("svg",{className:"h-2.5 w-2.5 text-gray-900 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 1v16M1 9h16"})})})]}),(0,QT.jsx)("div",{className:"text-end md:order-4 md:w-32",children:(0,QT.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-white",children:["$",i]})})]}),(0,QT.jsxs)("div",{className:"w-full min-w-0 flex-1 space-y-4 md:order-2 md:max-w-md",children:[(0,QT.jsx)("a",{href:"#",className:"text-base font-medium text-gray-900 hover:underline dark:text-white",children:t}),(0,QT.jsxs)("div",{className:"flex items-center gap-4",children:[(0,QT.jsxs)("button",{type:"button",className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-900 hover:underline dark:text-gray-400 dark:hover:text-white",children:[(0,QT.jsx)("svg",{className:"me-1.5 h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12.01 6.001C6.5 1 1 8 5.782 13.001L12.011 20l6.23-7C23 8 17.5 1 12.01 6.002Z"})}),"Add to Favorites"]}),(0,QT.jsxs)("button",{onClick:()=>o(s),type:"button",className:"inline-flex items-center text-sm font-medium text-red-600 hover:underline dark:text-red-500",children:[(0,QT.jsx)("svg",{className:"me-1.5 h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18 17.94 6M18 18 6.06 6"})}),"Remove"]})]})]})]})})};var IC,NC,RC;!function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"}(IC||(IC={})),function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"}(NC||(NC={})),function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"}(RC||(RC={}));var PC=function(){return PC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},PC.apply(this,arguments)};function AC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function OC(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"===typeof SuppressedError&&SuppressedError;var DC="data-react-paypal-script-id",LC="dataJsSdkLibrary",MC="react-paypal-js",jC="dataNamespace",FC="dataSdkIntegrationSource",UC="Failed to load the PayPal JS SDK script.",zC="3.84.0",VC=("https://js.braintreegateway.com/web/".concat(zC,"/js/client.min.js"),"https://js.braintreegateway.com/web/".concat(zC,"/js/paypal-checkout.min.js"),"paypal");function BC(e){return void 0===e&&(e=VC),window[e]}function qC(e){var t=e.reactComponentName,n=e.sdkComponentKey,r=e.sdkRequestedComponents,i=void 0===r?"":r,s=e.sdkDataNamespace,o=void 0===s?VC:s,a=n.charAt(0).toUpperCase().concat(n.substring(1)),l="Unable to render <".concat(t," /> because window.").concat(o,".").concat(a," is undefined."),c="string"===typeof i?i:i.join(",");if(!c.includes(n)){var u=[c,n].filter(Boolean).join();l+="\nTo fix the issue, add '".concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(u,"'}}>`.")}return l}function $C(e){var t=e,n=DC;t[n];var r=AC(t,[n+""]);return"react-paypal-js-".concat(function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].charCodeAt(0)*n;e[n+1]&&(r+=e[n+1].charCodeAt(0)*(n-1)),t+=String.fromCharCode(97+Math.abs(r)%26)}return t}(JSON.stringify(r)))}function HC(e,t){var n,r;switch(t.type){case NC.LOADING_STATUS:return"object"===typeof t.value?PC(PC({},e),{loadingStatus:t.value.state,loadingStatusErrorMessage:t.value.message}):PC(PC({},e),{loadingStatus:t.value});case NC.RESET_OPTIONS:return function(e){var t=self.document.querySelector("script[".concat(DC,'="').concat(e,'"]'));(null===t||void 0===t?void 0:t.parentNode)&&t.parentNode.removeChild(t)}(e.options[DC]),PC(PC({},e),{loadingStatus:IC.PENDING,options:PC(PC((n={},n[FC]=MC,n),t.value),(r={},r[DC]="".concat($C(t.value)),r))});case NC.SET_BRAINTREE_INSTANCE:return PC(PC({},e),{braintreePayPalCheckoutInstance:t.value});default:return e}}var WC=(0,i.createContext)(null);function KC(e){if("function"===typeof(null===e||void 0===e?void 0:e.dispatch)&&0!==e.dispatch.length)return e;throw new Error("usePayPalScriptReducer must be used within a PayPalScriptProvider")}function GC(){var e=KC((0,i.useContext)(WC));return[PC(PC({},e),{isInitial:e.loadingStatus===IC.INITIAL,isPending:e.loadingStatus===IC.PENDING,isResolved:e.loadingStatus===IC.RESOLVED,isRejected:e.loadingStatus===IC.REJECTED}),e.dispatch]}(0,i.createContext)({});var QC=function(e){var t,n=e.className,r=void 0===n?"":n,s=e.disabled,o=void 0!==s&&s,a=e.children,l=e.forceReRender,c=void 0===l?[]:l,u=AC(e,["className","disabled","children","forceReRender"]),h=o?{opacity:.38}:{},d="".concat(r," ").concat(o?"paypal-buttons-disabled":"").trim(),f=(0,i.useRef)(null),p=(0,i.useRef)(null),m=function(e){var t=(0,i.useRef)(new Proxy({},{get:function(e,t,n){return"function"===typeof e[t]?function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e[t].apply(e,n)}:Reflect.get(e,t,n)}}));return t.current=Object.assign(t.current,e),t.current}(u),g=GC()[0],y=g.isResolved,v=g.options,_=(0,i.useState)(null),b=_[0],w=_[1],x=(0,i.useState)(!0),k=x[0],E=x[1],T=(0,i.useState)(null)[1];function C(){null!==p.current&&p.current.close().catch((function(){}))}return(null===(t=p.current)||void 0===t?void 0:t.updateProps)&&p.current.updateProps({message:u.message}),(0,i.useEffect)((function(){if(!1===y)return C;var e=BC(v.dataNamespace);if(void 0===e||void 0===e.Buttons)return T((function(){throw new Error(qC({reactComponentName:QC.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:v.components,sdkDataNamespace:v[jC]}))})),C;try{p.current=e.Buttons(PC(PC({},m),{onInit:function(e,t){w(t),"function"===typeof u.onInit&&u.onInit(e,t)}}))}catch(t){return T((function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(t))}))}return!1===p.current.isEligible()?(E(!1),C):f.current?(p.current.render(f.current).catch((function(e){null!==f.current&&0!==f.current.children.length&&T((function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(e))}))})),C):C}),OC(OC([y],c,!0),[u.fundingSource],!1)),(0,i.useEffect)((function(){null!==b&&(!0===o?b.disable().catch((function(){})):b.enable().catch((function(){})))}),[o,b]),i.createElement(i.Fragment,null,k?i.createElement("div",{ref:f,style:h,className:d}):a)};function YC(e){var t=e.sdkBaseUrl,n=e.environment,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["sdkBaseUrl","environment"]),i=t||function(e){return"sandbox"===e?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}(n),s=r,o=Object.keys(s).filter((function(e){return"undefined"!==typeof s[e]&&null!==s[e]&&""!==s[e]})).reduce((function(e,t){var n=s[t].toString();return"data"===(t=function(e){var t=function(e,t){return(t?"-":"")+e.toLowerCase()};return e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,t)}(t)).substring(0,4)||"crossorigin"===t?e.attributes[t]=n:e.queryParams[t]=n,e}),{queryParams:{},attributes:{}}),a=o.queryParams,l=o.attributes;return a["merchant-id"]&&-1!==a["merchant-id"].indexOf(",")&&(l["data-merchant-id"]=a["merchant-id"],a["merchant-id"]="*"),{url:"".concat(i,"?").concat(XC(a)),attributes:l}}function XC(e){var t="";return Object.keys(e).forEach((function(n){0!==t.length&&(t+="&"),t+=n+"="+e[n]})),t}function JC(e,t){void 0===t&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach((function(e){n.setAttribute(e,t[e]),"data-csp-nonce"===e&&n.setAttribute("nonce",t["data-csp-nonce"])})),n}function ZC(e,t){if(void 0===t&&(t=Promise),nS(e,t),"undefined"===typeof document)return t.resolve(null);var n=YC(e),r=n.url,i=n.attributes,s=i["data-namespace"]||"paypal",o=tS(s);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),function(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(null===n)return null;var r=JC(e,t),i=n.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var s=!0;return Object.keys(i.dataset).forEach((function(e){i.dataset[e]!==r.dataset[e]&&(s=!1)})),s?n:null}(r,i)&&o?t.resolve(o):eS({url:r,attributes:i},t).then((function(){var e=tS(s);if(e)return e;throw new Error("The window.".concat(s," global variable is not available."))}))}function eS(e,t){void 0===t&&(t=Promise),nS(e,t);var n=e.url,r=e.attributes;if("string"!==typeof n||0===n.length)throw new Error("Invalid url.");if("undefined"!==typeof r&&"object"!==typeof r)throw new Error("Expected attributes to be an object.");return new t((function(e,t){if("undefined"===typeof document)return e();!function(e){var t=e.url,n=e.attributes,r=e.onSuccess,i=e.onError,s=JC(t,n);s.onerror=i,s.onload=r,document.head.insertBefore(s,document.head.firstElementChild)}({url:n,attributes:r,onSuccess:function(){return e()},onError:function(){var e=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return t(e)}})}))}function tS(e){return window[e]}function nS(e,t){if("object"!==typeof e||null===e)throw new Error("Expected an options object.");var n=e.environment;if(n&&"production"!==n&&"sandbox"!==n)throw new Error('The `environment` option must be either "production" or "sandbox".');if("undefined"!==typeof t&&"function"!==typeof t)throw new Error("Expected PromisePonyfill to be a function.")}QC.displayName="PayPalButtons","function"===typeof SuppressedError&&SuppressedError;var rS=function(e){var t=e.className,n=void 0===t?"":t,r=e.children,s=AC(e,["className","children"]),o=GC()[0],a=o.isResolved,l=o.options,c=(0,i.useRef)(null),u=(0,i.useState)(!0),h=u[0],d=u[1],f=(0,i.useState)(null)[1];return(0,i.useEffect)((function(){if(!1!==a){var e=BC(l[jC]);if(void 0===e||void 0===e.Marks)return f((function(){throw new Error(qC({reactComponentName:rS.displayName,sdkComponentKey:"marks",sdkRequestedComponents:l.components,sdkDataNamespace:l[jC]}))}));!function(e){var t=c.current;if(!t||!e.isEligible())return d(!1);t.firstChild&&t.removeChild(t.firstChild),e.render(t).catch((function(e){null!==t&&0!==t.children.length&&f((function(){throw new Error("Failed to render <PayPalMarks /> component. ".concat(e))}))}))}(e.Marks(PC({},s)))}}),[a,s.fundingSource]),i.createElement(i.Fragment,null,h?i.createElement("div",{ref:c,className:n}):r)};rS.displayName="PayPalMarks";var iS=function(e){var t=e.className,n=void 0===t?"":t,r=e.forceReRender,s=void 0===r?[]:r,o=AC(e,["className","forceReRender"]),a=GC()[0],l=a.isResolved,c=a.options,u=(0,i.useRef)(null),h=(0,i.useRef)(null),d=(0,i.useState)(null)[1];return(0,i.useEffect)((function(){if(!1!==l){var e=BC(c[jC]);if(void 0===e||void 0===e.Messages)return d((function(){throw new Error(qC({reactComponentName:iS.displayName,sdkComponentKey:"messages",sdkRequestedComponents:c.components,sdkDataNamespace:c[jC]}))}));h.current=e.Messages(PC({},o)),h.current.render(u.current).catch((function(e){null!==u.current&&0!==u.current.children.length&&d((function(){throw new Error("Failed to render <PayPalMessages /> component. ".concat(e))}))}))}}),OC([l],s,!0)),i.createElement("div",{ref:u,className:n})};iS.displayName="PayPalMessages";var sS=function(e){var t,n=e.options,r=void 0===n?{clientId:"test"}:n,s=e.children,o=e.deferLoading,a=void 0!==o&&o,l=(0,i.useReducer)(HC,{options:PC(PC({},r),(t={},t[LC]=MC,t[FC]=MC,t[DC]="".concat($C(r)),t)),loadingStatus:a?IC.INITIAL:IC.PENDING}),c=l[0],u=l[1];return(0,i.useEffect)((function(){if(!1===a&&c.loadingStatus===IC.INITIAL)return u({type:NC.LOADING_STATUS,value:IC.PENDING});if(c.loadingStatus===IC.PENDING){var e=!0;return ZC(c.options).then((function(){e&&u({type:NC.LOADING_STATUS,value:IC.RESOLVED})})).catch((function(t){console.error("".concat(UC," ").concat(t)),e&&u({type:NC.LOADING_STATUS,value:{state:IC.REJECTED,message:String(t)}})})),function(){e=!1}}}),[c.options,a,c.loadingStatus]),i.createElement(WC.Provider,{value:PC(PC({},c),{dispatch:u})},s)};function oS(){}(0,i.createContext)({cardFieldsForm:null,fields:{},registerField:oS,unregisterField:oS});const aS=()=>{const e=ne(),t=(0,i.useContext)(YT),{loginStatus:n,auth:r}=t,[s,o]=(0,i.useState)((()=>JSON.parse(localStorage.getItem("order")||"[]"))),a=e=>{const t=JSON.parse(localStorage.getItem("order")||"[]").filter(((t,n)=>n!==e));localStorage.setItem("order",JSON.stringify(t)),o(t)},l=(e,t)=>{const n=[...s];n[e].quantity=t,localStorage.setItem("order",JSON.stringify(n)),o(n)},c=s.reduce(((e,t)=>e+Number(t.product_discount)*Number(t.quantity)),0);return(0,i.useEffect)((()=>{console.log(s)}),[s]),(0,QT.jsxs)("div",{children:[(0,QT.jsx)(eC,{}),(0,QT.jsx)("section",{className:"bg-white py-8 antialiased dark:bg-gray-900 md:py-16",children:(0,QT.jsxs)("div",{className:"mx-auto max-w-screen-xl px-4 2xl:px-0",children:[(0,QT.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white sm:text-2xl",children:"Shopping Cart"}),(0,QT.jsxs)("div",{className:"mt-6 sm:mt-8 md:gap-6 lg:flex lg:items-start xl:gap-8",children:[(0,QT.jsx)("div",{className:"mx-auto w-full flex-none lg:max-w-2xl xl:max-w-4xl",children:(0,QT.jsx)("div",{className:"space-y-6",children:s.length>0?s.map(((e,t)=>(0,QT.jsx)(SC,{...e,index:t,onRemove:a,onQuantityChange:l},t))):(0,QT.jsx)("p",{children:"No items in cart"})})}),(0,QT.jsx)("div",{className:"mx-auto mt-6 max-w-4xl flex-1 space-y-6 lg:mt-0 lg:w-full",children:(0,QT.jsxs)("div",{className:"space-y-4 rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 sm:p-6",children:[(0,QT.jsx)("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Order summary"}),(0,QT.jsxs)("div",{className:"space-y-4",children:[(0,QT.jsxs)("div",{className:"space-y-2",children:[(0,QT.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,QT.jsx)("dt",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:"Original price"}),(0,QT.jsxs)("dd",{className:"text-base font-medium text-gray-900 dark:text-white",children:["$",c.toFixed(2)]})]}),(0,QT.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,QT.jsx)("dt",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:"Savings"}),(0,QT.jsx)("dd",{className:"text-base font-medium text-green-600",children:"-$0.0"})]}),(0,QT.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,QT.jsx)("dt",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:"Store Pickup"}),(0,QT.jsx)("dd",{className:"text-base font-medium text-gray-900 dark:text-white",children:"$0"})]}),(0,QT.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,QT.jsx)("dt",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:"Tax"}),(0,QT.jsx)("dd",{className:"text-base font-medium text-gray-900 dark:text-white",children:"$0"})]})]}),(0,QT.jsxs)("dl",{className:"flex items-center justify-between gap-4 border-t border-gray-200 pt-2 dark:border-gray-700",children:[(0,QT.jsx)("dt",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Total"}),(0,QT.jsxs)("dd",{className:"text-base font-bold text-gray-900 dark:text-white",children:["$",c.toFixed(2)]})]})]}),n?(0,QT.jsx)("div",{className:"mt-4",children:(0,QT.jsx)(QC,{createOrder:(e,t)=>t.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"HKD",value:c.toFixed(2),breakdown:{item_total:{currency_code:"HKD",value:c.toFixed(2)}}},items:s.map((e=>{var t,n,r;return{name:(null===(t=e.product_en_name)||void 0===t?void 0:t.toString())||"Unnamed",quantity:(null===(n=e.quantity)||void 0===n?void 0:n.toString())||"1",description:(null===(r=e.product_desc)||void 0===r?void 0:r.toString())||"No description",unit_amount:{currency_code:"HKD",value:Number(e.product_discount).toFixed(2)},category:"PHYSICAL_GOODS"}}))}],application_context:{shipping_preference:"GET_FROM_FILE"}}),onApprove:async(t,n)=>{var i,s,a,l,c,u;const h=await(null===(i=n.order)||void 0===i?void 0:i.capture());if(h&&"COMPLETED"===h.status&&"COMPLETED"===(null===(s=h.purchase_units)||void 0===s||null===(a=s[0])||void 0===a||null===(l=a.payments)||void 0===l||null===(c=l.captures)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.status)){var d,f,p,m,g,y,v,_,b;const t=h.id,n=h.purchase_units[0].payments.captures[0],i=h.purchase_units[0].items,s=h.purchase_units[0].amount,a=n.create_time,l=h.payer,c={id:t,items:i,amount:s,capture_id:n.id,create_time:a,payer:{email:null===l||void 0===l?void 0:l.email_address,name:(null===l||void 0===l||null===(d=l.name)||void 0===d?void 0:d.given_name)+" "+(null===l||void 0===l||null===(f=l.name)||void 0===f?void 0:f.surname)},shipping:{name:null===h||void 0===h||null===(p=h.purchase_units)||void 0===p||null===(m=p[0])||void 0===m||null===(g=m.shipping)||void 0===g||null===(y=g.name)||void 0===y?void 0:y.full_name,address:null===h||void 0===h||null===(v=h.purchase_units)||void 0===v||null===(_=v[0])||void 0===_||null===(b=_.shipping)||void 0===b?void 0:b.address}},u=fE(lT,"users",r.uid);try{await function(e,t,n){e=aE(e,uE);const r=aE(e.firestore,mE),i=IE(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Et(t))||t instanceof _E?DE(i,"updateDoc",e._key,t,n,a):OE(i,"updateDoc",e._key,t),tT(r,[s.toMutation(e._key,mb.exists(!0))])}(u,{orders:rT(c)}),console.log("\u2705 The order has been saved Firebase"),localStorage.removeItem("order"),o([]),FT.success("Payment successful! The order has been upload \ud83c\udf89",{position:"top-center",autoClose:2e3}),setTimeout((()=>{e("/thankyou")}),2e3)}catch(w){console.error("\u274c The order has been saved Firebase Error",w),FT.error("Order failed, please try again later")}}}})}):(0,QT.jsx)("button",{disabled:!0,className:"flex w-full items-center justify-center rounded-lg bg-red-500 px-5 py-2.5 text-sm font-medium text-white hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Please login first"}),(0,QT.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,QT.jsx)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:" or "}),(0,QT.jsxs)(Ie,{to:"/",title:"",className:"inline-flex items-center gap-2 text-sm font-medium text-primary-700 underline hover:no-underline dark:text-primary-500",children:["Continue Shopping",(0,QT.jsx)("svg",{className:"h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:(0,QT.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m14 0-4 4m4-4-4-4"})})]})]})]})})]})]})})]})},lS=()=>(0,QT.jsxs)("div",{className:"text-center p-10",children:[(0,QT.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Thank you for your purchase\uff01"}),(0,QT.jsx)("p",{className:"text-lg",children:"We have received your order \ud83c\udf89"}),(0,QT.jsx)(Ie,{to:"/",className:"mt-6 inline-block text-blue-600 underline",children:"Back to Home Page"})]}),cS=()=>{const{auth:e}=(0,i.useContext)(YT),[t,n]=(0,i.useState)([]);return(0,i.useEffect)((()=>{(async()=>{if(null===e||void 0===e||!e.uid)return;const t=fE(lT,"users",e.uid),r=await JE(t);if(r.exists()){const e=r.data();e.orders&&n(e.orders)}})()}),[null===e||void 0===e?void 0:e.uid]),(0,QT.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,QT.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"\ud83e\uddfe Your order record"}),0===(null===t||void 0===t?void 0:t.length)?(0,QT.jsx)("p",{className:"text-center text-gray-500",children:"No order record"}):(0,QT.jsx)("div",{className:"space-y-6",children:null===t||void 0===t?void 0:t.map(((t,n)=>(0,QT.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 shadow-sm bg-white",children:[(0,QT.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,QT.jsxs)("span",{className:"text-sm text-gray-600",children:["Order No.: ",t.id]}),(0,QT.jsxs)("span",{className:"text-sm text-gray-600",children:["Date: ",new Date(t.create_time).toLocaleString()]})]}),(0,QT.jsxs)("div",{className:"text-sm text-gray-800 font-medium mb-2",children:["\ud83d\udc64 ",null===e||void 0===e?void 0:e.displayName," (",null===e||void 0===e?void 0:e.email,")"]}),(0,QT.jsxs)("div",{className:"divide-y divide-gray-200",children:[Array.isArray(t.items)&&t.items.map(((e,t)=>{var n;const r=(null===e||void 0===e?void 0:e.name)||"Unknown Product",i=(null===e||void 0===e?void 0:e.quantity)||0,s=Number((null===e||void 0===e||null===(n=e.unit_amount)||void 0===n?void 0:n.value)||0).toFixed(2);return(0,QT.jsxs)("div",{className:"py-2 flex justify-between",children:[(0,QT.jsxs)("div",{children:[(0,QT.jsx)("p",{className:"font-semibold",children:r}),(0,QT.jsxs)("p",{className:"text-sm text-gray-500",children:["Quantity: ",i]})]}),(0,QT.jsx)("div",{className:"text-right",children:(0,QT.jsxs)("p",{children:["$",s]})})]},t)})),"              "]}),(0,QT.jsxs)("div",{className:"text-right mt-4 font-bold text-gray-900",children:["Total Price\uff1a$",Number(t.amount.value).toFixed(2)," ",t.amount.currency_code]}),(0,QT.jsxs)("div",{className:"text-right mt-4 font-bold text-gray-900",children:["Address\uff1a",t.shipping.address.address_line_1]})]},n)))}),(0,QT.jsx)("div",{className:"mt-8 text-center",children:(0,QT.jsx)(Ie,{to:"/",className:"text-blue-600 underline hover:text-blue-800 text-sm",children:"\u2b05 Back Home"})})]})};const uS=function(){const e=(0,i.useContext)(YT),{loginStatus:t,setOrderArr:n}=e;return(0,i.useEffect)((()=>{}),[]),(0,QT.jsxs)(sS,{options:{clientId:"AWUc0wnWe79TBqEdTIO9C6bTNMKO_mCmEdj0sukO1R7b96wzgUujeZ_Y1sRVI806G1bbPJIrx21njmSx",currency:"HKD",intent:"capture"},children:[(0,QT.jsx)(GT,{}),(0,QT.jsx)(Te,{children:(0,QT.jsxs)(_e,{children:[(0,QT.jsx)(ye,{path:"/",element:(0,QT.jsx)(rC,{setOrderArr:n})}),t?(0,QT.jsx)(ye,{path:"/panel",element:(0,QT.jsx)(TC,{})}):null,(0,QT.jsx)(ye,{path:"*",element:(0,QT.jsx)(CC,{})}),(0,QT.jsx)(ye,{path:"cart",element:(0,QT.jsx)(aS,{})}),(0,QT.jsx)(ye,{path:"/thankyou",element:(0,QT.jsx)(lS,{})}),(0,QT.jsx)(ye,{path:"/order",element:(0,QT.jsx)(cS,{})})]})})]})};o.createRoot(document.getElementById("root")).render((0,QT.jsx)(XT,{children:(0,QT.jsx)(uS,{})}))})();
//# sourceMappingURL=main.63de43bb.js.map